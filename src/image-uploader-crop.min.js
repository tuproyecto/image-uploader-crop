!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";function t(t){var s={},e=[];return e=i.prototype.isPrototypeOf(t)?t.serializeArray():i(t).serializeArray(),i.each(e,function(){void 0!==s[this.name]?(s[this.name].push||(s[this.name]=[s[this.name]]),s[this.name].push(this.value||"")):s[this.name]=this.value||""}),s}function s(i,t){var s=Math.min(i,t);return i==t?[i,t]:[s,s]}function e(){return!!{}.hasOwnProperty.call(i.fn,"fineUploader")}function n(){return!!{}.hasOwnProperty.call(i.fn,"Jcrop")}var o=Array.prototype.slice,g=(Array.prototype.splice,{formCrop:null,btnToCrop:null,imgCrop:null,previewImg:null,uploaderImg:null,templateImgUploader:"",configImg:{maxWidthImg:0,maxHeightImg:0,minWidthImg:0,minHeightImg:0,allowedExtensions:["jpeg","jpg","png"],sizeLimit:0,sendOriginal:!0,defaultQuality:100},uploadding:{inputName:"file",endpoint:"",params:{}},cropping:{endpoint:"",params:{}},extraDropzones:[i("#wrapper-image-crop")],callbacks:{onCropping:function(i){},onCropComplete:function(i,t,s){},onCropError:function(i,t,s){},onLoadImg:function(i,t,s){},onCompleteLoad:function(i,t,s,e){}},showMessage:function(i){return alertify.alert(i)},showConfirm:function(i){var t=new qq.Promise;return alertify.confirm(i,function(i){return i?t.success(i):t.failure()}),t},showPrompt:function(i,t){var s=new qq.Promise;return alertify.prompt(i,function(i,t){return i?s.success(t):s.failure(t)},t),s}}),r={reassignActions:function(){this.settings.uploaderImg.off("complete"),this.settings.uploaderImg.on("complete",r.onCompleteLoadImg.bind(this)),this.settings.btnToCrop?(this.settings.btnToCrop.off("click",r.submitCropImage.bind(this)),this.settings.btnToCrop.on("click",r.submitCropImage.bind(this))):(this.settings.formCrop.off("submit",r.submitCropImage.bind(this)),this.settings.formCrop.on("submit",r.submitCropImage.bind(this)))},destroy:function(){void 0!==this.settings.imgCrop.data("Jcrop")&&this.jcrop_img.destroy(),this.settings.uploaderImg.off("complete"),this.settings.formCrop.off("submit"),this.$element.removeData("imageUploaderCrop")},setImage:function(t,s){t||(t=this.settings.imgCrop.attr("src"))||(t="");try{if(!this.settings.imgCrop)throw"The imgCrop element have not went assign"}catch(i){console.error("Error: "+i+".")}var e=this;void 0!==this.settings.imgCrop.data("Jcrop")?(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.setImage(t,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),r.changeOptsCrop.call(e,{imgSet:t,minWidth:e.settings.configImg.minWidthImg,minHeight:e.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),e.settings.formCrop.find("input#crop_type").val("url"),e.settings.formCrop.find("input#file_name").val(t),e.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))})):(this.settings.imgCrop.attr("src",t),r.renderImageCrop.call(this,this.settings.imgCrop,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),r.changeOptsCrop.call(this,{imgSet:t,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),this.settings.formCrop.find("input#crop_type").val("url"),this.settings.formCrop.find("input#file_name").val(t),this.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))}.bind(this))),i.isFunction(s)&&s.call()},renderUploaderImg:function(i){if(!e())return console.error("Error: The imageUploaderCrop jQuery library do need of the fine-uploader jQuery library."),!1;i.fineUploader({debug:!1,template:this.settings.templateImgUploader,request:this.settings.uploadding,thumbnails:{placeholders:{waitingPath:"img/waiting-generic.png",notAvailablePath:"img/not_available-generic.png"}},autoUpload:!0,multiple:!1,validation:{image:{maxWidth:this.settings.configImg.maxWidthImg||g.configImg.maxWidthImg,maxHeight:this.settings.configImg.maxHeightImg||g.configImg.maxHeightImg},allowedExtensions:this.settings.configImg.allowedExtensions||g.configImg.allowedExtensions,sizeLimit:this.settings.configImg.sizeLimit||g.configImg.sizeLimit,stopOnFirstInvalidFile:!1,itemLimit:0},scaling:{sendOriginal:this.settings.configImg.sendOriginal||g.configImg.sendOriginal,defaultQuality:this.settings.configImg.defaultQuality||g.configImg.defaultQuality},callbacks:{onUpload:r.onLoadImg.bind(this)},dragAndDrop:{extraDropzones:this.settings.extraDropzones},showMessage:this.settings.showMessage,showConfirm:this.settings.showConfirm,showPrompt:this.settings.showPrompt})},renderImageCrop:function(i,t){if(!n())return console.error("Error: The imageUploaderCrop jQuery library needs of the jcrop jQuery library."),!1;var s=this;i.Jcrop({onSelect:r.setCoords.bind(this),onChange:r.setCoords.bind(this),onRelease:function(){},bgColor:"black",bgOpacity:.4,setSelect:[0,0,this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg],aspectRatio:this.settings.configImg.minWidthImg/this.settings.configImg.minHeightImg,boxWidth:i.parent().width(),boxHeight:0,allowSelect:!1,allowResize:!0},function(){s.jcrop_img=this;var e=s.jcrop_img.getBounds();r.changeOptsCrop.call(s,{imgSet:i.attr("src"),minWidth:s.settings.configImg.minWidthImg,minHeight:s.settings.configImg.minHeightImg,imgWidth:e[0],imgHeight:e[1]}),"function"==typeof t&&t.call()})},changeOptsCrop:function(t,e){var n={imgSet:"",minWidth:0,minHeight:0,imgWidth:0,imgHeight:0,dimSelect:[0,0],ix:0,iy:0};i.extend(n,t),n.dimSelect=s(n.imgWidth,n.imgHeight),n.ix=(n.imgWidth-n.dimSelect[0])/2,this.jcrop_img.setOptions({trueSize:[Math.floor(n.imgWidth),Math.floor(n.imgHeight)]}),this.settings.previewImg.attr("src",n.imgSet),this.jcrop_img.setSelect([n.ix,n.iy,n.dimSelect[0],n.dimSelect[1]]),"function"==typeof e&&e.call()},submitCropImage:function(s){s.preventDefault();var e=t(this.settings.formCrop);e.targ_w=this.settings.configImg.minWidthImg,e.targ_h=this.settings.configImg.minHeightImg,i.extend(e,this.settings.cropping.params),i.isFunction(this.settings.callbacks.onCropping)&&this.settings.callbacks.onCropping.call(this,this.jcrop_img),this.settings.formCrop.find(":submit").addClass("disabled"),i.post(this.settings.cropping.endpoint,e,r.onSuccessCrop.bind(this)).fail(r.onErrorCrop.bind(this))},setCoords:function(t){var s=this.settings.configImg.minHeightImg/this.settings.configImg.minWidthImg,e=null!==this.jcrop_img&&this.jcrop_img.getBounds(),n=i(this.settings.previewImg.parent()[0]).width()/t.w,o=s*i(this.settings.previewImg.parent()[0]).width()/t.h;this.settings.previewImg.attr("src")&&i(this.settings.previewImg.parent()[0]).height(s*i(this.settings.previewImg.parent()[0]).width()),this.settings.formCrop.find("input.crop-x").val(t.x),this.settings.formCrop.find("input.crop-y").val(t.y),this.settings.formCrop.find("input.crop-w").val(t.w),this.settings.formCrop.find("input.crop-h").val(t.h),e&&this.settings.previewImg.css({width:Math.round(n*e[0])+"px",height:Math.round(o*e[1])+"px",minWidth:Math.round(n*e[0])+"px",minHeight:Math.round(o*e[1])+"px",marginLeft:"-"+Math.round(n*t.x)+"px",marginTop:"-"+Math.round(o*t.y)+"px"})},onLoadImg:function(t,s){var e=this.settings.uploaderImg.fineUploader("getDropTarget",t);void 0!==e&&e.length&&(e.hasClass("image-area-drop")||e.hasClass("wrapper-image-crop"))&&(r.reassignActions.call(this),r.setImage.call(this)),i.isFunction(this.settings.callbacks.onLoadImg)&&this.settings.callbacks.onLoadImg.call(this,this.settings.uploaderImg,t,s)},onCompleteLoadImg:function(t,s,e,n){n.success&&(void 0!==this.settings.imgCrop.data("Jcrop")?this.jcrop_img.setImage(n.file_path,function(){n.file_width,n.file_height;r.changeOptsCrop.call(this,{imgSet:n.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:n.file_width,imgHeight:n.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,s,e,n)}.bind(this))}.bind(this)):(this.settings.imgCrop.attr("src",n.file_path),r.renderImageCrop.call(this,this.settings.imgCrop,function(){r.changeOptsCrop.call(this,{imgSet:n.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:n.file_width,imgHeight:n.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,s,e,n)}.bind(this))}.bind(this))),this.settings.formCrop.find("input#crop_type").val("name"),this.settings.formCrop.find("input#file_name").val(n.file_name),this.settings.formCrop.find("input#file_type").val(n.file_type))},onSuccessCrop:function(t,s,e){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropComplete)&&this.settings.callbacks.onCropComplete.call(this,this.jcrop_img,t,e)},onErrorCrop:function(t,s,e){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropError)&&this.settings.callbacks.onCropError.call(this,this.jcrop_img,t,e)}};i.imageUploaderCrop=function(t,s){s||(s={});var e=this;this.jcrop_img=null,this.element=t,this.$element=i(t),i.isFunction(e.init)&&e.init(t,s)},i.imageUploaderCrop.prototype={settings:{},init:function(t,s){this.settings=i.extend({},g,s),this.settings.imgCrop&&void 0!==this.settings.imgCrop.data("Jcrop")&&(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.destroy()),r.reassignActions.call(this),r.renderUploaderImg.call(this,this.settings.uploaderImg),r.renderImageCrop.call(this,this.settings.imgCrop)},changeImage:function(i,t){r.reassignActions.call(this),r.setImage.call(this,i,t)},getImgCrop:function(){return this.settings.imgCrop},getFormCrop:function(){return this.settings.formCrop},getUploaderImg:function(){return this.settings.uploaderImg},getPreviewImg:function(){return this.settings.previewImg},destroy:function(){r.destroy.call(this)}},i.fn.imageUploaderCrop=function(t){var s=arguments;if(void 0!==i(this).data("imageUploaderCrop")&&i.isFunction(i(this).data("imageUploaderCrop")[t])){var e=i(this).data("imageUploaderCrop");return e[t].apply(e,o.call(s,1))}if("object"==typeof t||!t)return this.each(function(s,e){var n=new i.imageUploaderCrop(this,t);i(this).data("imageUploaderCrop",n)});i.error('Method "'+t+'" does not exist in imageUploaderCrop - (krobing) plugin!')}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLXVwbG9hZGVyLWNyb3AuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiJCIsImZvcm1Ub0pzb24iLCJzZWxlY3RvciIsIm8iLCJhIiwicHJvdG90eXBlIiwiaXNQcm90b3R5cGVPZiIsInNlcmlhbGl6ZUFycmF5IiwiZWFjaCIsInVuZGVmaW5lZCIsInRoaXMiLCJuYW1lIiwicHVzaCIsInZhbHVlIiwic2V0U3F1YXJlIiwiaW1nV2lkdGgiLCJpbWdIZWlnaHQiLCJtaW5EaW0iLCJNYXRoIiwibWluIiwiZXhpc3RVcGxvYWRlclBsdWdpbiIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImZuIiwiZXhpc3RDcm9wUGx1Z2luIiwic2xpY2UiLCJBcnJheSIsImRlZmF1bHRzIiwic3BsaWNlIiwiZm9ybUNyb3AiLCJidG5Ub0Nyb3AiLCJpbWdDcm9wIiwicHJldmlld0ltZyIsInVwbG9hZGVySW1nIiwidGVtcGxhdGVJbWdVcGxvYWRlciIsImNvbmZpZ0ltZyIsIm1heFdpZHRoSW1nIiwibWF4SGVpZ2h0SW1nIiwibWluV2lkdGhJbWciLCJtaW5IZWlnaHRJbWciLCJhbGxvd2VkRXh0ZW5zaW9ucyIsInNpemVMaW1pdCIsInNlbmRPcmlnaW5hbCIsImRlZmF1bHRRdWFsaXR5IiwidXBsb2FkZGluZyIsImlucHV0TmFtZSIsImVuZHBvaW50IiwicGFyYW1zIiwiY3JvcHBpbmciLCJleHRyYURyb3B6b25lcyIsImNhbGxiYWNrcyIsIm9uQ3JvcHBpbmciLCJqY3JvcF9pbWciLCJvbkNyb3BDb21wbGV0ZSIsInJlc3AiLCJqcVhIUiIsIm9uQ3JvcEVycm9yIiwiZXJyb3IiLCJvbkxvYWRJbWciLCIkdXBsb2FkZXJJbWciLCJpZCIsIm9uQ29tcGxldGVMb2FkIiwicmVzIiwic2hvd01lc3NhZ2UiLCJtZXNzYWdlIiwiYWxlcnRpZnkiLCJhbGVydCIsInNob3dDb25maXJtIiwicHJvbWlzZSIsInFxIiwiUHJvbWlzZSIsImNvbmZpcm0iLCJyZXN1bHQiLCJzdWNjZXNzIiwiZmFpbHVyZSIsInNob3dQcm9tcHQiLCJkZWZhdWx0VmFsdWUiLCJwcm9tcHQiLCJpblN0ciIsIm1ldGhvZHMiLCJyZWFzc2lnbkFjdGlvbnMiLCJzZXR0aW5ncyIsIm9mZiIsIm9uIiwib25Db21wbGV0ZUxvYWRJbWciLCJiaW5kIiwic3VibWl0Q3JvcEltYWdlIiwiZGVzdHJveSIsImRhdGEiLCIkZWxlbWVudCIsInJlbW92ZURhdGEiLCJzZXRJbWFnZSIsInVybEltYWdlIiwiY2FsbGJhY2siLCJhdHRyIiwiZXJyIiwiY29uc29sZSIsIl90aGlzIiwiZGltSW1nIiwiZ2V0Qm91bmRzIiwiY2hhbmdlT3B0c0Nyb3AiLCJpbWdTZXQiLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsImZpbmQiLCJ2YWwiLCJzcGxpdCIsInJlbmRlckltYWdlQ3JvcCIsImlzRnVuY3Rpb24iLCJyZW5kZXJVcGxvYWRlckltZyIsImZpbmVVcGxvYWRlciIsImRlYnVnIiwidGVtcGxhdGUiLCJyZXF1ZXN0IiwidGh1bWJuYWlscyIsInBsYWNlaG9sZGVycyIsIndhaXRpbmdQYXRoIiwibm90QXZhaWxhYmxlUGF0aCIsImF1dG9VcGxvYWQiLCJtdWx0aXBsZSIsInZhbGlkYXRpb24iLCJpbWFnZSIsIm1heFdpZHRoIiwibWF4SGVpZ2h0Iiwic3RvcE9uRmlyc3RJbnZhbGlkRmlsZSIsIml0ZW1MaW1pdCIsInNjYWxpbmciLCJvblVwbG9hZCIsImRyYWdBbmREcm9wIiwiJGltZ0Nyb3AiLCJKY3JvcCIsIm9uU2VsZWN0Iiwic2V0Q29vcmRzIiwib25DaGFuZ2UiLCJvblJlbGVhc2UiLCJiZ0NvbG9yIiwiYmdPcGFjaXR5Iiwic2V0U2VsZWN0IiwiYXNwZWN0UmF0aW8iLCJib3hXaWR0aCIsInBhcmVudCIsIndpZHRoIiwiYm94SGVpZ2h0IiwiYWxsb3dTZWxlY3QiLCJhbGxvd1Jlc2l6ZSIsImRpbURlZmF1bHQiLCJvcHRpb25zIiwiZGltU2VsZWN0IiwiaXgiLCJpeSIsImV4dGVuZCIsInNldE9wdGlvbnMiLCJ0cnVlU2l6ZSIsImZsb29yIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ193IiwidGFyZ19oIiwiYWRkQ2xhc3MiLCJwb3N0Iiwib25TdWNjZXNzQ3JvcCIsImZhaWwiLCJvbkVycm9yQ3JvcCIsImNvb3JkcyIsInJhdGlvTGVzc2VyIiwicngiLCJ3IiwicnkiLCJoIiwiaGVpZ2h0IiwieCIsInkiLCJjc3MiLCJyb3VuZCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCIkYXJlYURyb3AiLCJsZW5ndGgiLCJoYXNDbGFzcyIsImV2ZW50IiwiZmlsZV9wYXRoIiwiZmlsZV93aWR0aCIsImZpbGVfaGVpZ2h0IiwiZmlsZV9uYW1lIiwiZmlsZV90eXBlIiwic3RhdHVzIiwicmVtb3ZlQ2xhc3MiLCJpbWFnZVVwbG9hZGVyQ3JvcCIsImVsZW1lbnQiLCJwbHVnaW4iLCJpbml0IiwiY2hhbmdlSW1hZ2UiLCJnZXRJbWdDcm9wIiwiZ2V0Rm9ybUNyb3AiLCJnZXRVcGxvYWRlckltZyIsImdldFByZXZpZXdJbWciLCJvcHRzT3JDbWQiLCJzZWxmQXJncyIsImFyZ3VtZW50cyIsInBsdWciLCJhcHBseSIsImluZGV4IiwiZWwiXSwibWFwcGluZ3MiOiJDQVVBLFNBQUFBLEdBQUEsYUFDQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFFQUQsUUFBQSxVQUFBRCxHQUNBLGlCQUFBRyxRQUFBQSxPQUFBQyxRQUVBRCxPQUFBQyxRQUFBSixFQUFBSyxRQUFBLFdBR0FMLEVBQUFNLFNBRUEsU0FBQUMsR0FBQSxhQTRFQSxTQUFBQyxFQUFBQyxHQUVBLElBQUFDLEtBQUFDLEtBcUJBLE9BbkJBQSxFQURBSixFQUFBSyxVQUFBQyxjQUFBSixHQUNBQSxFQUFBSyxpQkFHQVAsRUFBQUUsR0FBQUssaUJBR0FQLEVBQUFRLEtBQUFKLEVBQUEsZ0JBQ0FLLElBQUFOLEVBQUFPLEtBQUFDLE9BQ0FSLEVBQUFPLEtBQUFDLE1BQUFDLE9BQ0FU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R0FFQXBNLEVBQUFVLE1BQUE4RSxLQUFBLG9CQUFBcUcsS0FJQTdMLEVBQUF5RCxNQUFBLFdBQUEySSxFQUFBIiwiZmlsZSI6ImltYWdlLXVwbG9hZGVyLWNyb3AubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1hZ2UtdXBsb2FkZXItY3JvcCB2MC4xLjAgZm9yIGpRdWVyeSB0aGF0IHVzZXMgZmluZS11cGxvYWRlciwgamNyb3Bcbi8vIChjKSAyMDE3LCBNSVQgbGljZW5zZWQuIGh0dHA6Ly90dXByb3llY3RvLmNvbVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIERlcGVuZGVuY2llczogalF1ZXJ5LCBmaW5lLXVwbG9hZGVyLCBqY3JvcFxuLy8gQXV0aG9yOiBUdVByb3llY3RvLmNvbVxuLy8gRGV2ZWxvcGVyOiBAa3JvYmluZ1xuLy8gQ3JlYXRlZDogMDQvMDMvMjAxNlxuLy8gV2Vic2l0ZTogaHR0cDovL3R1cHJveWVjdG8uY29tXG4vLyBEZXNjcmlwdGlvbjogY3JvcHBlciBhbmQgdXBsb2FkZXIgb2YgaW1hZ2VzIHRoYXQgdXNlcyBhbm90aGVyIGxpYnJhcmllc1xuXG4hKGZ1bmN0aW9uIChmYWN0b3J5KSB7ICd1c2Ugc3RyaWN0J1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuXHRcdGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdC8vIE5vZGUvQ29tbW9uSlNcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xuXHRcdGZhY3RvcnkoalF1ZXJ5KTtcblx0fVxufShmdW5jdGlvbiAoJCkgeyAndXNlIHN0cmljdCc7XG5cdHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsgLy8gc2F2ZSByZWYgdG8gb3JpZ2luYWwgc2xpY2UoKVxuXHR2YXIgc3BsaWNlID0gQXJyYXkucHJvdG90eXBlLnNwbGljZTsgLy8gc2F2ZSByZWYgdG8gb3JpZ2luYWwgc2xpY2UoKVxuXG5cdC8vIGRlZmF1bHQgb3B0aW9uc1xuXHR2YXIgZGVmYXVsdHMgPSB7XG5cdFx0Zm9ybUNyb3A6IG51bGwsXG5cdFx0YnRuVG9Dcm9wOiBudWxsLFxuXHRcdGltZ0Nyb3A6IG51bGwsXG5cdFx0cHJldmlld0ltZzogbnVsbCxcblx0XHR1cGxvYWRlckltZzogbnVsbCxcblx0XHR0ZW1wbGF0ZUltZ1VwbG9hZGVyOiAnJyxcblx0XHRjb25maWdJbWc6IHtcblx0XHRcdG1heFdpZHRoSW1nIDogMCwgLy8gNjQ2ICogMlxuXHRcdFx0bWF4SGVpZ2h0SW1nIDogMCwgLy8gMzc0ICogMlxuXHRcdFx0bWluV2lkdGhJbWcgOiAwLFxuXHRcdFx0bWluSGVpZ2h0SW1nIDogMCxcblx0XHRcdGFsbG93ZWRFeHRlbnNpb25zOiBbJ2pwZWcnLCAnanBnJywgJ3BuZyddLFxuXHRcdFx0c2l6ZUxpbWl0OiAwLCAvLyA1MCBrQiA9IDUwICogMTAyNCBieXRlcyxcblx0XHRcdHNlbmRPcmlnaW5hbDogdHJ1ZSwgLy8gc2VuZCBpbWFnZXMgb3JpZ2luYWwgaW4gdHJ1ZVxuXHRcdFx0ZGVmYXVsdFF1YWxpdHk6IDEwMCAvLyBxdWFsaXR5IG9mIHRoZSBpbWFnZSwgcmFuZ2UoIDEgLSAxMDAgKVxuXHRcdH0sXG5cdFx0dXBsb2FkZGluZzoge1xuXHRcdFx0aW5wdXROYW1lOiAnZmlsZScsXG5cdFx0XHRlbmRwb2ludDogJycsXG5cdFx0XHRwYXJhbXM6IHt9XG5cdFx0fSxcblx0XHRjcm9wcGluZzoge1xuXHRcdFx0ZW5kcG9pbnQ6ICcnLFxuXHRcdFx0cGFyYW1zOiB7fVxuXHRcdH0sXG5cdFx0ZXh0cmFEcm9wem9uZXM6IFskKCcjd3JhcHBlci1pbWFnZS1jcm9wJyldLFxuXHRcdC8vIEV2ZW50cyBoYW5kbGVyc1xuXHRcdGNhbGxiYWNrczoge1xuXHRcdFx0b25Dcm9wcGluZzogZnVuY3Rpb24gKGpjcm9wX2ltZykge30sXG5cdFx0XHRvbkNyb3BDb21wbGV0ZTogZnVuY3Rpb24gKGpjcm9wX2ltZywgcmVzcCwganFYSFIpIHt9LFxuXHRcdFx0b25Dcm9wRXJyb3I6IGZ1bmN0aW9uIChqY3JvcF9pbWcsIGpxWEhSLCBlcnJvcikge30sXG5cdFx0XHRvbkxvYWRJbWc6IGZ1bmN0aW9uICgkdXBsb2FkZXJJbWcsIGlkLCBuYW1lKSB7fSxcblx0XHRcdG9uQ29tcGxldGVMb2FkOiBmdW5jdGlvbiAoJHVwbG9hZGVySW1nLCBpZCwgbmFtZSwgcmVzKSB7fVxuXHRcdH0sXG5cdFx0c2hvd01lc3NhZ2U6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdFx0XHRyZXR1cm4gYWxlcnRpZnkuYWxlcnQobWVzc2FnZSk7XG5cdFx0fSxcblx0XHRzaG93Q29uZmlybTogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0XHRcdHZhciBwcm9taXNlID0gbmV3IHFxLlByb21pc2UoKTtcblx0XHRcdGFsZXJ0aWZ5LmNvbmZpcm0obWVzc2FnZSwgZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5zdWNjZXNzKHJlc3VsdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2UuZmFpbHVyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBwcm9taXNlO1xuXHRcdH0sXG5cdFx0c2hvd1Byb21wdDogZnVuY3Rpb24gKG1lc3NhZ2UsIGRlZmF1bHRWYWx1ZSkge1xuXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgcXEuUHJvbWlzZSgpO1xuXG5cdFx0XHRhbGVydGlmeS5wcm9tcHQobWVzc2FnZSwgZnVuY3Rpb24ocmVzdWx0LCBpblN0cikge1xuXHRcdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2Uuc3VjY2VzcyhpblN0cik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2UuZmFpbHVyZShpblN0cik7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGRlZmF1bHRWYWx1ZSk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHR9XG5cdH07XG5cblx0Ly8gPT09PT09PT09PT09PT1cblx0Ly8gaGVscGVycyBtZXRob2Rcblx0Ly8gPT09PT09PT09PT09PT1cblx0LyoqXG5cdCogIFNlcmlhbGl6ZSBmb3JtIGludG8ganNvbiBmb3JtYXRcblx0KiAgQHBhcmFtIHsgc3RyaW5nIH0gbmFtZSBjbGFzcyBvciBpZCBvZiB0aGUgaHRtbCBlbGVtZW50IHRvIGVtYmVkIHRoZSBsb2FkZXJcblx0KiAgQHJldHVybiB7IG9iamVjdCB9IGZvcm0gaW50byBqc29uXG5cdCovXG5cdGZ1bmN0aW9uIGZvcm1Ub0pzb24gKCBzZWxlY3RvciApe1xuXG5cdFx0dmFyIG8gPSB7fSwgYSA9IFtdO1xuXHRcdGlmKCAkLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNlbGVjdG9yKSApe1xuXHRcdFx0YSA9IHNlbGVjdG9yLnNlcmlhbGl6ZUFycmF5KCk7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHRhID0gJChzZWxlY3Rvcikuc2VyaWFsaXplQXJyYXkoKTtcblx0XHR9XG5cblx0XHQkLmVhY2goIGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBvWyB0aGlzLm5hbWUgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRpZiAoICEgb1t0aGlzLm5hbWVdLnB1c2ggKSB7XG5cdFx0XHRcdFx0b1sgdGhpcy5uYW1lIF0gPSBbIG9bIHRoaXMubmFtZSBdIF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRvWyB0aGlzLm5hbWUgXS5wdXNoKCB0aGlzLnZhbHVlIHx8ICcnICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9bIHRoaXMubmFtZSBdID0gdGhpcy52YWx1ZSB8fCAnJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0LyoqXG5cdCogU2V0IHNlbGVjdCBvbiBpbWFnZSBjcm9wXG5cdCogQHBhcmFtIE51bWJlciBpbWdXaWR0aFxuXHQqIEBwYXJhbSBOdW1iZXIgaW1nSGVpZ2h0XG5cdCovXG5cdGZ1bmN0aW9uIHNldFNxdWFyZSAoaW1nV2lkdGgsIGltZ0hlaWdodCkge1xuXHRcdHZhciBtaW5EaW0gPSBNYXRoLm1pbihpbWdXaWR0aCwgaW1nSGVpZ2h0KTtcblxuXHRcdGlmKCBpbWdXaWR0aCA9PSBpbWdIZWlnaHQgKXtcblx0XHRcdHJldHVybiBbaW1nV2lkdGgsIGltZ0hlaWdodF07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFttaW5EaW0sIG1pbkRpbV07XG5cdH1cblxuXHQvLyBjaGVjayBvdXQgaWYgZXhpdHMgalF1ZXJ5IHBsdWdpbiBmaW5ldXBsb2FkZXJcblx0ZnVuY3Rpb24gZXhpc3RVcGxvYWRlclBsdWdpbiAoKSB7XG5cblx0XHRpZiggKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCQuZm4sICdmaW5lVXBsb2FkZXInKSApe1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fWVsc2Uge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdC8vIGNoZWNrIG91dCBpZiBleGl0cyBqUXVlcnkgcGx1Z2luIGpjcm9wXG5cdGZ1bmN0aW9uIGV4aXN0Q3JvcFBsdWdpbiAoKSB7XG5cblx0XHRpZiggKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCQuZm4sICdKY3JvcCcpICl7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogcHJpdmF0ZXMgbWV0aG9kc1xuXHQqL1xuXHR2YXIgbWV0aG9kcyA9IHtcblx0XHQvKipcblx0XHQqIHJlYXNzaWduIGV2ZW50cyBhbmQgYW5vdGhlciB0aGluZ3Ncblx0XHQqL1xuXHRcdHJlYXNzaWduQWN0aW9uczogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLm9mZignY29tcGxldGUnKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcub24oJ2NvbXBsZXRlJywgbWV0aG9kcy5vbkNvbXBsZXRlTG9hZEltZy5iaW5kKHRoaXMpKTtcblxuXHRcdFx0Ly8gaWYgd2FzIGRlZmluZWQgYSBidXR0b24gdG8gZXhlY3V0ZSBhY3Rpb24gdG8gY3JvcFxuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5idG5Ub0Nyb3ApIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5idG5Ub0Nyb3Aub2ZmKCdjbGljaycsIG1ldGhvZHMuc3VibWl0Q3JvcEltYWdlLmJpbmQodGhpcykpO1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmJ0blRvQ3JvcC5vbignY2xpY2snLCBtZXRob2RzLnN1Ym1pdENyb3BJbWFnZS5iaW5kKHRoaXMpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3Aub2ZmKCdzdWJtaXQnLCBtZXRob2RzLnN1Ym1pdENyb3BJbWFnZS5iaW5kKHRoaXMpKTtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5vbignc3VibWl0JywgbWV0aG9kcy5zdWJtaXRDcm9wSW1hZ2UuYmluZCh0aGlzKSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZGVzdHJveSBwbHVnaW5cblx0XHQqL1xuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vIGRlc3Ryb3kgamNyb3Bcblx0XHRcdGlmKCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKSAhPT0gdW5kZWZpbmVkICl7XG5cdFx0XHRcdHRoaXMuamNyb3BfaW1nLmRlc3Ryb3koKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdW5kZWxlZ2F0ZSBldmVudHNcblx0XHRcdC8vIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcub2ZmKCd1cGxvYWQnKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcub2ZmKCdjb21wbGV0ZScpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5vZmYoJ3N1Ym1pdCcpO1xuXG5cdFx0XHQvLyByZW1vdmUgb2JqZWN0IHBsdWdpbiBpbiBkYXRhXG5cdFx0XHR0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogc2V0IGltYWdlXG5cdFx0KiBAcGFyYW0ge1N0cmluZ30gdXJsSW1hZ2Vcblx0XHQqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdFx0Ki9cblx0XHRzZXRJbWFnZTogZnVuY3Rpb24gKHVybEltYWdlLCBjYWxsYmFjaykge1xuXHRcdFx0dXJsSW1hZ2UgfHwgKHVybEltYWdlID0gdGhpcy5zZXR0aW5ncy5pbWdDcm9wLmF0dHIoJ3NyYycpKSB8fCAodXJsSW1hZ2UgPSAnJyk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYoICF0aGlzLnNldHRpbmdzLmltZ0Nyb3AgKSB7IHRocm93IFwiVGhlIGltZ0Nyb3AgZWxlbWVudCBoYXZlIG5vdCB3ZW50IGFzc2lnblwiOyB9XG4gICAgICAgICAgICB9Y2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6ICcrIGVyciArIFwiLlwiKTtcbiAgICAgICAgICAgIH1cblxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0Ly8gdmFsaWRhdGUgaWYgYWxyZWFkeSBvciBub3Qgd2FzIGNyZWF0ZWQgdGhlIGNyb3AgaW1hZ2Vcblx0XHRcdGlmKCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKSAhPT0gdW5kZWZpbmVkICl7XG5cdFx0XHRcdHRoaXMuamNyb3BfaW1nID0gdGhpcy5zZXR0aW5ncy5pbWdDcm9wLmRhdGEoJ0pjcm9wJyk7XG5cblx0XHRcdFx0Ly8gc2V0IGltYWdlIGNyb3Bcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuc2V0SW1hZ2UodXJsSW1hZ2UsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHZhciBkaW1JbWcgPSBbXTtcblx0XHRcdFx0XHQvLyBpbWFnZSBjcm9wIHNldHRpbmdzXG5cdFx0XHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nICYmIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyApIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IFt0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nXTtcblx0XHRcdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdFx0XHRkaW1JbWcgPSB0aGlzLmpjcm9wX2ltZy5nZXRCb3VuZHMoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwoX3RoaXMsIHtcblx0XHRcdFx0XHRcdGltZ1NldDogdXJsSW1hZ2UsXG5cdFx0XHRcdFx0XHRtaW5XaWR0aDogX3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0bWluSGVpZ2h0OiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0aW1nV2lkdGg6IGRpbUltZ1swXSxcblx0XHRcdFx0XHRcdGltZ0hlaWdodDogZGltSW1nWzFdXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBhZGQgdmFsdWVzIHRvIHRoZSBjcm9wIGZvcm1cblx0XHRcdFx0XHRfdGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNjcm9wX3R5cGUnKS52YWwoICd1cmwnICk7XG5cdFx0XHRcdFx0X3RoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV9uYW1lJykudmFsKCB1cmxJbWFnZSApO1xuXHRcdFx0XHRcdF90aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfdHlwZScpLnZhbCggdXJsSW1hZ2Uuc3BsaXQoJy4nKS5zbGljZSgtMSkgKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdH1lbHNlIHtcblxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmltZ0Nyb3AuYXR0cignc3JjJywgdXJsSW1hZ2UpO1xuXG5cdFx0XHRcdC8vIGNyZWF0ZSBjcm9wIHdoZXRoZXIgZG9lcyBub3QgZXhpc3Rcblx0XHRcdFx0bWV0aG9kcy5yZW5kZXJJbWFnZUNyb3AuY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHZhciBkaW1JbWcgPSBbXTtcblx0XHRcdFx0XHQvLyBzZXR0aW5ncyBpbWFnZSBjcm9wXG5cdFx0XHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nICYmIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyApIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IFt0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nXTtcblx0XHRcdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdFx0XHRkaW1JbWcgPSB0aGlzLmpjcm9wX2ltZy5nZXRCb3VuZHMoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwodGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiB1cmxJbWFnZSxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyxcblx0XHRcdFx0XHRcdG1pbkhlaWdodDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0aW1nV2lkdGg6IGRpbUltZ1swXSxcblx0XHRcdFx0XHRcdGltZ0hlaWdodDogZGltSW1nWzFdXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBBZGQgdmFsdWVzIHRvIHRoZSBjcm9wIGZvcm1cblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2Nyb3BfdHlwZScpLnZhbCggJ3VybCcgKTtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfbmFtZScpLnZhbCggdXJsSW1hZ2UgKTtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfdHlwZScpLnZhbCggdXJsSW1hZ2Uuc3BsaXQoJy4nKS5zbGljZSgtMSkgKTtcblxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBjYWxsIGNhbGxiYWNrXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBSZW5kZXIgRmluZVVwbG9hZGVyIHBsdWdpbiBmb3IgdXNlciBwcm9kdWN0IGltYWdlXG5cdFx0KiBAcGFyYW0ge0VsZW1lbnQgalF1ZXJ5fSAkdXBsb2FkZXJJbWdcblx0XHQqL1xuXHRcdHJlbmRlclVwbG9hZGVySW1nOiBmdW5jdGlvbiAoJHVwbG9hZGVySW1nKSB7XG5cblx0XHRcdGlmKCAhZXhpc3RVcGxvYWRlclBsdWdpbigpICkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjogVGhlIGltYWdlVXBsb2FkZXJDcm9wIGpRdWVyeSBsaWJyYXJ5IGRvIG5lZWQgb2YgdGhlIGZpbmUtdXBsb2FkZXIgalF1ZXJ5IGxpYnJhcnkuJyk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0JHVwbG9hZGVySW1nLmZpbmVVcGxvYWRlcih7XG5cdFx0XHRcdGRlYnVnOiBmYWxzZSxcblx0XHRcdFx0dGVtcGxhdGU6IHRoaXMuc2V0dGluZ3MudGVtcGxhdGVJbWdVcGxvYWRlcixcblx0XHRcdFx0cmVxdWVzdDogdGhpcy5zZXR0aW5ncy51cGxvYWRkaW5nLFxuXHRcdFx0XHR0aHVtYm5haWxzOiB7XG5cdFx0XHRcdFx0cGxhY2Vob2xkZXJzOiB7XG5cdFx0XHRcdFx0XHR3YWl0aW5nUGF0aDogJ2ltZy93YWl0aW5nLWdlbmVyaWMucG5nJyxcblx0XHRcdFx0XHRcdG5vdEF2YWlsYWJsZVBhdGg6ICdpbWcvbm90X2F2YWlsYWJsZS1nZW5lcmljLnBuZydcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGF1dG9VcGxvYWQ6IHRydWUsXG5cdFx0XHRcdG11bHRpcGxlOiBmYWxzZSxcblx0XHRcdFx0dmFsaWRhdGlvbjoge1xuXHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHQvLyBtaW5XaWR0aDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgfHwgZGVmYXVsdHMuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0Ly8gbWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcgfHwgZGVmYXVsdHMuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0XHRcdG1heFdpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5tYXhXaWR0aEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWF4V2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtYXhIZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1heEhlaWdodEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWF4SGVpZ2h0SW1nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRhbGxvd2VkRXh0ZW5zaW9uczogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcuYWxsb3dlZEV4dGVuc2lvbnMgfHwgZGVmYXVsdHMuY29uZmlnSW1nLmFsbG93ZWRFeHRlbnNpb25zLFxuXHRcdFx0XHRcdHNpemVMaW1pdDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcuc2l6ZUxpbWl0IHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5zaXplTGltaXQsXG5cdFx0XHRcdFx0c3RvcE9uRmlyc3RJbnZhbGlkRmlsZTogZmFsc2UsXG5cdFx0XHRcdFx0aXRlbUxpbWl0OiAwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNjYWxpbmc6IHtcblx0XHRcdFx0XHRzZW5kT3JpZ2luYWw6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLnNlbmRPcmlnaW5hbCB8fCBkZWZhdWx0cy5jb25maWdJbWcuc2VuZE9yaWdpbmFsLFxuXHRcdFx0XHRcdGRlZmF1bHRRdWFsaXR5OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5kZWZhdWx0UXVhbGl0eSB8fCBkZWZhdWx0cy5jb25maWdJbWcuZGVmYXVsdFF1YWxpdHlcblx0XHRcdFx0fSxcblx0XHRcdFx0Ly8gRXZlbnRzIGhhbmRsZXJzXG5cdFx0XHRcdGNhbGxiYWNrczoge1xuXHRcdFx0XHRcdG9uVXBsb2FkOiBtZXRob2RzLm9uTG9hZEltZy5iaW5kKHRoaXMpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRyYWdBbmREcm9wOiB7XG5cdFx0XHRcdFx0ZXh0cmFEcm9wem9uZXM6IHRoaXMuc2V0dGluZ3MuZXh0cmFEcm9wem9uZXNcblx0XHRcdFx0fSxcblx0XHRcdFx0c2hvd01lc3NhZ2U6IHRoaXMuc2V0dGluZ3Muc2hvd01lc3NhZ2UsXG5cdFx0XHRcdHNob3dDb25maXJtOiB0aGlzLnNldHRpbmdzLnNob3dDb25maXJtLFxuXHRcdFx0XHRzaG93UHJvbXB0OiB0aGlzLnNldHRpbmdzLnNob3dQcm9tcHRcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIHNldCBpbWFnZSBjcm9wIHBsdWdpblxuXHRcdCogQHBhcmFtIHtFbGVtZW50IGpRdWVyeX0gJGltZ0Nyb3Bcblx0XHQqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdFx0Ki9cblx0XHRyZW5kZXJJbWFnZUNyb3A6IGZ1bmN0aW9uICgkaW1nQ3JvcCwgY2FsbGJhY2spIHtcblxuXHRcdFx0aWYoICFleGlzdENyb3BQbHVnaW4oKSApIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6IFRoZSBpbWFnZVVwbG9hZGVyQ3JvcCBqUXVlcnkgbGlicmFyeSBuZWVkcyBvZiB0aGUgamNyb3AgalF1ZXJ5IGxpYnJhcnkuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHQvL2ltYWdlcyBjcm9wXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQkaW1nQ3JvcC5KY3JvcCh7XG5cdFx0XHRcdG9uU2VsZWN0OiBtZXRob2RzLnNldENvb3Jkcy5iaW5kKHRoaXMpLFxuXHRcdFx0XHRvbkNoYW5nZTogbWV0aG9kcy5zZXRDb29yZHMuYmluZCh0aGlzKSxcblx0XHRcdFx0b25SZWxlYXNlOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdC8vIG1pblNpemU6IFt0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nXSxcblx0XHRcdFx0Ly8gbWF4U2l6ZTogW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1heFdpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5tYXhIZWlnaHRJbWddLFxuXHRcdFx0XHRiZ0NvbG9yOiAnYmxhY2snLFxuXHRcdFx0XHRiZ09wYWNpdHk6IDAuNCxcblx0XHRcdFx0c2V0U2VsZWN0OiBbIDAsIDAsIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcgXSxcblx0XHRcdFx0YXNwZWN0UmF0aW86ICB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyAvIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0Ym94V2lkdGg6ICRpbWdDcm9wLnBhcmVudCgpLndpZHRoKCksXG5cdFx0XHRcdGJveEhlaWdodDogMCxcblx0XHRcdFx0YWxsb3dTZWxlY3Q6IGZhbHNlLFxuXHRcdFx0XHRhbGxvd1Jlc2l6ZTogdHJ1ZVxuXG5cdFx0XHR9LGZ1bmN0aW9uKCl7XG5cdFx0XHRcdF90aGlzLmpjcm9wX2ltZyA9IHRoaXM7XG5cblx0XHRcdFx0dmFyIGRpbURlZmF1bHQgPSBfdGhpcy5qY3JvcF9pbWcuZ2V0Qm91bmRzKCk7XG5cblx0XHRcdFx0bWV0aG9kcy5jaGFuZ2VPcHRzQ3JvcC5jYWxsKF90aGlzLCB7XG5cdFx0XHRcdFx0aW1nU2V0OiAkaW1nQ3JvcC5hdHRyKCdzcmMnKSxcblx0XHRcdFx0XHRtaW5XaWR0aDogX3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdG1pbkhlaWdodDogX3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0XHRpbWdXaWR0aDogZGltRGVmYXVsdFswXSxcblx0XHRcdFx0XHRpbWdIZWlnaHQ6IGRpbURlZmF1bHRbMV1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKXtcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIFNldCBzZWxlY3Qgb24gaW1hZ2UgY3JvcFxuXHRcdCogQHBhcmFtIE51bWJlciBpbWdXaWR0aFxuXHRcdCogQHBhcmFtIE51bWJlciBpbWdIZWlnaHRcblx0XHQqL1xuXHRcdGNoYW5nZU9wdHNDcm9wOiBmdW5jdGlvbiAob3B0aW9ucywgY2FsbGJhY2spIHtcblxuXHRcdFx0dmFyIHNldHRpbmdzID0ge1xuXHRcdFx0XHRpbWdTZXQ6ICcnLFxuXHRcdFx0XHRtaW5XaWR0aDogMCxcblx0XHRcdFx0bWluSGVpZ2h0OiAwLFxuXHRcdFx0XHRpbWdXaWR0aDogMCxcblx0XHRcdFx0aW1nSGVpZ2h0OiAwLFxuXHRcdFx0XHRkaW1TZWxlY3Q6IFswLDBdLFxuXHRcdFx0XHRpeDogMCxcblx0XHRcdFx0aXk6IDBcblx0XHRcdH07XG5cblx0XHRcdCQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcblxuXHRcdFx0Ly8gc2V0IHByb3BlcnRpZXNcblx0XHRcdHNldHRpbmdzLmRpbVNlbGVjdCA9IHNldFNxdWFyZShzZXR0aW5ncy5pbWdXaWR0aCwgc2V0dGluZ3MuaW1nSGVpZ2h0KTtcblx0XHRcdHNldHRpbmdzLml4ID0gKHNldHRpbmdzLmltZ1dpZHRoIC0gc2V0dGluZ3MuZGltU2VsZWN0WzBdKS8yO1xuXG5cdFx0XHQvLyByZWZyZXNoIG9wdGlvbnMgY3JvcFxuXHRcdFx0dGhpcy5qY3JvcF9pbWcuc2V0T3B0aW9ucyh7XG5cdFx0XHRcdHRydWVTaXplOiBbIE1hdGguZmxvb3Ioc2V0dGluZ3MuaW1nV2lkdGgpLCBNYXRoLmZsb29yKHNldHRpbmdzLmltZ0hlaWdodCkgXVxuXHRcdFx0XHQvLyBvdXRlckltYWdlOiBzZXR0aW5ncy5pbWdTZXRcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcuYXR0cignc3JjJywgc2V0dGluZ3MuaW1nU2V0KTtcblxuICAgICAgICAgICAgdGhpcy5qY3JvcF9pbWcuc2V0U2VsZWN0KCBbc2V0dGluZ3MuaXgsIHNldHRpbmdzLml5LCBzZXR0aW5ncy5kaW1TZWxlY3RbMF0sIHNldHRpbmdzLmRpbVNlbGVjdFsxXV0gKTtcblxuXHRcdFx0Ly9ydW4gY2FsbGJhY2tcblx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRjYWxsYmFjay5jYWxsKCk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogc3VibWl0IGV2ZW50IGZvciBpbWFnZSBjcm9wXG5cdFx0Ki9cblx0XHRzdWJtaXRDcm9wSW1hZ2U6IGZ1bmN0aW9uKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0dmFyIGRhdGEgPSBmb3JtVG9Kc29uKCB0aGlzLnNldHRpbmdzLmZvcm1Dcm9wICk7XG5cdFx0XHRkYXRhLnRhcmdfdyA9IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nO1xuXHRcdFx0ZGF0YS50YXJnX2ggPSB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWc7XG5cblx0XHRcdCQuZXh0ZW5kKGRhdGEsIHRoaXMuc2V0dGluZ3MuY3JvcHBpbmcucGFyYW1zKTtcblxuXHRcdFx0Ly8gZW1pdCBjYWxsYmFja1xuXHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wcGluZyddKSApXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BwaW5nJ10uY2FsbCh0aGlzLCB0aGlzLmpjcm9wX2ltZyk7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnOnN1Ym1pdCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXG5cdFx0XHQkLnBvc3QodGhpcy5zZXR0aW5ncy5jcm9wcGluZy5lbmRwb2ludCwgZGF0YSwgbWV0aG9kcy5vblN1Y2Nlc3NDcm9wLmJpbmQodGhpcykpXG5cdFx0XHQgLmZhaWwobWV0aG9kcy5vbkVycm9yQ3JvcC5iaW5kKHRoaXMpKTtcblx0XHR9LFxuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBldmVudHMgaGFuZGxlclxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tXG5cdFx0LyoqXG5cdFx0KiBoYW5kbGVyIGZvciBzZXQgdG8gY29vcmRzIG9mIGltYWdlIGNyb3Bcblx0XHQqIEBwYXJhbSBPYmplY3QgY29vcmRzXG5cdFx0Ki9cblx0XHRzZXRDb29yZHM6IGZ1bmN0aW9uIChjb29yZHMpe1xuXG5cdFx0XHR2YXIgcmF0aW9MZXNzZXIgPSB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcgLyB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZztcblx0XHRcdHZhciBkaW1JbWcgPSB0aGlzLmpjcm9wX2ltZyAhPT0gbnVsbCA/IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpIDogZmFsc2UsXG5cdFx0XHRcdHJ4ID0gJCh0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcucGFyZW50KClbMF0pLndpZHRoKCkgLyBjb29yZHMudyxcblx0XHRcdFx0cnkgPSAocmF0aW9MZXNzZXIgKiAkKHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5wYXJlbnQoKVswXSkud2lkdGgoKSkgLyBjb29yZHMuaDtcblxuXHRcdFx0Ly8gc2V0IGNvbnRlbnQgaGVpZ2h0IG9mIGNvbnRlbnQgcHJldmlld1xuICAgICAgICAgICAgaWYoIHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5hdHRyKCdzcmMnKSApIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5wYXJlbnQoKVswXSkuaGVpZ2h0KCByYXRpb0xlc3NlciAqICQodGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLnBhcmVudCgpWzBdKS53aWR0aCgpICk7XG4gICAgICAgICAgICB9XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQuY3JvcC14JykudmFsKCBjb29yZHMueCApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dC5jcm9wLXknKS52YWwoIGNvb3Jkcy55ICk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0LmNyb3AtdycpLnZhbCggY29vcmRzLncgKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQuY3JvcC1oJykudmFsKCBjb29yZHMuaCApO1xuXG5cdFx0XHQvLyBzZXQgcHJldmlldyBpbWFnZVxuXHRcdFx0aWYoIGRpbUltZyApe1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcuY3NzKHtcblx0XHRcdFx0XHR3aWR0aDogTWF0aC5yb3VuZChyeCAqIGRpbUltZ1swXSkgKyAncHgnLFxuXHRcdFx0XHRcdGhlaWdodDogTWF0aC5yb3VuZChyeSAqIGRpbUltZ1sxXSkgKyAncHgnLFxuXHRcdFx0XHRcdG1pbldpZHRoOiBNYXRoLnJvdW5kKHJ4ICogZGltSW1nWzBdKSArICdweCcsXG5cdFx0XHRcdFx0bWluSGVpZ2h0OiBNYXRoLnJvdW5kKHJ5ICogZGltSW1nWzFdKSArICdweCcsXG5cdFx0XHRcdFx0bWFyZ2luTGVmdDogJy0nICsgTWF0aC5yb3VuZChyeCAqIGNvb3Jkcy54KSArICdweCcsXG5cdFx0XHRcdFx0bWFyZ2luVG9wOiAnLScgKyBNYXRoLnJvdW5kKHJ5ICogY29vcmRzLnkpICsgJ3B4J1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiB3aWxsIHVwbG9hZCBpbWFnZVxuXHRcdCogQHBhcmFtIE51bWJlciBpZFxuXHRcdCogQHBhcmFtIFN0cmluZyBuYW1lXG5cdFx0Ki9cblx0XHRvbkxvYWRJbWc6IGZ1bmN0aW9uIChpZCwgbmFtZSkge1xuXG5cdFx0XHR2YXIgJGFyZWFEcm9wID0gdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5maW5lVXBsb2FkZXIoJ2dldERyb3BUYXJnZXQnLCBpZCk7XG5cblx0XHRcdC8vIHdoZW4gdGhlIGltYWdlIHdhcyBsb2FkZWQgd2l0aCBhIGRyb3Agem9uZVxuXHRcdFx0aWYoICRhcmVhRHJvcCAhPT0gdW5kZWZpbmVkICYmICRhcmVhRHJvcC5sZW5ndGggKXtcblx0XHRcdFx0aWYoICRhcmVhRHJvcC5oYXNDbGFzcygnaW1hZ2UtYXJlYS1kcm9wJykgfHwgJGFyZWFEcm9wLmhhc0NsYXNzKCd3cmFwcGVyLWltYWdlLWNyb3AnKSApe1xuXG5cdFx0XHRcdFx0bWV0aG9kcy5yZWFzc2lnbkFjdGlvbnMuY2FsbCh0aGlzKTtcblx0XHRcdFx0XHRtZXRob2RzLnNldEltYWdlLmNhbGwodGhpcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Mb2FkSW1nJ10pICkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Mb2FkSW1nJ10uY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLCBpZCwgbmFtZSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogY29tcGxldGUgZXZlbnQgZm9yIHVwbG9hZCBpbWFnZVxuXHRcdCogQHBhcmFtIE51bWJlciBpZFxuXHRcdCogQHBhcmFtIFN0cmluZyBuYW1lXG5cdFx0KiBAcGFyYW0gT2JqZWN0IHJlc1xuXHRcdCogQHBhcmFtIE9iamVjdCB4aHJcblx0XHQqL1xuXHRcdG9uQ29tcGxldGVMb2FkSW1nOiBmdW5jdGlvbiAoZXZlbnQsIGlkLCBuYW1lLCByZXMpIHtcblxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0aWYoICFyZXMuc3VjY2VzcyApXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0Ly8gc2V0dGluZ3MgaW1hZ2UgY3JvcFxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuc2V0SW1hZ2UocmVzLmZpbGVfcGF0aCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtyZXMuZmlsZV93aWR0aCwgcmVzLmZpbGVfaGVpZ2h0XTtcblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdFx0XHRpbWdTZXQ6IHJlcy5maWxlX3BhdGgsXG5cdFx0XHRcdFx0XHRtaW5XaWR0aDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtaW5IZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0XHRcdGltZ1dpZHRoOiByZXMuZmlsZV93aWR0aCxcblx0XHRcdFx0XHRcdGltZ0hlaWdodDogcmVzLmZpbGVfaGVpZ2h0XG5cblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBlbWl0IGNhbGxiYWNrXG5cdFx0XHRcdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNvbXBsZXRlTG9hZCddKSApXG5cdFx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNvbXBsZXRlTG9hZCddLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZywgaWQsIG5hbWUsIHJlcyk7XG5cdFx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXG5cdFx0XHR9ZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbWdDcm9wLmF0dHIoJ3NyYycsIHJlcy5maWxlX3BhdGgpO1xuXG5cdFx0XHRcdG1ldGhvZHMucmVuZGVySW1hZ2VDcm9wLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy5pbWdDcm9wLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwodGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiByZXMuZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0bWluV2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0bWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogcmVzLmZpbGVfd2lkdGgsXG5cdFx0XHRcdFx0XHRpbWdIZWlnaHQ6IHJlcy5maWxlX2hlaWdodFxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIGVtaXQgY2FsbGJhY2tcblx0XHRcdFx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ29tcGxldGVMb2FkJ10pICkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Db21wbGV0ZUxvYWQnXS5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcsIGlkLCBuYW1lLCByZXMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cblx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHZhbHVlcyB0byB0aGUgY3JvcCBmb3JtXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2Nyb3BfdHlwZScpLnZhbCggJ25hbWUnICk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfbmFtZScpLnZhbCggcmVzLmZpbGVfbmFtZSApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNmaWxlX3R5cGUnKS52YWwoIHJlcy5maWxlX3R5cGUgKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBzdWNjZXNzIGV2ZW50IGZvciBjcm9wIGltYWdlXG5cdFx0KiBAcGFyYW0gT2JqZWN0IHJlc1xuXHRcdCogQHBhcmFtIFN0cmluZyBzdGF0dXNcblx0XHQqIEBwYXJhbSBPYmplY3QganFYSFJcblx0XHQqL1xuXHRcdG9uU3VjY2Vzc0Nyb3A6IGZ1bmN0aW9uIChyZXNwLCBzdGF0dXMsIGpxWEhSKSB7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnOnN1Ym1pdCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG5cdFx0XHQvLyBjYWxsIGNyb3AgY29tcGxldGVcblx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ3JvcENvbXBsZXRlJ10pICkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wQ29tcGxldGUnXS5jYWxsKHRoaXMsIHRoaXMuamNyb3BfaW1nLCByZXNwLCBqcVhIUik7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZXJyb3IgZXZlbnQgZm9yIGNyb3AgaW1hZ2Vcblx0XHQqIEBwYXJhbSBPYmplY3QganFYSFJcblx0XHQqIEBwYXJhbSBTdHJpbmcgc3RhdHVzXG5cdFx0KiBAcGFyYW0gU3RyaW5nIGVycm9yXG5cdFx0Ki9cblx0XHRvbkVycm9yQ3JvcDogZnVuY3Rpb24oanFYSFIsIHN0YXR1cywgZXJyb3IpIHtcblxuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCc6c3VibWl0JykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cblx0XHRcdC8vIGNhbGwgY3JvcCBlcnJvclxuXHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wRXJyb3InXSkgKSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BFcnJvciddLmNhbGwodGhpcywgdGhpcy5qY3JvcF9pbWcsIGpxWEhSLCBlcnJvcik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vIHBsdWdpbiBjbGFzc1xuXHQvLyBpbnN0YW5jZSB0aGUgcGx1Z2luXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblx0JC5pbWFnZVVwbG9hZGVyQ3JvcCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG5cdFx0b3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuXHRcdC8vIHBhcmFtZXRlcnNcblx0XHR2YXIgcGx1Z2luID0gdGhpcztcblxuXHRcdC8vIHNldCBhdHRyaWJ1dGVzXG5cdFx0dGhpcy5qY3JvcF9pbWcgPSBudWxsO1xuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFx0dGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cblx0XHQvLyBpbml0aWFsaXplIHBsdWdpblxuXHRcdGlmKCAkLmlzRnVuY3Rpb24ocGx1Z2luLmluaXQpIClcblx0XHRcdHBsdWdpbi5pbml0KGVsZW1lbnQsIG9wdGlvbnMpO1xuXHR9O1xuXG5cdC8vIGV4dGVuZHMgcHJvdG90eXBlIG9mIHBsdWdpblxuXHQkLmltYWdlVXBsb2FkZXJDcm9wLnByb3RvdHlwZSA9IHtcblxuXHRcdC8vIHBsdWdpbidzIHNldHRpbmdzXG5cdFx0c2V0dGluZ3MgOiB7fSxcblxuXHRcdC8qKlxuXHRcdCogQ29uc3RydWN0b3IgbWV0aG9kXG5cdFx0Ki9cblx0XHRpbml0IDogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuXHRcdFx0Ly8gY2hlY2sgb3V0IGlmIGFscmVhZHkgd2FzIGFzc2lnbmVkIHRoZSBqY3JvcCBsaWJyYXJ5XG5cdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5pbWdDcm9wICYmIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMuamNyb3BfaW1nID0gdGhpcy5zZXR0aW5ncy5pbWdDcm9wLmRhdGEoJ0pjcm9wJyk7XG5cdFx0XHRcdHRoaXMuamNyb3BfaW1nLmRlc3Ryb3koKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5pdCBpbWFnZSB1cGxvYWRlciBhbmQgYWN0aW9uc1xuXHRcdFx0bWV0aG9kcy5yZWFzc2lnbkFjdGlvbnMuY2FsbCh0aGlzKTtcblx0XHRcdG1ldGhvZHMucmVuZGVyVXBsb2FkZXJJbWcuY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nKTtcblx0XHRcdG1ldGhvZHMucmVuZGVySW1hZ2VDcm9wLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy5pbWdDcm9wKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiAtLS0tLS0tLS0tLVxuXHRcdCogQXBpIG1ldGhvZHNcblx0XHQqIC0tLS0tLS0tLS0tXG5cdFx0Ki9cblxuXHRcdC8qKlxuXHRcdCogY2hhbmdlIEltYWdlXG5cdFx0KiBAcGFyYW0gU3RyaW5nIHVybEltYWdlXG5cdFx0KiBAcGFyYW0gRnVuY3Rpb24gY2FsbGJhY2tcblx0XHQqL1xuXHRcdGNoYW5nZUltYWdlIDogZnVuY3Rpb24odXJsSW1hZ2UsIGNhbGxiYWNrKSB7XG5cdFx0XHRtZXRob2RzLnJlYXNzaWduQWN0aW9ucy5jYWxsKHRoaXMpO1xuXHRcdFx0bWV0aG9kcy5zZXRJbWFnZS5jYWxsKHRoaXMsIHVybEltYWdlLCBjYWxsYmFjayk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZ2V0IGltYWdlIGNyb3AgZWxlbWVudFxuXHRcdCovXG5cdFx0Z2V0SW1nQ3JvcCA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLnNldHRpbmdzLmltZ0Nyb3A7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZ2V0IGZvcm0gY3JvcCBlbGVtZW50XG5cdFx0Ki9cblx0XHRnZXRGb3JtQ3JvcCA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLnNldHRpbmdzLmZvcm1Dcm9wO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGdldCB1cGxvYWRlciBpbWFnZSBlbGVtZW50XG5cdFx0Ki9cblx0XHRnZXRVcGxvYWRlckltZyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGdldCBpbWFnZSBwcmV2aWV3IGVsZW1lbnRcblx0XHQqL1xuXHRcdGdldFByZXZpZXdJbWcgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGRlc3Ryb3kgb2JqZWN0IHBsdWdpblxuXHRcdCovXG5cdFx0ZGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdG1ldGhvZHMuZGVzdHJveS5jYWxsKHRoaXMpO1xuXHRcdH1cblx0fTtcblxuXHQkLmZuLmltYWdlVXBsb2FkZXJDcm9wID0gZnVuY3Rpb24ob3B0c09yQ21kKSB7XG5cdFx0dmFyIHNlbGYgPSB0aGlzLCBzZWxmQXJncyA9IGFyZ3VtZW50cywgcmV0VmFscyA9IFtdO1xuXG5cdFx0aWYgKCAkKHRoaXMpLmRhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJykgIT09IHVuZGVmaW5lZCAmJiAkLmlzRnVuY3Rpb24oJCh0aGlzKS5kYXRhKCdpbWFnZVVwbG9hZGVyQ3JvcCcpW29wdHNPckNtZF0pICkge1xuXG5cdFx0XHR2YXIgcGx1ZyA9ICQodGhpcykuZGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKTtcblx0XHRcdHJldHVybiBwbHVnW29wdHNPckNtZF0uYXBwbHkocGx1Zywgc2xpY2UuY2FsbChzZWxmQXJncywgMSkpO1xuXG5cdFx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0c09yQ21kID09PSAnb2JqZWN0JyB8fCAhb3B0c09yQ21kKSB7XG5cblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsKSB7XG5cblx0XHRcdFx0dmFyIHBsdWdpbiA9IG5ldyAkLmltYWdlVXBsb2FkZXJDcm9wKHRoaXMsIG9wdHNPckNtZCk7XG5cblx0XHRcdFx0JCh0aGlzKS5kYXRhKCdpbWFnZVVwbG9hZGVyQ3JvcCcsIHBsdWdpbik7XG5cdFx0XHR9KTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkLmVycm9yKCAnTWV0aG9kIFwiJyArICBvcHRzT3JDbWQgKyAnXCIgZG9lcyBub3QgZXhpc3QgaW4gaW1hZ2VVcGxvYWRlckNyb3AgLSAoa3JvYmluZykgcGx1Z2luIScpO1xuXHRcdH1cblx0fTtcblxufSkpO1xuIl19
