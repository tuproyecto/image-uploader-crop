!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";function t(t){var e={},s=[];return s=i.prototype.isPrototypeOf(t)?t.serializeArray():i(t).serializeArray(),i.each(s,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}function e(i,t){var e=Math.min(i,t);return i==t?[i,t]:[e,e]}function s(){return!!{}.hasOwnProperty.call(i.fn,"fineUploader")}function n(){return!!{}.hasOwnProperty.call(i.fn,"Jcrop")}var o=Array.prototype.slice,g=(Array.prototype.splice,{formCrop:null,btnToCrop:null,imgCrop:null,previewImg:null,uploaderImg:null,templateImgUploader:"",configImg:{maxWidthImg:0,maxHeightImg:0,minWidthImg:0,minHeightImg:0,allowedExtensions:["jpeg","jpg","png"],sizeLimit:0,sendOriginal:!0,defaultQuality:100},uploadding:{inputName:"file",endpoint:"",params:{}},cropping:{endpoint:"",params:{}},extraDropzones:[i("#wrapper-image-crop")],callbacks:{onCropping:function(i){},onCropComplete:function(i,t,e){},onCropError:function(i,t,e){},onLoadImg:function(i,t,e){},onCompleteLoad:function(i,t,e,s){}},showMessage:function(i){return alertify.alert(i)},showConfirm:function(i){var t=new qq.Promise;return alertify.confirm(i,function(i){return i?t.success(i):t.failure()}),t},showPrompt:function(i,t){var e=new qq.Promise;return alertify.prompt(i,function(i,t){return i?e.success(t):e.failure(t)},t),e}}),r={reassignActions:function(){this.settings.uploaderImg.off("complete"),this.settings.uploaderImg.on("complete",r.onCompleteLoadImg.bind(this)),this.settings.btnToCrop?(this.settings.btnToCrop.off("click",r.submitCropImage.bind(this)),this.settings.btnToCrop.on("click",r.submitCropImage.bind(this))):(this.settings.formCrop.off("submit",r.submitCropImage.bind(this)),this.settings.formCrop.on("submit",r.submitCropImage.bind(this)))},destroy:function(){void 0!==this.settings.imgCrop.data("Jcrop")&&this.jcrop_img.destroy(),this.settings.uploaderImg.off("complete"),this.settings.formCrop.off("submit"),this.$element.removeData("imageUploaderCrop")},setImage:function(t,e){t||(t=this.settings.imgCrop.attr("src"))||(t="");try{if(!this.settings.imgCrop)throw"The imgCrop element have not went assign"}catch(i){console.error("Error: "+i+".")}var s=this;void 0!==this.settings.imgCrop.data("Jcrop")?(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.setImage(t,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),r.changeOptsCrop.call(s,{imgSet:t,minWidth:s.settings.configImg.minWidthImg,minHeight:s.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),s.settings.formCrop.find("input#crop_type").val("url"),s.settings.formCrop.find("input#file_name").val(t),s.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))})):(this.settings.imgCrop.attr("src",t),r.renderImageCrop.call(this,this.settings.imgCrop,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),r.changeOptsCrop.call(this,{imgSet:t,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),this.settings.formCrop.find("input#crop_type").val("url"),this.settings.formCrop.find("input#file_name").val(t),this.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))}.bind(this))),i.isFunction(e)&&e.call()},renderUploaderImg:function(i){if(!s())return console.error("Error: The imageUploaderCrop jQuery library do need of the fine-uploader jQuery library."),!1;i.fineUploader({debug:!1,template:this.settings.templateImgUploader,request:this.settings.uploadding,thumbnails:{placeholders:{waitingPath:"img/waiting-generic.png",notAvailablePath:"img/not_available-generic.png"}},autoUpload:!0,multiple:!1,validation:{image:{maxWidth:this.settings.configImg.maxWidthImg||g.configImg.maxWidthImg,maxHeight:this.settings.configImg.maxHeightImg||g.configImg.maxHeightImg},allowedExtensions:this.settings.configImg.allowedExtensions||g.configImg.allowedExtensions,sizeLimit:this.settings.configImg.sizeLimit||g.configImg.sizeLimit,stopOnFirstInvalidFile:!1,itemLimit:0},scaling:{sendOriginal:this.settings.configImg.sendOriginal||g.configImg.sendOriginal,defaultQuality:this.settings.configImg.defaultQuality||g.configImg.defaultQuality},callbacks:{onUpload:r.onLoadImg.bind(this)},dragAndDrop:{extraDropzones:this.settings.extraDropzones},showMessage:this.settings.showMessage,showConfirm:this.settings.showConfirm,showPrompt:this.settings.showPrompt})},renderImageCrop:function(i,t){if(!n())return console.error("Error: The imageUploaderCrop jQuery library do need of the jcrop jQuery library."),!1;var e=this;i.Jcrop({onSelect:r.setCoords.bind(this),onChange:r.setCoords.bind(this),onRelease:function(){},bgColor:"black",bgOpacity:.4,setSelect:[0,0,this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg],aspectRatio:this.settings.configImg.minWidthImg/this.settings.configImg.minHeightImg,boxWidth:i.parent().width(),boxHeight:0,allowSelect:!1,allowResize:!0},function(){e.jcrop_img=this;var s=e.jcrop_img.getBounds();r.changeOptsCrop.call(e,{imgSet:i.attr("src"),minWidth:e.settings.configImg.minWidthImg,minHeight:e.settings.configImg.minHeightImg,imgWidth:s[0],imgHeight:s[1]}),"function"==typeof t&&t.call()})},changeOptsCrop:function(t,s){var n={imgSet:"",minWidth:0,minHeight:0,imgWidth:0,imgHeight:0,dimSelect:[0,0],ix:0,iy:0};i.extend(n,t),n.dimSelect=e(n.imgWidth,n.imgHeight),n.ix=(n.imgWidth-n.dimSelect[0])/2,this.jcrop_img.setOptions({trueSize:[Math.floor(n.imgWidth),Math.floor(n.imgHeight)]}),this.jcrop_img.setSelect([n.ix,n.iy,n.dimSelect[0],n.dimSelect[1]]),this.settings.previewImg.attr("src",n.imgSet),"function"==typeof s&&s.call()},submitCropImage:function(e){e.preventDefault();var s=t(this.settings.formCrop);s.targ_w=this.settings.configImg.minWidthImg,s.targ_h=this.settings.configImg.minHeightImg,i.extend(s,this.settings.cropping.params),i.isFunction(this.settings.callbacks.onCropping)&&this.settings.callbacks.onCropping.call(this,this.jcrop_img),this.settings.formCrop.find(":submit").addClass("disabled"),i.post(this.settings.cropping.endpoint,s,r.onSuccessCrop.bind(this)).fail(r.onErrorCrop.bind(this))},setCoords:function(t){var e=this.settings.configImg.minHeightImg/this.settings.configImg.minWidthImg,s=null!==this.jcrop_img&&this.jcrop_img.getBounds(),n=i(this.settings.previewImg.parent()[0]).width()/t.w,o=e*i(this.settings.previewImg.parent()[0]).width()/t.h;this.settings.previewImg.attr("src")&&i(this.settings.previewImg.parent()[0]).height(e*i(this.settings.previewImg.parent()[0]).width()),this.settings.formCrop.find("input.crop-x").val(t.x),this.settings.formCrop.find("input.crop-y").val(t.y),this.settings.formCrop.find("input.crop-w").val(t.w),this.settings.formCrop.find("input.crop-h").val(t.h),s&&this.settings.previewImg.css({width:Math.round(n*s[0])+"px",height:Math.round(o*s[1])+"px",minWidth:Math.round(n*s[0])+"px",minHeight:Math.round(o*s[1])+"px",marginLeft:"-"+Math.round(n*t.x)+"px",marginTop:"-"+Math.round(o*t.y)+"px"})},onLoadImg:function(t,e){var s=this.settings.uploaderImg.fineUploader("getDropTarget",t);void 0!==s&&s.length&&(s.hasClass("image-area-drop")||s.hasClass("wrapper-image-crop"))&&(r.reassignActions.call(this),r.setImage.call(this)),i.isFunction(this.settings.callbacks.onLoadImg)&&this.settings.callbacks.onLoadImg.call(this,this.settings.uploaderImg,t,e)},onCompleteLoadImg:function(t,e,s,n){n.success&&(void 0!==this.settings.imgCrop.data("Jcrop")?this.jcrop_img.setImage(n.file_path,function(){n.file_width,n.file_height;r.changeOptsCrop.call(this,{imgSet:n.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:n.file_width,imgHeight:n.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,e,s,n)}.bind(this))}.bind(this)):(this.settings.imgCrop.attr("src",n.file_path),r.renderImageCrop.call(this,this.settings.imgCrop,function(){r.changeOptsCrop.call(this,{imgSet:n.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:n.file_width,imgHeight:n.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,e,s,n)}.bind(this))}.bind(this))),this.settings.formCrop.find("input#crop_type").val("name"),this.settings.formCrop.find("input#file_name").val(n.file_name),this.settings.formCrop.find("input#file_type").val(n.file_type))},onSuccessCrop:function(t,e,s){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropComplete)&&this.settings.callbacks.onCropComplete.call(this,this.jcrop_img,t,s)},onErrorCrop:function(t,e,s){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropError)&&this.settings.callbacks.onCropError.call(this,this.jcrop_img,t,s)}};i.imageUploaderCrop=function(t,e){e||(e={});var s=this;this.jcrop_img=null,this.element=t,this.$element=i(t),i.isFunction(s.init)&&s.init(t,e)},i.imageUploaderCrop.prototype={settings:{},init:function(t,e){this.settings=i.extend({},g,e),this.settings.imgCrop&&void 0!==this.settings.imgCrop.data("Jcrop")&&(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.destroy()),r.reassignActions.call(this),r.renderUploaderImg.call(this,this.settings.uploaderImg),r.renderImageCrop.call(this,this.settings.imgCrop)},changeImage:function(i,t){r.reassignActions.call(this),r.setImage.call(this,i,t)},getImgCrop:function(){return this.settings.imgCrop},getFormCrop:function(){return this.settings.formCrop},getUploaderImg:function(){return this.settings.uploaderImg},getPreviewImg:function(){return this.settings.previewImg},destroy:function(){r.destroy.call(this)}},i.fn.imageUploaderCrop=function(t){var e=arguments;if(void 0!==i(this).data("imageUploaderCrop")&&i.isFunction(i(this).data("imageUploaderCrop")[t])){var s=i(this).data("imageUploaderCrop");return s[t].apply(s,o.call(e,1))}if("object"==typeof t||!t)return this.each(function(e,s){var n=new i.imageUploaderCrop(this,t);i(this).data("imageUploaderCrop",n)});i.error('Method "'+t+'" does not exist in imageUploaderCrop - (krobing) plugin!')}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLXVwbG9hZGVyLWNyb3AuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiJCIsImZvcm1Ub0pzb24iLCJzZWxlY3RvciIsIm8iLCJhIiwicHJvdG90eXBlIiwiaXNQcm90b3R5cGVPZiIsInNlcmlhbGl6ZUFycmF5IiwiZWFjaCIsInVuZGVmaW5lZCIsInRoaXMiLCJuYW1lIiwicHVzaCIsInZhbHVlIiwic2V0U3F1YXJlIiwiaW1nV2lkdGgiLCJpbWdIZWlnaHQiLCJtaW5EaW0iLCJNYXRoIiwibWluIiwiZXhpc3RVcGxvYWRlclBsdWdpbiIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImZuIiwiZXhpc3RDcm9wUGx1Z2luIiwic2xpY2UiLCJBcnJheSIsImRlZmF1bHRzIiwic3BsaWNlIiwiZm9ybUNyb3AiLCJidG5Ub0Nyb3AiLCJpbWdDcm9wIiwicHJldmlld0ltZyIsInVwbG9hZGVySW1nIiwidGVtcGxhdGVJbWdVcGxvYWRlciIsImNvbmZpZ0ltZyIsIm1heFdpZHRoSW1nIiwibWF4SGVpZ2h0SW1nIiwibWluV2lkdGhJbWciLCJtaW5IZWlnaHRJbWciLCJhbGxvd2VkRXh0ZW5zaW9ucyIsInNpemVMaW1pdCIsInNlbmRPcmlnaW5hbCIsImRlZmF1bHRRdWFsaXR5IiwidXBsb2FkZGluZyIsImlucHV0TmFtZSIsImVuZHBvaW50IiwicGFyYW1zIiwiY3JvcHBpbmciLCJleHRyYURyb3B6b25lcyIsImNhbGxiYWNrcyIsIm9uQ3JvcHBpbmciLCJqY3JvcF9pbWciLCJvbkNyb3BDb21wbGV0ZSIsInJlc3AiLCJqcVhIUiIsIm9uQ3JvcEVycm9yIiwiZXJyb3IiLCJvbkxvYWRJbWciLCIkdXBsb2FkZXJJbWciLCJpZCIsIm9uQ29tcGxldGVMb2FkIiwicmVzIiwic2hvd01lc3NhZ2UiLCJtZXNzYWdlIiwiYWxlcnRpZnkiLCJhbGVydCIsInNob3dDb25maXJtIiwicHJvbWlzZSIsInFxIiwiUHJvbWlzZSIsImNvbmZpcm0iLCJyZXN1bHQiLCJzdWNjZXNzIiwiZmFpbHVyZSIsInNob3dQcm9tcHQiLCJkZWZhdWx0VmFsdWUiLCJwcm9tcHQiLCJpblN0ciIsIm1ldGhvZHMiLCJyZWFzc2lnbkFjdGlvbnMiLCJzZXR0aW5ncyIsIm9mZiIsIm9uIiwib25Db21wbGV0ZUxvYWRJbWciLCJiaW5kIiwic3VibWl0Q3JvcEltYWdlIiwiZGVzdHJveSIsImRhdGEiLCIkZWxlbWVudCIsInJlbW92ZURhdGEiLCJzZXRJbWFnZSIsInVybEltYWdlIiwiY2FsbGJhY2siLCJhdHRyIiwiZXJyIiwiY29uc29sZSIsIl90aGlzIiwiZGltSW1nIiwiZ2V0Qm91bmRzIiwiY2hhbmdlT3B0c0Nyb3AiLCJpbWdTZXQiLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsImZpbmQiLCJ2YWwiLCJzcGxpdCIsInJlbmRlckltYWdlQ3JvcCIsImlzRnVuY3Rpb24iLCJyZW5kZXJVcGxvYWRlckltZyIsImZpbmVVcGxvYWRlciIsImRlYnVnIiwidGVtcGxhdGUiLCJyZXF1ZXN0IiwidGh1bWJuYWlscyIsInBsYWNlaG9sZGVycyIsIndhaXRpbmdQYXRoIiwibm90QXZhaWxhYmxlUGF0aCIsImF1dG9VcGxvYWQiLCJtdWx0aXBsZSIsInZhbGlkYXRpb24iLCJpbWFnZSIsIm1heFdpZHRoIiwibWF4SGVpZ2h0Iiwic3RvcE9uRmlyc3RJbnZhbGlkRmlsZSIsIml0ZW1MaW1pdCIsInNjYWxpbmciLCJvblVwbG9hZCIsImRyYWdBbmREcm9wIiwiJGltZ0Nyb3AiLCJKY3JvcCIsIm9uU2VsZWN0Iiwic2V0Q29vcmRzIiwib25DaGFuZ2UiLCJvblJlbGVhc2UiLCJiZ0NvbG9yIiwiYmdPcGFjaXR5Iiwic2V0U2VsZWN0IiwiYXNwZWN0UmF0aW8iLCJib3hXaWR0aCIsInBhcmVudCIsIndpZHRoIiwiYm94SGVpZ2h0IiwiYWxsb3dTZWxlY3QiLCJhbGxvd1Jlc2l6ZSIsImRpbURlZmF1bHQiLCJvcHRpb25zIiwiZGltU2VsZWN0IiwiaXgiLCJpeSIsImV4dGVuZCIsInNldE9wdGlvbnMiLCJ0cnVlU2l6ZSIsImZsb29yIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ193IiwidGFyZ19oIiwiYWRkQ2xhc3MiLCJwb3N0Iiwib25TdWNjZXNzQ3JvcCIsImZhaWwiLCJvbkVycm9yQ3JvcCIsImNvb3JkcyIsInJhdGlvTGVzc2VyIiwicngiLCJ3IiwicnkiLCJoIiwiaGVpZ2h0IiwieCIsInkiLCJjc3MiLCJyb3VuZCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCIkYXJlYURyb3AiLCJsZW5ndGgiLCJoYXNDbGFzcyIsImV2ZW50IiwiZmlsZV9wYXRoIiwiZmlsZV93aWR0aCIsImZpbGVfaGVpZ2h0IiwiZmlsZV9uYW1lIiwiZmlsZV90eXBlIiwic3RhdHVzIiwicmVtb3ZlQ2xhc3MiLCJpbWFnZVVwbG9hZGVyQ3JvcCIsImVsZW1lbnQiLCJwbHVnaW4iLCJpbml0IiwiY2hhbmdlSW1hZ2UiLCJnZXRJbWdDcm9wIiwiZ2V0Rm9ybUNyb3AiLCJnZXRVcGxvYWRlckltZyIsImdldFByZXZpZXdJbWciLCJvcHRzT3JDbWQiLCJzZWxmQXJncyIsImFyZ3VtZW50cyIsInBsdWciLCJhcHBseSIsImluZGV4IiwiZWwiXSwibWFwcGluZ3MiOiJDQVVBLFNBQUFBLEdBQUEsYUFDQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFFQUQsUUFBQSxVQUFBRCxHQUNBLGlCQUFBRyxRQUFBQSxPQUFBQyxRQUVBRCxPQUFBQyxRQUFBSixFQUFBSyxRQUFBLFdBR0FMLEVBQUFNLFNBRUEsU0FBQUMsR0FBQSxhQTRFQSxTQUFBQyxFQUFBQyxHQUVBLElBQUFDLEtBQUFDLEtBcUJBLE9BbkJBQSxFQURBSixFQUFBSyxVQUFBQyxjQUFBSixHQUNBQSxFQUFBSyxpQkFHQVAsRUFBQUUsR0FBQUssaUJBR0FQLEVBQUFRLEtBQUFKLEVBQUEsZ0JBQ0FLLElBQUFOLEVBQUFPLEtBQUFDLE9BQ0FSLEVBQUFPLEtBQUFDLE1BQUFDLE9BQ0FU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QUVBcE0sRUFBQVUsTUFBQThFLEtBQUEsb0JBQUFxRyxLQUlBN0wsRUFBQXlELE1BQUEsV0FBQTJJLEVBQUEiLCJmaWxlIjoiaW1hZ2UtdXBsb2FkZXItY3JvcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbWFnZS11cGxvYWRlci1jcm9wIHYwLjEuMCBmb3IgalF1ZXJ5IHRoYXQgdXNlcyBmaW5lLXVwbG9hZGVyLCBqY3JvcFxuLy8gKGMpIDIwMTcsIE1JVCBsaWNlbnNlZC4gaHR0cDovL3R1cHJveWVjdG8uY29tXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRGVwZW5kZW5jaWVzOiBqUXVlcnksIGZpbmUtdXBsb2FkZXIsIGpjcm9wXG4vLyBBdXRob3I6IFR1UHJveWVjdG8uY29tXG4vLyBEZXZlbG9wZXI6IEBrcm9iaW5nXG4vLyBDcmVhdGVkOiAwNC8wMy8yMDE2XG4vLyBXZWJzaXRlOiBodHRwOi8vdHVwcm95ZWN0by5jb21cbi8vIERlc2NyaXB0aW9uOiBjcm9wcGVyIGFuZCB1cGxvYWRlciBvZiBpbWFnZXMgdGhhdCB1c2VzIGFub3RoZXIgbGlicmFyaWVzXG5cbiEoZnVuY3Rpb24gKGZhY3RvcnkpIHsgJ3VzZSBzdHJpY3QnXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0Ly8gTm9kZS9Db21tb25KU1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeShqUXVlcnkpO1xuXHR9XG59KGZ1bmN0aW9uICgkKSB7ICd1c2Ugc3RyaWN0Jztcblx0dmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOyAvLyBzYXZlIHJlZiB0byBvcmlnaW5hbCBzbGljZSgpXG5cdHZhciBzcGxpY2UgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlOyAvLyBzYXZlIHJlZiB0byBvcmlnaW5hbCBzbGljZSgpXG5cblx0Ly8gZGVmYXVsdCBvcHRpb25zXG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRmb3JtQ3JvcDogbnVsbCxcblx0XHRidG5Ub0Nyb3A6IG51bGwsXG5cdFx0aW1nQ3JvcDogbnVsbCxcblx0XHRwcmV2aWV3SW1nOiBudWxsLFxuXHRcdHVwbG9hZGVySW1nOiBudWxsLFxuXHRcdHRlbXBsYXRlSW1nVXBsb2FkZXI6ICcnLFxuXHRcdGNvbmZpZ0ltZzoge1xuXHRcdFx0bWF4V2lkdGhJbWcgOiAwLCAvLyA2NDYgKiAyXG5cdFx0XHRtYXhIZWlnaHRJbWcgOiAwLCAvLyAzNzQgKiAyXG5cdFx0XHRtaW5XaWR0aEltZyA6IDAsXG5cdFx0XHRtaW5IZWlnaHRJbWcgOiAwLFxuXHRcdFx0YWxsb3dlZEV4dGVuc2lvbnM6IFsnanBlZycsICdqcGcnLCAncG5nJ10sXG5cdFx0XHRzaXplTGltaXQ6IDAsIC8vIDUwIGtCID0gNTAgKiAxMDI0IGJ5dGVzLFxuXHRcdFx0c2VuZE9yaWdpbmFsOiB0cnVlLCAvLyBzZW5kIGltYWdlcyBvcmlnaW5hbCBpbiB0cnVlXG5cdFx0XHRkZWZhdWx0UXVhbGl0eTogMTAwIC8vIHF1YWxpdHkgb2YgdGhlIGltYWdlLCByYW5nZSggMSAtIDEwMCApXG5cdFx0fSxcblx0XHR1cGxvYWRkaW5nOiB7XG5cdFx0XHRpbnB1dE5hbWU6ICdmaWxlJyxcblx0XHRcdGVuZHBvaW50OiAnJyxcblx0XHRcdHBhcmFtczoge31cblx0XHR9LFxuXHRcdGNyb3BwaW5nOiB7XG5cdFx0XHRlbmRwb2ludDogJycsXG5cdFx0XHRwYXJhbXM6IHt9XG5cdFx0fSxcblx0XHRleHRyYURyb3B6b25lczogWyQoJyN3cmFwcGVyLWltYWdlLWNyb3AnKV0sXG5cdFx0Ly8gRXZlbnRzIGhhbmRsZXJzXG5cdFx0Y2FsbGJhY2tzOiB7XG5cdFx0XHRvbkNyb3BwaW5nOiBmdW5jdGlvbiAoamNyb3BfaW1nKSB7fSxcblx0XHRcdG9uQ3JvcENvbXBsZXRlOiBmdW5jdGlvbiAoamNyb3BfaW1nLCByZXNwLCBqcVhIUikge30sXG5cdFx0XHRvbkNyb3BFcnJvcjogZnVuY3Rpb24gKGpjcm9wX2ltZywganFYSFIsIGVycm9yKSB7fSxcblx0XHRcdG9uTG9hZEltZzogZnVuY3Rpb24gKCR1cGxvYWRlckltZywgaWQsIG5hbWUpIHt9LFxuXHRcdFx0b25Db21wbGV0ZUxvYWQ6IGZ1bmN0aW9uICgkdXBsb2FkZXJJbWcsIGlkLCBuYW1lLCByZXMpIHt9XG5cdFx0fSxcblx0XHRzaG93TWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0XHRcdHJldHVybiBhbGVydGlmeS5hbGVydChtZXNzYWdlKTtcblx0XHR9LFxuXHRcdHNob3dDb25maXJtOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgcXEuUHJvbWlzZSgpO1xuXHRcdFx0YWxlcnRpZnkuY29uZmlybShtZXNzYWdlLCBmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLnN1Y2Nlc3MocmVzdWx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5mYWlsdXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHByb21pc2U7XG5cdFx0fSxcblx0XHRzaG93UHJvbXB0OiBmdW5jdGlvbiAobWVzc2FnZSwgZGVmYXVsdFZhbHVlKSB7XG5cdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBxcS5Qcm9taXNlKCk7XG5cblx0XHRcdGFsZXJ0aWZ5LnByb21wdChtZXNzYWdlLCBmdW5jdGlvbihyZXN1bHQsIGluU3RyKSB7XG5cdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5zdWNjZXNzKGluU3RyKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5mYWlsdXJlKGluU3RyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgZGVmYXVsdFZhbHVlKTtcblx0XHRcdHJldHVybiBwcm9taXNlO1xuXHRcdH1cblx0fTtcblxuXHQvLyA9PT09PT09PT09PT09PVxuXHQvLyBoZWxwZXJzIG1ldGhvZFxuXHQvLyA9PT09PT09PT09PT09PVxuXHQvKipcblx0KiAgU2VyaWFsaXplIGZvcm0gaW50byBqc29uIGZvcm1hdFxuXHQqICBAcGFyYW0geyBzdHJpbmcgfSBuYW1lIGNsYXNzIG9yIGlkIG9mIHRoZSBodG1sIGVsZW1lbnQgdG8gZW1iZWQgdGhlIGxvYWRlclxuXHQqICBAcmV0dXJuIHsgb2JqZWN0IH0gZm9ybSBpbnRvIGpzb25cblx0Ki9cblx0ZnVuY3Rpb24gZm9ybVRvSnNvbiAoIHNlbGVjdG9yICl7XG5cblx0XHR2YXIgbyA9IHt9LCBhID0gW107XG5cdFx0aWYoICQucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc2VsZWN0b3IpICl7XG5cdFx0XHRhID0gc2VsZWN0b3Iuc2VyaWFsaXplQXJyYXkoKTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdGEgPSAkKHNlbGVjdG9yKS5zZXJpYWxpemVBcnJheSgpO1xuXHRcdH1cblxuXHRcdCQuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIG9bIHRoaXMubmFtZSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGlmICggISBvW3RoaXMubmFtZV0ucHVzaCApIHtcblx0XHRcdFx0XHRvWyB0aGlzLm5hbWUgXSA9IFsgb1sgdGhpcy5uYW1lIF0gXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG9bIHRoaXMubmFtZSBdLnB1c2goIHRoaXMudmFsdWUgfHwgJycgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b1sgdGhpcy5uYW1lIF0gPSB0aGlzLnZhbHVlIHx8ICcnO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHQvKipcblx0KiBTZXQgc2VsZWN0IG9uIGltYWdlIGNyb3Bcblx0KiBAcGFyYW0gTnVtYmVyIGltZ1dpZHRoXG5cdCogQHBhcmFtIE51bWJlciBpbWdIZWlnaHRcblx0Ki9cblx0ZnVuY3Rpb24gc2V0U3F1YXJlIChpbWdXaWR0aCwgaW1nSGVpZ2h0KSB7XG5cdFx0dmFyIG1pbkRpbSA9IE1hdGgubWluKGltZ1dpZHRoLCBpbWdIZWlnaHQpO1xuXG5cdFx0aWYoIGltZ1dpZHRoID09IGltZ0hlaWdodCApe1xuXHRcdFx0cmV0dXJuIFtpbWdXaWR0aCwgaW1nSGVpZ2h0XTtcblx0XHR9XG5cblx0XHRyZXR1cm4gW21pbkRpbSwgbWluRGltXTtcblx0fVxuXG5cdC8vIGNoZWNrIG91dCBpZiBleGl0cyBqUXVlcnkgcGx1Z2luIGZpbmV1cGxvYWRlclxuXHRmdW5jdGlvbiBleGlzdFVwbG9hZGVyUGx1Z2luICgpIHtcblxuXHRcdGlmKCAoe30pLmhhc093blByb3BlcnR5LmNhbGwoJC5mbiwgJ2ZpbmVVcGxvYWRlcicpICl7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0Ly8gY2hlY2sgb3V0IGlmIGV4aXRzIGpRdWVyeSBwbHVnaW4gamNyb3Bcblx0ZnVuY3Rpb24gZXhpc3RDcm9wUGx1Z2luICgpIHtcblxuXHRcdGlmKCAoe30pLmhhc093blByb3BlcnR5LmNhbGwoJC5mbiwgJ0pjcm9wJykgKXtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1lbHNlIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0KiBwcml2YXRlcyBtZXRob2RzXG5cdCovXG5cdHZhciBtZXRob2RzID0ge1xuXHRcdC8qKlxuXHRcdCogcmVhc3NpZ24gZXZlbnRzIGFuZCBhbm90aGVyIHRoaW5nc1xuXHRcdCovXG5cdFx0cmVhc3NpZ25BY3Rpb25zOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcub2ZmKCdjb21wbGV0ZScpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vbignY29tcGxldGUnLCBtZXRob2RzLm9uQ29tcGxldGVMb2FkSW1nLmJpbmQodGhpcykpO1xuXG5cdFx0XHQvLyBpZiB3YXMgZGVmaW5lZCBhIGJ1dHRvbiB0byBleGVjdXRlIGFjdGlvbiB0byBjcm9wXG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmJ0blRvQ3JvcCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmJ0blRvQ3JvcC5vZmYoJ2NsaWNrJywgbWV0aG9kcy5zdWJtaXRDcm9wSW1hZ2UuYmluZCh0aGlzKSk7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYnRuVG9Dcm9wLm9uKCdjbGljaycsIG1ldGhvZHMuc3VibWl0Q3JvcEltYWdlLmJpbmQodGhpcykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5vZmYoJ3N1Ym1pdCcsIG1ldGhvZHMuc3VibWl0Q3JvcEltYWdlLmJpbmQodGhpcykpO1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9uKCdzdWJtaXQnLCBtZXRob2RzLnN1Ym1pdENyb3BJbWFnZS5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBkZXN0cm95IHBsdWdpblxuXHRcdCovXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gZGVzdHJveSBqY3JvcFxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuZGVzdHJveSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB1bmRlbGVnYXRlIGV2ZW50c1xuXHRcdFx0Ly8gdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ3VwbG9hZCcpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ2NvbXBsZXRlJyk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9mZignc3VibWl0Jyk7XG5cblx0XHRcdC8vIHJlbW92ZSBvYmplY3QgcGx1Z2luIGluIGRhdGFcblx0XHRcdHRoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBzZXQgaW1hZ2Vcblx0XHQqIEBwYXJhbSB7U3RyaW5nfSB1cmxJbWFnZVxuXHRcdCogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0XHQqL1xuXHRcdHNldEltYWdlOiBmdW5jdGlvbiAodXJsSW1hZ2UsIGNhbGxiYWNrKSB7XG5cdFx0XHR1cmxJbWFnZSB8fCAodXJsSW1hZ2UgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuYXR0cignc3JjJykpIHx8ICh1cmxJbWFnZSA9ICcnKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiggIXRoaXMuc2V0dGluZ3MuaW1nQ3JvcCApIHsgdGhyb3cgXCJUaGUgaW1nQ3JvcCBlbGVtZW50IGhhdmUgbm90IHdlbnQgYXNzaWduXCI7IH1cbiAgICAgICAgICAgIH1jYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogJysgZXJyICsgXCIuXCIpO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQvLyB2YWxpZGF0ZSBpZiBhbHJlYWR5IG9yIG5vdCB3YXMgY3JlYXRlZCB0aGUgY3JvcCBpbWFnZVxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKTtcblxuXHRcdFx0XHQvLyBzZXQgaW1hZ2UgY3JvcFxuXHRcdFx0XHR0aGlzLmpjcm9wX2ltZy5zZXRJbWFnZSh1cmxJbWFnZSwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtdO1xuXHRcdFx0XHRcdC8vIGltYWdlIGNyb3Agc2V0dGluZ3Ncblx0XHRcdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgJiYgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nICkge1xuXHRcdFx0XHRcdFx0ZGltSW1nID0gW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWddO1xuXHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbChfdGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiB1cmxJbWFnZSxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtaW5IZWlnaHQ6IF90aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogZGltSW1nWzBdLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiBkaW1JbWdbMV1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIGFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0XHRcdF90aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2Nyb3BfdHlwZScpLnZhbCggJ3VybCcgKTtcblx0XHRcdFx0XHRfdGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNmaWxlX25hbWUnKS52YWwoIHVybEltYWdlICk7XG5cdFx0XHRcdFx0X3RoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCB1cmxJbWFnZS5zcGxpdCgnLicpLnNsaWNlKC0xKSApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fWVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5hdHRyKCdzcmMnLCB1cmxJbWFnZSk7XG5cblx0XHRcdFx0Ly8gY3JlYXRlIGNyb3Agd2hldGhlciBkb2VzIG5vdCBleGlzdFxuXHRcdFx0XHRtZXRob2RzLnJlbmRlckltYWdlQ3JvcC5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtdO1xuXHRcdFx0XHRcdC8vIHNldHRpbmdzIGltYWdlIGNyb3Bcblx0XHRcdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgJiYgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nICkge1xuXHRcdFx0XHRcdFx0ZGltSW1nID0gW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWddO1xuXHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdFx0XHRpbWdTZXQ6IHVybEltYWdlLFxuXHRcdFx0XHRcdFx0bWluV2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0bWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogZGltSW1nWzBdLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiBkaW1JbWdbMV1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIEFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjY3JvcF90eXBlJykudmFsKCAndXJsJyApO1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV9uYW1lJykudmFsKCB1cmxJbWFnZSApO1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCB1cmxJbWFnZS5zcGxpdCgnLicpLnNsaWNlKC0xKSApO1xuXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNhbGwgY2FsbGJhY2tcblx0XHRcdGlmKCAkLmlzRnVuY3Rpb24oY2FsbGJhY2spIClcblx0XHRcdFx0Y2FsbGJhY2suY2FsbCgpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIFJlbmRlciBGaW5lVXBsb2FkZXIgcGx1Z2luIGZvciB1c2VyIHByb2R1Y3QgaW1hZ2Vcblx0XHQqIEBwYXJhbSB7RWxlbWVudCBqUXVlcnl9ICR1cGxvYWRlckltZ1xuXHRcdCovXG5cdFx0cmVuZGVyVXBsb2FkZXJJbWc6IGZ1bmN0aW9uICgkdXBsb2FkZXJJbWcpIHtcblxuXHRcdFx0aWYoICFleGlzdFVwbG9hZGVyUGx1Z2luKCkgKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiBUaGUgaW1hZ2VVcGxvYWRlckNyb3AgalF1ZXJ5IGxpYnJhcnkgZG8gbmVlZCBvZiB0aGUgZmluZS11cGxvYWRlciBqUXVlcnkgbGlicmFyeS4nKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQkdXBsb2FkZXJJbWcuZmluZVVwbG9hZGVyKHtcblx0XHRcdFx0ZGVidWc6IGZhbHNlLFxuXHRcdFx0XHR0ZW1wbGF0ZTogdGhpcy5zZXR0aW5ncy50ZW1wbGF0ZUltZ1VwbG9hZGVyLFxuXHRcdFx0XHRyZXF1ZXN0OiB0aGlzLnNldHRpbmdzLnVwbG9hZGRpbmcsXG5cdFx0XHRcdHRodW1ibmFpbHM6IHtcblx0XHRcdFx0XHRwbGFjZWhvbGRlcnM6IHtcblx0XHRcdFx0XHRcdHdhaXRpbmdQYXRoOiAnaW1nL3dhaXRpbmctZ2VuZXJpYy5wbmcnLFxuXHRcdFx0XHRcdFx0bm90QXZhaWxhYmxlUGF0aDogJ2ltZy9ub3RfYXZhaWxhYmxlLWdlbmVyaWMucG5nJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0YXV0b1VwbG9hZDogdHJ1ZSxcblx0XHRcdFx0bXVsdGlwbGU6IGZhbHNlLFxuXHRcdFx0XHR2YWxpZGF0aW9uOiB7XG5cdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdC8vIG1pbldpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHQvLyBtaW5IZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0bWF4V2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1heFdpZHRoSW1nIHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5tYXhXaWR0aEltZyxcblx0XHRcdFx0XHRcdG1heEhlaWdodDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWF4SGVpZ2h0SW1nIHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5tYXhIZWlnaHRJbWdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFsbG93ZWRFeHRlbnNpb25zOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5hbGxvd2VkRXh0ZW5zaW9ucyB8fCBkZWZhdWx0cy5jb25maWdJbWcuYWxsb3dlZEV4dGVuc2lvbnMsXG5cdFx0XHRcdFx0c2l6ZUxpbWl0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5zaXplTGltaXQgfHwgZGVmYXVsdHMuY29uZmlnSW1nLnNpemVMaW1pdCxcblx0XHRcdFx0XHRzdG9wT25GaXJzdEludmFsaWRGaWxlOiBmYWxzZSxcblx0XHRcdFx0XHRpdGVtTGltaXQ6IDBcblx0XHRcdFx0fSxcblx0XHRcdFx0c2NhbGluZzoge1xuXHRcdFx0XHRcdHNlbmRPcmlnaW5hbDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcuc2VuZE9yaWdpbmFsIHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5zZW5kT3JpZ2luYWwsXG5cdFx0XHRcdFx0ZGVmYXVsdFF1YWxpdHk6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLmRlZmF1bHRRdWFsaXR5IHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5kZWZhdWx0UXVhbGl0eVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBFdmVudHMgaGFuZGxlcnNcblx0XHRcdFx0Y2FsbGJhY2tzOiB7XG5cdFx0XHRcdFx0b25VcGxvYWQ6IG1ldGhvZHMub25Mb2FkSW1nLmJpbmQodGhpcylcblx0XHRcdFx0fSxcblx0XHRcdFx0ZHJhZ0FuZERyb3A6IHtcblx0XHRcdFx0XHRleHRyYURyb3B6b25lczogdGhpcy5zZXR0aW5ncy5leHRyYURyb3B6b25lc1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaG93TWVzc2FnZTogdGhpcy5zZXR0aW5ncy5zaG93TWVzc2FnZSxcblx0XHRcdFx0c2hvd0NvbmZpcm06IHRoaXMuc2V0dGluZ3Muc2hvd0NvbmZpcm0sXG5cdFx0XHRcdHNob3dQcm9tcHQ6IHRoaXMuc2V0dGluZ3Muc2hvd1Byb21wdFxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogc2V0IGltYWdlIGNyb3AgcGx1Z2luXG5cdFx0KiBAcGFyYW0ge0VsZW1lbnQgalF1ZXJ5fSAkaW1nQ3JvcFxuXHRcdCogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0XHQqL1xuXHRcdHJlbmRlckltYWdlQ3JvcDogZnVuY3Rpb24gKCRpbWdDcm9wLCBjYWxsYmFjaykge1xuXG5cdFx0XHRpZiggIWV4aXN0Q3JvcFBsdWdpbigpICkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjogVGhlIGltYWdlVXBsb2FkZXJDcm9wIGpRdWVyeSBsaWJyYXJ5IGRvIG5lZWQgb2YgdGhlIGpjcm9wIGpRdWVyeSBsaWJyYXJ5LicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuXHRcdFx0Ly9pbWFnZXMgY3JvcFxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0JGltZ0Nyb3AuSmNyb3Aoe1xuXHRcdFx0XHRvblNlbGVjdDogbWV0aG9kcy5zZXRDb29yZHMuYmluZCh0aGlzKSxcblx0XHRcdFx0b25DaGFuZ2U6IG1ldGhvZHMuc2V0Q29vcmRzLmJpbmQodGhpcyksXG5cdFx0XHRcdG9uUmVsZWFzZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBtaW5TaXplOiBbdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZ10sXG5cdFx0XHRcdC8vIG1heFNpemU6IFt0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5tYXhXaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWF4SGVpZ2h0SW1nXSxcblx0XHRcdFx0YmdDb2xvcjogJ2JsYWNrJyxcblx0XHRcdFx0YmdPcGFjaXR5OiAwLjQsXG5cdFx0XHRcdHNldFNlbGVjdDogWyAwLCAwLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nIF0sXG5cdFx0XHRcdGFzcGVjdFJhdGlvOiAgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgLyB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdGJveFdpZHRoOiAkaW1nQ3JvcC5wYXJlbnQoKS53aWR0aCgpLFxuXHRcdFx0XHRib3hIZWlnaHQ6IDAsXG5cdFx0XHRcdGFsbG93U2VsZWN0OiBmYWxzZSxcblx0XHRcdFx0YWxsb3dSZXNpemU6IHRydWVcblxuXHRcdFx0fSxmdW5jdGlvbigpe1xuXHRcdFx0XHRfdGhpcy5qY3JvcF9pbWcgPSB0aGlzO1xuXG5cdFx0XHRcdHZhciBkaW1EZWZhdWx0ID0gX3RoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpO1xuXG5cdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbChfdGhpcywge1xuXHRcdFx0XHRcdGltZ1NldDogJGltZ0Nyb3AuYXR0cignc3JjJyksXG5cdFx0XHRcdFx0bWluV2lkdGg6IF90aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyxcblx0XHRcdFx0XHRtaW5IZWlnaHQ6IF90aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0aW1nV2lkdGg6IGRpbURlZmF1bHRbMF0sXG5cdFx0XHRcdFx0aW1nSGVpZ2h0OiBkaW1EZWZhdWx0WzFdXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyl7XG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBTZXQgc2VsZWN0IG9uIGltYWdlIGNyb3Bcblx0XHQqIEBwYXJhbSBOdW1iZXIgaW1nV2lkdGhcblx0XHQqIEBwYXJhbSBOdW1iZXIgaW1nSGVpZ2h0XG5cdFx0Ki9cblx0XHRjaGFuZ2VPcHRzQ3JvcDogZnVuY3Rpb24gKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG5cblx0XHRcdHZhciBzZXR0aW5ncyA9IHtcblx0XHRcdFx0aW1nU2V0OiAnJyxcblx0XHRcdFx0bWluV2lkdGg6IDAsXG5cdFx0XHRcdG1pbkhlaWdodDogMCxcblx0XHRcdFx0aW1nV2lkdGg6IDAsXG5cdFx0XHRcdGltZ0hlaWdodDogMCxcblx0XHRcdFx0ZGltU2VsZWN0OiBbMCwwXSxcblx0XHRcdFx0aXg6IDAsXG5cdFx0XHRcdGl5OiAwXG5cdFx0XHR9O1xuXG5cdFx0XHQkLmV4dGVuZChzZXR0aW5ncywgb3B0aW9ucyk7XG5cblx0XHRcdC8vIHNldCBwcm9wZXJ0aWVzXG5cdFx0XHRzZXR0aW5ncy5kaW1TZWxlY3QgPSBzZXRTcXVhcmUoc2V0dGluZ3MuaW1nV2lkdGgsIHNldHRpbmdzLmltZ0hlaWdodCk7XG5cdFx0XHRzZXR0aW5ncy5peCA9IChzZXR0aW5ncy5pbWdXaWR0aCAtIHNldHRpbmdzLmRpbVNlbGVjdFswXSkvMjtcblxuXHRcdFx0Ly8gcmVmcmVzaCBvcHRpb25zIGNyb3Bcblx0XHRcdHRoaXMuamNyb3BfaW1nLnNldE9wdGlvbnMoe1xuXHRcdFx0XHR0cnVlU2l6ZTogWyBNYXRoLmZsb29yKHNldHRpbmdzLmltZ1dpZHRoKSwgTWF0aC5mbG9vcihzZXR0aW5ncy5pbWdIZWlnaHQpIF1cblx0XHRcdFx0Ly8gb3V0ZXJJbWFnZTogc2V0dGluZ3MuaW1nU2V0XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5qY3JvcF9pbWcuc2V0U2VsZWN0KCBbc2V0dGluZ3MuaXgsIHNldHRpbmdzLml5LCBzZXR0aW5ncy5kaW1TZWxlY3RbMF0sIHNldHRpbmdzLmRpbVNlbGVjdFsxXV0gKTtcblxuXHRcdFx0dGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLmF0dHIoJ3NyYycsIHNldHRpbmdzLmltZ1NldCk7XG5cblx0XHRcdC8vcnVuIGNhbGxiYWNrXG5cdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y2FsbGJhY2suY2FsbCgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIHN1Ym1pdCBldmVudCBmb3IgaW1hZ2UgY3JvcFxuXHRcdCovXG5cdFx0c3VibWl0Q3JvcEltYWdlOiBmdW5jdGlvbihlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdHZhciBkYXRhID0gZm9ybVRvSnNvbiggdGhpcy5zZXR0aW5ncy5mb3JtQ3JvcCApO1xuXHRcdFx0ZGF0YS50YXJnX3cgPSB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZztcblx0XHRcdGRhdGEudGFyZ19oID0gdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nO1xuXG5cdFx0XHQkLmV4dGVuZChkYXRhLCB0aGlzLnNldHRpbmdzLmNyb3BwaW5nLnBhcmFtcyk7XG5cblx0XHRcdC8vIGVtaXQgY2FsbGJhY2tcblx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ3JvcHBpbmcnXSkgKVxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wcGluZyddLmNhbGwodGhpcywgdGhpcy5qY3JvcF9pbWcpO1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJzpzdWJtaXQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblxuXHRcdFx0JC5wb3N0KHRoaXMuc2V0dGluZ3MuY3JvcHBpbmcuZW5kcG9pbnQsIGRhdGEsIG1ldGhvZHMub25TdWNjZXNzQ3JvcC5iaW5kKHRoaXMpKVxuXHRcdFx0IC5mYWlsKG1ldGhvZHMub25FcnJvckNyb3AuYmluZCh0aGlzKSk7XG5cdFx0fSxcblxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gZXZlbnRzIGhhbmRsZXJcblx0XHQvLyAtLS0tLS0tLS0tLS0tLVxuXHRcdC8qKlxuXHRcdCogaGFuZGxlciBmb3Igc2V0IHRvIGNvb3JkcyBvZiBpbWFnZSBjcm9wXG5cdFx0KiBAcGFyYW0gT2JqZWN0IGNvb3Jkc1xuXHRcdCovXG5cdFx0c2V0Q29vcmRzOiBmdW5jdGlvbiAoY29vcmRzKXtcblxuXHRcdFx0dmFyIHJhdGlvTGVzc2VyID0gdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nIC8gdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWc7XG5cdFx0XHR2YXIgZGltSW1nID0gdGhpcy5qY3JvcF9pbWcgIT09IG51bGwgPyB0aGlzLmpjcm9wX2ltZy5nZXRCb3VuZHMoKSA6IGZhbHNlLFxuXHRcdFx0XHRyeCA9ICQodGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLnBhcmVudCgpWzBdKS53aWR0aCgpIC8gY29vcmRzLncsXG5cdFx0XHRcdHJ5ID0gKHJhdGlvTGVzc2VyICogJCh0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcucGFyZW50KClbMF0pLndpZHRoKCkpIC8gY29vcmRzLmg7XG5cblx0XHRcdC8vIHNldCBjb250ZW50IGhlaWdodCBvZiBjb250ZW50IHByZXZpZXdcbiAgICAgICAgICAgIGlmKCB0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcuYXR0cignc3JjJykgKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcucGFyZW50KClbMF0pLmhlaWdodCggcmF0aW9MZXNzZXIgKiAkKHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5wYXJlbnQoKVswXSkud2lkdGgoKSApO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0LmNyb3AteCcpLnZhbCggY29vcmRzLnggKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQuY3JvcC15JykudmFsKCBjb29yZHMueSApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dC5jcm9wLXcnKS52YWwoIGNvb3Jkcy53ICk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0LmNyb3AtaCcpLnZhbCggY29vcmRzLmggKTtcblxuXHRcdFx0Ly8gc2V0IHByZXZpZXcgaW1hZ2Vcblx0XHRcdGlmKCBkaW1JbWcgKXtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLmNzcyh7XG5cdFx0XHRcdFx0d2lkdGg6IE1hdGgucm91bmQocnggKiBkaW1JbWdbMF0pICsgJ3B4Jyxcblx0XHRcdFx0XHRoZWlnaHQ6IE1hdGgucm91bmQocnkgKiBkaW1JbWdbMV0pICsgJ3B4Jyxcblx0XHRcdFx0XHRtaW5XaWR0aDogTWF0aC5yb3VuZChyeCAqIGRpbUltZ1swXSkgKyAncHgnLFxuXHRcdFx0XHRcdG1pbkhlaWdodDogTWF0aC5yb3VuZChyeSAqIGRpbUltZ1sxXSkgKyAncHgnLFxuXHRcdFx0XHRcdG1hcmdpbkxlZnQ6ICctJyArIE1hdGgucm91bmQocnggKiBjb29yZHMueCkgKyAncHgnLFxuXHRcdFx0XHRcdG1hcmdpblRvcDogJy0nICsgTWF0aC5yb3VuZChyeSAqIGNvb3Jkcy55KSArICdweCdcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogd2lsbCB1cGxvYWQgaW1hZ2Vcblx0XHQqIEBwYXJhbSBOdW1iZXIgaWRcblx0XHQqIEBwYXJhbSBTdHJpbmcgbmFtZVxuXHRcdCovXG5cdFx0b25Mb2FkSW1nOiBmdW5jdGlvbiAoaWQsIG5hbWUpIHtcblxuXHRcdFx0dmFyICRhcmVhRHJvcCA9IHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcuZmluZVVwbG9hZGVyKCdnZXREcm9wVGFyZ2V0JywgaWQpO1xuXG5cdFx0XHQvLyB3aGVuIHRoZSBpbWFnZSB3YXMgbG9hZGVkIHdpdGggYSBkcm9wIHpvbmVcblx0XHRcdGlmKCAkYXJlYURyb3AgIT09IHVuZGVmaW5lZCAmJiAkYXJlYURyb3AubGVuZ3RoICl7XG5cdFx0XHRcdGlmKCAkYXJlYURyb3AuaGFzQ2xhc3MoJ2ltYWdlLWFyZWEtZHJvcCcpIHx8ICRhcmVhRHJvcC5oYXNDbGFzcygnd3JhcHBlci1pbWFnZS1jcm9wJykgKXtcblxuXHRcdFx0XHRcdG1ldGhvZHMucmVhc3NpZ25BY3Rpb25zLmNhbGwodGhpcyk7XG5cdFx0XHRcdFx0bWV0aG9kcy5zZXRJbWFnZS5jYWxsKHRoaXMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uTG9hZEltZyddKSApIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uTG9hZEltZyddLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZywgaWQsIG5hbWUpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGNvbXBsZXRlIGV2ZW50IGZvciB1cGxvYWQgaW1hZ2Vcblx0XHQqIEBwYXJhbSBOdW1iZXIgaWRcblx0XHQqIEBwYXJhbSBTdHJpbmcgbmFtZVxuXHRcdCogQHBhcmFtIE9iamVjdCByZXNcblx0XHQqIEBwYXJhbSBPYmplY3QgeGhyXG5cdFx0Ki9cblx0XHRvbkNvbXBsZXRlTG9hZEltZzogZnVuY3Rpb24gKGV2ZW50LCBpZCwgbmFtZSwgcmVzKSB7XG5cblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdGlmKCAhcmVzLnN1Y2Nlc3MgKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdC8vIHNldHRpbmdzIGltYWdlIGNyb3Bcblx0XHRcdGlmKCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHRoaXMuamNyb3BfaW1nLnNldEltYWdlKHJlcy5maWxlX3BhdGgsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHZhciBkaW1JbWcgPSBbcmVzLmZpbGVfd2lkdGgsIHJlcy5maWxlX2hlaWdodF07XG5cblx0XHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwodGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiByZXMuZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0bWluV2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0bWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogcmVzLmZpbGVfd2lkdGgsXG5cdFx0XHRcdFx0XHRpbWdIZWlnaHQ6IHJlcy5maWxlX2hlaWdodFxuXG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gZW1pdCBjYWxsYmFja1xuXHRcdFx0XHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Db21wbGV0ZUxvYWQnXSkgKVxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Db21wbGV0ZUxvYWQnXS5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcsIGlkLCBuYW1lLCByZXMpO1xuXHRcdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cblx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0fWVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5hdHRyKCdzcmMnLCByZXMuZmlsZV9wYXRoKTtcblxuXHRcdFx0XHRtZXRob2RzLnJlbmRlckltYWdlQ3JvcC5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0bWV0aG9kcy5jaGFuZ2VPcHRzQ3JvcC5jYWxsKHRoaXMsIHtcblx0XHRcdFx0XHRcdGltZ1NldDogcmVzLmZpbGVfcGF0aCxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyxcblx0XHRcdFx0XHRcdG1pbkhlaWdodDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0aW1nV2lkdGg6IHJlcy5maWxlX3dpZHRoLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiByZXMuZmlsZV9oZWlnaHRcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBlbWl0IGNhbGxiYWNrXG5cdFx0XHRcdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNvbXBsZXRlTG9hZCddKSApIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ29tcGxldGVMb2FkJ10uY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLCBpZCwgbmFtZSwgcmVzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNjcm9wX3R5cGUnKS52YWwoICduYW1lJyApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNmaWxlX25hbWUnKS52YWwoIHJlcy5maWxlX25hbWUgKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCByZXMuZmlsZV90eXBlICk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogc3VjY2VzcyBldmVudCBmb3IgY3JvcCBpbWFnZVxuXHRcdCogQHBhcmFtIE9iamVjdCByZXNcblx0XHQqIEBwYXJhbSBTdHJpbmcgc3RhdHVzXG5cdFx0KiBAcGFyYW0gT2JqZWN0IGpxWEhSXG5cdFx0Ki9cblx0XHRvblN1Y2Nlc3NDcm9wOiBmdW5jdGlvbiAocmVzcCwgc3RhdHVzLCBqcVhIUikge1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJzpzdWJtaXQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblxuXHRcdFx0Ly8gY2FsbCBjcm9wIGNvbXBsZXRlXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BDb21wbGV0ZSddKSApIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ3JvcENvbXBsZXRlJ10uY2FsbCh0aGlzLCB0aGlzLmpjcm9wX2ltZywgcmVzcCwganFYSFIpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGVycm9yIGV2ZW50IGZvciBjcm9wIGltYWdlXG5cdFx0KiBAcGFyYW0gT2JqZWN0IGpxWEhSXG5cdFx0KiBAcGFyYW0gU3RyaW5nIHN0YXR1c1xuXHRcdCogQHBhcmFtIFN0cmluZyBlcnJvclxuXHRcdCovXG5cdFx0b25FcnJvckNyb3A6IGZ1bmN0aW9uKGpxWEhSLCBzdGF0dXMsIGVycm9yKSB7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnOnN1Ym1pdCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG5cdFx0XHQvLyBjYWxsIGNyb3AgZXJyb3Jcblx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ3JvcEVycm9yJ10pICkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wRXJyb3InXS5jYWxsKHRoaXMsIHRoaXMuamNyb3BfaW1nLCBqcVhIUiwgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvLyBwbHVnaW4gY2xhc3Ncblx0Ly8gaW5zdGFuY2UgdGhlIHBsdWdpblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCQuaW1hZ2VVcGxvYWRlckNyb3AgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuXHRcdG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cblx0XHQvLyBwYXJhbWV0ZXJzXG5cdFx0dmFyIHBsdWdpbiA9IHRoaXM7XG5cblx0XHQvLyBzZXQgYXR0cmlidXRlc1xuXHRcdHRoaXMuamNyb3BfaW1nID0gbnVsbDtcblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXHRcdHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuXG5cdFx0Ly8gaW5pdGlhbGl6ZSBwbHVnaW5cblx0XHRpZiggJC5pc0Z1bmN0aW9uKHBsdWdpbi5pbml0KSApXG5cdFx0XHRwbHVnaW4uaW5pdChlbGVtZW50LCBvcHRpb25zKTtcblx0fTtcblxuXHQvLyBleHRlbmRzIHByb3RvdHlwZSBvZiBwbHVnaW5cblx0JC5pbWFnZVVwbG9hZGVyQ3JvcC5wcm90b3R5cGUgPSB7XG5cblx0XHQvLyBwbHVnaW4ncyBzZXR0aW5nc1xuXHRcdHNldHRpbmdzIDoge30sXG5cblx0XHQvKipcblx0XHQqIENvbnN0cnVjdG9yIG1ldGhvZFxuXHRcdCovXG5cdFx0aW5pdCA6IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcblxuXHRcdFx0dGhpcy5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0XHRcdC8vIGNoZWNrIG91dCBpZiBhbHJlYWR5IHdhcyBhc3NpZ25lZCB0aGUgamNyb3AgbGlicmFyeVxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcCAmJiB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHR0aGlzLmpjcm9wX2ltZyA9IHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpO1xuXHRcdFx0XHR0aGlzLmpjcm9wX2ltZy5kZXN0cm95KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEluaXQgaW1hZ2UgdXBsb2FkZXIgYW5kIGFjdGlvbnNcblx0XHRcdG1ldGhvZHMucmVhc3NpZ25BY3Rpb25zLmNhbGwodGhpcyk7XG5cdFx0XHRtZXRob2RzLnJlbmRlclVwbG9hZGVySW1nLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZyk7XG5cdFx0XHRtZXRob2RzLnJlbmRlckltYWdlQ3JvcC5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcCk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogLS0tLS0tLS0tLS1cblx0XHQqIEFwaSBtZXRob2RzXG5cdFx0KiAtLS0tLS0tLS0tLVxuXHRcdCovXG5cblx0XHQvKipcblx0XHQqIGNoYW5nZSBJbWFnZVxuXHRcdCogQHBhcmFtIFN0cmluZyB1cmxJbWFnZVxuXHRcdCogQHBhcmFtIEZ1bmN0aW9uIGNhbGxiYWNrXG5cdFx0Ki9cblx0XHRjaGFuZ2VJbWFnZSA6IGZ1bmN0aW9uKHVybEltYWdlLCBjYWxsYmFjaykge1xuXHRcdFx0bWV0aG9kcy5yZWFzc2lnbkFjdGlvbnMuY2FsbCh0aGlzKTtcblx0XHRcdG1ldGhvZHMuc2V0SW1hZ2UuY2FsbCh0aGlzLCB1cmxJbWFnZSwgY2FsbGJhY2spO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGdldCBpbWFnZSBjcm9wIGVsZW1lbnRcblx0XHQqL1xuXHRcdGdldEltZ0Nyb3AgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5pbWdDcm9wO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIGdldCBmb3JtIGNyb3AgZWxlbWVudFxuXHRcdCovXG5cdFx0Z2V0Rm9ybUNyb3AgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5mb3JtQ3JvcDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBnZXQgdXBsb2FkZXIgaW1hZ2UgZWxlbWVudFxuXHRcdCovXG5cdFx0Z2V0VXBsb2FkZXJJbWcgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZztcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBnZXQgaW1hZ2UgcHJldmlldyBlbGVtZW50XG5cdFx0Ki9cblx0XHRnZXRQcmV2aWV3SW1nIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MucHJldmlld0ltZztcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBkZXN0cm95IG9iamVjdCBwbHVnaW5cblx0XHQqL1xuXHRcdGRlc3Ryb3kgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRtZXRob2RzLmRlc3Ryb3kuY2FsbCh0aGlzKTtcblx0XHR9XG5cdH07XG5cblx0JC5mbi5pbWFnZVVwbG9hZGVyQ3JvcCA9IGZ1bmN0aW9uKG9wdHNPckNtZCkge1xuXHRcdHZhciBzZWxmID0gdGhpcywgc2VsZkFyZ3MgPSBhcmd1bWVudHMsIHJldFZhbHMgPSBbXTtcblxuXHRcdGlmICggJCh0aGlzKS5kYXRhKCdpbWFnZVVwbG9hZGVyQ3JvcCcpICE9PSB1bmRlZmluZWQgJiYgJC5pc0Z1bmN0aW9uKCQodGhpcykuZGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKVtvcHRzT3JDbWRdKSApIHtcblxuXHRcdFx0dmFyIHBsdWcgPSAkKHRoaXMpLmRhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJyk7XG5cdFx0XHRyZXR1cm4gcGx1Z1tvcHRzT3JDbWRdLmFwcGx5KHBsdWcsIHNsaWNlLmNhbGwoc2VsZkFyZ3MsIDEpKTtcblxuXHRcdH0gZWxzZSBpZiAodHlwZW9mIG9wdHNPckNtZCA9PT0gJ29iamVjdCcgfHwgIW9wdHNPckNtZCkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuXG5cdFx0XHRcdHZhciBwbHVnaW4gPSBuZXcgJC5pbWFnZVVwbG9hZGVyQ3JvcCh0aGlzLCBvcHRzT3JDbWQpO1xuXG5cdFx0XHRcdCQodGhpcykuZGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnLCBwbHVnaW4pO1xuXHRcdFx0fSk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0JC5lcnJvciggJ01ldGhvZCBcIicgKyAgb3B0c09yQ21kICsgJ1wiIGRvZXMgbm90IGV4aXN0IGluIGltYWdlVXBsb2FkZXJDcm9wIC0gKGtyb2JpbmcpIHBsdWdpbiEnKTtcblx0XHR9XG5cdH07XG5cbn0pKTtcbiJdfQ==
