!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";var t=Array.prototype.slice,e=(Array.prototype.splice,{formCrop:null,btnToCrop:null,imgCrop:null,previewImg:null,uploaderImg:null,templateImgUploader:"",configImg:{maxWidthImg:0,maxHeightImg:0,minWidthImg:0,minHeightImg:0,allowedExtensions:["jpeg","jpg","png"],sizeLimit:0,sendOriginal:!0,defaultQuality:100},uploadding:{inputName:"file",endpoint:"",params:{}},cropping:{endpoint:"",params:{}},extraDropzones:[i("#wrapper-image-crop")],callbacks:{onCropping:function(i){},onCropComplete:function(i,t,e){},onCropError:function(i,t,e){},onLoadImg:function(i,t,e){},onCompleteLoad:function(i,t,e,s){}},messages:{typeError:"{file} tiene una extensión inválida. Extensiones válidas {extensions}.",sizeError:"{file} es demasiado grande, el tamaño máximo de archivo es {sizeLimit}.",minSizeError:"{file} es demasiado pequeño, el tamaño mínimo de archivo es {minSizeLimit}.",emptyError:"{file} está vacío, por favor seleccione los archivos nuevamente sin él.",noFilesError:"No hay archivos para cargar",tooManyItemsError:"Demasiados articulos ({netItems}) sería cargado. Límite de artículo es {itemLimit}.",maxHeightImageError:"La imagen es muy alta.",maxWidthImageError:"La imagen es muy amplia.",minHeightImageError:"La imagen no es lo suficientemente alta",minWidthImageError:"La imagen no es lo suficientemente amplia",retryFailTooManyItems:"Error de reintentos - ha alcanzado el límite de su archivo.",onLeave:"Los archivos se cargan, si se va ahora, la carga se cancelará.",unsupportedBrowserIos8Safari:"Error irrecuperable: este navegador no permite la carga de archivos de ningún tipo debido a errores graves en iOS8 Safari. Utilice iOS8 Chrome hasta que Apple resuelva estos problemas."},showMessage:function(i){return alertify.alert(i)},showConfirm:function(i){var t=new qq.Promise;return alertify.confirm(i,function(i){return i?t.success(i):t.failure()}),t},showPrompt:function(i,t){var e=new qq.Promise;return alertify.prompt(i,function(i,t){return i?e.success(t):e.failure(t)},t),e}}),s={reassignActions:function(){this.settings.uploaderImg.off("complete"),this.settings.uploaderImg.on("complete",s.onCompleteLoadImg.bind(this)),this.settings.btnToCrop?(this.settings.btnToCrop.off("click",s.submitCropImage.bind(this)),this.settings.btnToCrop.on("click",s.submitCropImage.bind(this))):(this.settings.formCrop.off("submit",s.submitCropImage.bind(this)),this.settings.formCrop.on("submit",s.submitCropImage.bind(this)))},destroy:function(){void 0!==this.settings.imgCrop.data("Jcrop")&&this.jcrop_img.destroy(),this.settings.uploaderImg.off("complete"),this.settings.formCrop.off("submit"),this.$element.removeData("imageUploaderCrop")},setImage:function(t,e){t||(t=this.settings.imgCrop.attr("src"))||(t="");try{if(!this.settings.imgCrop)throw"The imgCrop element have not went assign"}catch(i){console.error("Error: "+i+".")}var n=this;void 0!==this.settings.imgCrop.data("Jcrop")?(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.setImage(t,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),s.changeOptsCrop.call(n,{imgSet:t,minWidth:n.settings.configImg.minWidthImg,minHeight:n.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),n.settings.formCrop.find("input#crop_type").val("url"),n.settings.formCrop.find("input#file_name").val(t),n.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))})):(this.settings.imgCrop.attr("src",t),s.renderImageCrop.call(this,this.settings.imgCrop,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),s.changeOptsCrop.call(this,{imgSet:t,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),this.settings.formCrop.find("input#crop_type").val("url"),this.settings.formCrop.find("input#file_name").val(t),this.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))}.bind(this))),i.isFunction(e)&&e.call()},renderUploaderImg:function(t){if(!{}.hasOwnProperty.call(i.fn,"fineUploader"))return console.error("Error: The imageUploaderCrop jQuery library do need of the fine-uploader jQuery library."),!1;t.fineUploader({debug:!1,template:this.settings.templateImgUploader,request:this.settings.uploadding,thumbnails:{placeholders:{waitingPath:"img/waiting-generic.png",notAvailablePath:"img/not_available-generic.png"}},autoUpload:!0,multiple:!1,validation:{image:{maxWidth:this.settings.configImg.maxWidthImg||e.configImg.maxWidthImg,maxHeight:this.settings.configImg.maxHeightImg||e.configImg.maxHeightImg},allowedExtensions:this.settings.configImg.allowedExtensions||e.configImg.allowedExtensions,sizeLimit:this.settings.configImg.sizeLimit||e.configImg.sizeLimit,stopOnFirstInvalidFile:!1,itemLimit:0},scaling:{sendOriginal:this.settings.configImg.sendOriginal||e.configImg.sendOriginal,defaultQuality:this.settings.configImg.defaultQuality||e.configImg.defaultQuality},callbacks:{onUpload:s.onLoadImg.bind(this)},messages:{typeError:e.messages.typeError,sizeError:e.messages.sizeError,minSizeError:e.messages.minSizeError,emptyError:e.messages.emptyError,noFilesError:e.messages.noFilesError,tooManyItemsError:e.messages.tooManyItemsError,maxHeightImageError:e.messages.maxHeightImageError,maxWidthImageError:e.messages.maxWidthImageError,minHeightImageError:e.messages.minHeightImageError,minWidthImageError:e.messages.minWidthImageError,retryFailTooManyItems:e.messages.retryFailTooManyItems,onLeave:e.messages.onLeave,unsupportedBrowserIos8Safari:e.messages.unsupportedBrowserIos8Safari},dragAndDrop:{extraDropzones:this.settings.extraDropzones},showMessage:this.settings.showMessage,showConfirm:this.settings.showConfirm,showPrompt:this.settings.showPrompt})},renderImageCrop:function(t,e){if(!{}.hasOwnProperty.call(i.fn,"Jcrop"))return console.error("Error: The imageUploaderCrop jQuery library needs of the jcrop jQuery library."),!1;var n=this;t.Jcrop({onSelect:s.setCoords.bind(this),onChange:s.setCoords.bind(this),onRelease:function(){},bgColor:"black",bgOpacity:.4,setSelect:[0,0,this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg],aspectRatio:this.settings.configImg.minWidthImg/this.settings.configImg.minHeightImg,boxWidth:t.parent().width(),boxHeight:0,allowSelect:!1,allowResize:!0},function(){n.jcrop_img=this;var i=n.jcrop_img.getBounds();s.changeOptsCrop.call(n,{imgSet:t.attr("src"),minWidth:n.settings.configImg.minWidthImg,minHeight:n.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),"function"==typeof e&&e.call()})},changeOptsCrop:function(t,e){var s={imgSet:"",minWidth:0,minHeight:0,imgWidth:0,imgHeight:0,dimSelect:[0,0],ix:0,iy:0};i.extend(s,t),s.dimSelect=function(i,t){var e=Math.min(i,t);return i==t?[i,t]:[e,e]}(s.imgWidth,s.imgHeight),s.ix=(s.imgWidth-s.dimSelect[0])/2,this.jcrop_img.setOptions({trueSize:[Math.floor(s.imgWidth),Math.floor(s.imgHeight)]}),this.settings.previewImg.attr("src",s.imgSet),this.jcrop_img.setSelect([s.ix,s.iy,s.dimSelect[0],s.dimSelect[1]]),"function"==typeof e&&e.call()},submitCropImage:function(t){t.preventDefault();var e=function(t){var e={},s=[];return s=i.prototype.isPrototypeOf(t)?t.serializeArray():i(t).serializeArray(),i.each(s,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}(this.settings.formCrop);e.targ_w=this.settings.configImg.minWidthImg,e.targ_h=this.settings.configImg.minHeightImg,i.extend(e,this.settings.cropping.params),i.isFunction(this.settings.callbacks.onCropping)&&this.settings.callbacks.onCropping.call(this,this.jcrop_img),this.settings.formCrop.find(":submit").addClass("disabled"),i.post(this.settings.cropping.endpoint,e,s.onSuccessCrop.bind(this)).fail(s.onErrorCrop.bind(this))},setCoords:function(t){var e=this.settings.configImg.minHeightImg/this.settings.configImg.minWidthImg,s=null!==this.jcrop_img&&this.jcrop_img.getBounds(),n=i(this.settings.previewImg.parent()[0]).width()/t.w,o=e*i(this.settings.previewImg.parent()[0]).width()/t.h;this.settings.previewImg.attr("src")&&i(this.settings.previewImg.parent()[0]).height(e*i(this.settings.previewImg.parent()[0]).width()),this.settings.formCrop.find("input.crop-x").val(t.x),this.settings.formCrop.find("input.crop-y").val(t.y),this.settings.formCrop.find("input.crop-w").val(t.w),this.settings.formCrop.find("input.crop-h").val(t.h),s&&this.settings.previewImg.css({width:Math.round(n*s[0])+"px",height:Math.round(o*s[1])+"px",minWidth:Math.round(n*s[0])+"px",minHeight:Math.round(o*s[1])+"px",marginLeft:"-"+Math.round(n*t.x)+"px",marginTop:"-"+Math.round(o*t.y)+"px"})},onLoadImg:function(t,e){var n=this.settings.uploaderImg.fineUploader("getDropTarget",t);void 0!==n&&n.length&&(n.hasClass("image-area-drop")||n.hasClass("wrapper-image-crop"))&&(s.reassignActions.call(this),s.setImage.call(this)),i.isFunction(this.settings.callbacks.onLoadImg)&&this.settings.callbacks.onLoadImg.call(this,this.settings.uploaderImg,t,e)},onCompleteLoadImg:function(t,e,n,o){o.success&&(void 0!==this.settings.imgCrop.data("Jcrop")?this.jcrop_img.setImage(o.file_path,function(){o.file_width,o.file_height;s.changeOptsCrop.call(this,{imgSet:o.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:o.file_width,imgHeight:o.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,e,n,o)}.bind(this))}.bind(this)):(this.settings.imgCrop.attr("src",o.file_path),s.renderImageCrop.call(this,this.settings.imgCrop,function(){s.changeOptsCrop.call(this,{imgSet:o.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:o.file_width,imgHeight:o.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,e,n,o)}.bind(this))}.bind(this))),this.settings.formCrop.find("input#crop_type").val("name"),this.settings.formCrop.find("input#file_name").val(o.file_name),this.settings.formCrop.find("input#file_type").val(o.file_type))},onSuccessCrop:function(t,e,s){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropComplete)&&this.settings.callbacks.onCropComplete.call(this,this.jcrop_img,t,s)},onErrorCrop:function(t,e,s){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropError)&&this.settings.callbacks.onCropError.call(this,this.jcrop_img,t,s)}};i.imageUploaderCrop=function(t,e){e||(e={});this.jcrop_img=null,this.element=t,this.$element=i(t),i.isFunction(this.init)&&this.init(t,e)},i.imageUploaderCrop.prototype={settings:{},init:function(t,n){this.settings=i.extend({},e,n),this.settings.imgCrop&&void 0!==this.settings.imgCrop.data("Jcrop")&&(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.destroy()),s.reassignActions.call(this),s.renderUploaderImg.call(this,this.settings.uploaderImg),s.renderImageCrop.call(this,this.settings.imgCrop)},changeImage:function(i,t){s.reassignActions.call(this),s.setImage.call(this,i,t)},getImgCrop:function(){return this.settings.imgCrop},getFormCrop:function(){return this.settings.formCrop},getUploaderImg:function(){return this.settings.uploaderImg},getPreviewImg:function(){return this.settings.previewImg},destroy:function(){s.destroy.call(this)}},i.fn.imageUploaderCrop=function(e){var s=arguments;if(void 0!==i(this).data("imageUploaderCrop")&&i.isFunction(i(this).data("imageUploaderCrop")[e])){var n=i(this).data("imageUploaderCrop");return n[e].apply(n,t.call(s,1))}if("object"==typeof e||!e)return this.each(function(t,s){var n=new i.imageUploaderCrop(this,e);i(this).data("imageUploaderCrop",n)});i.error('Method "'+e+'" does not exist in imageUploaderCrop - (krobing) plugin!')}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLXVwbG9hZGVyLWNyb3AuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiJCIsInNsaWNlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJkZWZhdWx0cyIsInNwbGljZSIsImZvcm1Dcm9wIiwiYnRuVG9Dcm9wIiwiaW1nQ3JvcCIsInByZXZpZXdJbWciLCJ1cGxvYWRlckltZyIsInRlbXBsYXRlSW1nVXBsb2FkZXIiLCJjb25maWdJbWciLCJtYXhXaWR0aEltZyIsIm1heEhlaWdodEltZyIsIm1pbldpZHRoSW1nIiwibWluSGVpZ2h0SW1nIiwiYWxsb3dlZEV4dGVuc2lvbnMiLCJzaXplTGltaXQiLCJzZW5kT3JpZ2luYWwiLCJkZWZhdWx0UXVhbGl0eSIsInVwbG9hZGRpbmciLCJpbnB1dE5hbWUiLCJlbmRwb2ludCIsInBhcmFtcyIsImNyb3BwaW5nIiwiZXh0cmFEcm9wem9uZXMiLCJjYWxsYmFja3MiLCJvbkNyb3BwaW5nIiwiamNyb3BfaW1nIiwib25Dcm9wQ29tcGxldGUiLCJyZXNwIiwianFYSFIiLCJvbkNyb3BFcnJvciIsImVycm9yIiwib25Mb2FkSW1nIiwiJHVwbG9hZGVySW1nIiwiaWQiLCJuYW1lIiwib25Db21wbGV0ZUxvYWQiLCJyZXMiLCJtZXNzYWdlcyIsInR5cGVFcnJvciIsInNpemVFcnJvciIsIm1pblNpemVFcnJvciIsImVtcHR5RXJyb3IiLCJub0ZpbGVzRXJyb3IiLCJ0b29NYW55SXRlbXNFcnJvciIsIm1heEhlaWdodEltYWdlRXJyb3IiLCJtYXhXaWR0aEltYWdlRXJyb3IiLCJtaW5IZWlnaHRJbWFnZUVycm9yIiwibWluV2lkdGhJbWFnZUVycm9yIiwicmV0cnlGYWlsVG9vTWFueUl0ZW1zIiwib25MZWF2ZSIsInVuc3VwcG9ydGVkQnJvd3NlcklvczhTYWZhcmkiLCJzaG93TWVzc2FnZSIsIm1lc3NhZ2UiLCJhbGVydGlmeSIsImFsZXJ0Iiwic2hvd0NvbmZpcm0iLCJwcm9taXNlIiwicXEiLCJQcm9taXNlIiwiY29uZmlybSIsInJlc3VsdCIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwic2hvd1Byb21wdCIsImRlZmF1bHRWYWx1ZSIsInByb21wdCIsImluU3RyIiwibWV0aG9kcyIsInJlYXNzaWduQWN0aW9ucyIsInRoaXMiLCJzZXR0aW5ncyIsIm9mZiIsIm9uIiwib25Db21wbGV0ZUxvYWRJbWciLCJiaW5kIiwic3VibWl0Q3JvcEltYWdlIiwiZGVzdHJveSIsInVuZGVmaW5lZCIsImRhdGEiLCIkZWxlbWVudCIsInJlbW92ZURhdGEiLCJzZXRJbWFnZSIsInVybEltYWdlIiwiY2FsbGJhY2siLCJhdHRyIiwiZXJyIiwiY29uc29sZSIsIl90aGlzIiwiZGltSW1nIiwiZ2V0Qm91bmRzIiwiY2hhbmdlT3B0c0Nyb3AiLCJjYWxsIiwiaW1nU2V0IiwibWluV2lkdGgiLCJtaW5IZWlnaHQiLCJpbWdXaWR0aCIsImltZ0hlaWdodCIsImZpbmQiLCJ2YWwiLCJzcGxpdCIsInJlbmRlckltYWdlQ3JvcCIsImlzRnVuY3Rpb24iLCJyZW5kZXJVcGxvYWRlckltZyIsImhhc093blByb3BlcnR5IiwiZm4iLCJmaW5lVXBsb2FkZXIiLCJkZWJ1ZyIsInRlbXBsYXRlIiwicmVxdWVzdCIsInRodW1ibmFpbHMiLCJwbGFjZWhvbGRlcnMiLCJ3YWl0aW5nUGF0aCIsIm5vdEF2YWlsYWJsZVBhdGgiLCJhdXRvVXBsb2FkIiwibXVsdGlwbGUiLCJ2YWxpZGF0aW9uIiwiaW1hZ2UiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsInN0b3BPbkZpcnN0SW52YWxpZEZpbGUiLCJpdGVtTGltaXQiLCJzY2FsaW5nIiwib25VcGxvYWQiLCJkcmFnQW5kRHJvcCIsIiRpbWdDcm9wIiwiSmNyb3AiLCJvblNlbGVjdCIsInNldENvb3JkcyIsIm9uQ2hhbmdlIiwib25SZWxlYXNlIiwiYmdDb2xvciIsImJnT3BhY2l0eSIsInNldFNlbGVjdCIsImFzcGVjdFJhdGlvIiwiYm94V2lkdGgiLCJwYXJlbnQiLCJ3aWR0aCIsImJveEhlaWdodCIsImFsbG93U2VsZWN0IiwiYWxsb3dSZXNpemUiLCJkaW1EZWZhdWx0Iiwib3B0aW9ucyIsImRpbVNlbGVjdCIsIml4IiwiaXkiLCJleHRlbmQiLCJtaW5EaW0iLCJNYXRoIiwibWluIiwic2V0U3F1YXJlIiwic2V0T3B0aW9ucyIsInRydWVTaXplIiwiZmxvb3IiLCJlIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3RvciIsIm8iLCJhIiwiaXNQcm90b3R5cGVPZiIsInNlcmlhbGl6ZUFycmF5IiwiZWFjaCIsInB1c2giLCJ2YWx1ZSIsImZvcm1Ub0pzb24iLCJ0YXJnX3ciLCJ0YXJnX2giLCJhZGRDbGFzcyIsInBvc3QiLCJvblN1Y2Nlc3NDcm9wIiwiZmFpbCIsIm9uRXJyb3JDcm9wIiwiY29vcmRzIiwicmF0aW9MZXNzZXIiLCJyeCIsInciLCJyeSIsImgiLCJoZWlnaHQiLCJ4IiwieSIsImNzcyIsInJvdW5kIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsIiRhcmVhRHJvcCIsImxlbmd0aCIsImhhc0NsYXNzIiwiZXZlbnQiLCJmaWxlX3BhdGgiLCJmaWxlX3dpZHRoIiwiZmlsZV9oZWlnaHQiLCJmaWxlX25hbWUiLCJmaWxlX3R5cGUiLCJzdGF0dXMiLCJyZW1vdmVDbGFzcyIsImltYWdlVXBsb2FkZXJDcm9wIiwiZWxlbWVudCIsImluaXQiLCJjaGFuZ2VJbWFnZSIsImdldEltZ0Nyb3AiLCJnZXRGb3JtQ3JvcCIsImdldFVwbG9hZGVySW1nIiwiZ2V0UHJldmlld0ltZyIsIm9wdHNPckNtZCIsInNlbGZBcmdzIiwiYXJndW1lbnRzIiwicGx1ZyIsImFwcGx5IiwiaW5kZXgiLCJlbCIsInBsdWdpbiJdLCJtYXBwaW5ncyI6IkNBVUEsU0FBQUEsR0FBQSxhQUNBLG1CQUFBQyxRQUFBQSxPQUFBQyxJQUVBRCxRQUFBLFVBQUFELEdBQ0EsaUJBQUFHLFFBQUFBLE9BQUFDLFFBRUFELE9BQUFDLFFBQUFKLEVBQUFLLFFBQUEs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QixNQUNBRixFQUFBYyxTQUFBVSxLQUFBdEIsS0FBQWEsRUFBQUMsSUFNQW9ILFdBQUEsV0FDQSxPQUFBbEksS0FBQUMsU0FBQWxFLFNBTUFvTSxZQUFBLFdBQ0EsT0FBQW5JLEtBQUFDLFNBQUFwRSxVQU1BdU0sZUFBQSxXQUNBLE9BQUFwSSxLQUFBQyxTQUFBaEUsYUFNQW9NLGNBQUEsV0FDQSxPQUFBckksS0FBQUMsU0FBQWpFLFlBTUF1RSxRQUFBLFdBQ0FULEVBQUFTLFFBQUFlLEtBQUF0QixRQUlBekUsRUFBQTRHLEdBQUEyRixrQkFBQSxTQUFBUSxHQUNBLElBQUFDLEVBQUFDLFVBRUEsUUFBQWhJLElBQUFqRixFQUFBeUUsTUFBQVMsS0FBQSxzQkFBQWxGLEVBQUF5RyxXQUFBekcsRUFBQXlFLE1BQUFTLEtBQUEscUJBQUE2SCxJQUFBLENBRUEsSUFBQUcsRUFBQWxOLEVBQUF5RSxNQUFBUyxLQUFBLHFCQUNBLE9BQUFnSSxFQUFBSCxHQUFBSSxNQUFBRCxFQUFBak4sRUFBQThGLEtBQUFpSCxFQUFBLElBRUEsR0FBQSxpQkFBQUQsSUFBQUEsRUFFQSxPQUFBdEksS0FBQTJGLEtBQUEsU0FBQWdELEVBQUFDLEdBRUEsSUFBQUMsRUFBQSxJQUFBdE4sRUFBQXVNLGtCQUFBOUgsS0FBQXNJLEdBRUEvTSxFQUFBeUUsTUFBQVMsS0FBQSxvQkFBQW9JLEtBSUF0TixFQUFBa0MsTUFBQSxXQUFBNkssRUFBQSIsImZpbGUiOiJpbWFnZS11cGxvYWRlci1jcm9wLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltYWdlLXVwbG9hZGVyLWNyb3AgdjAuMS4xIGZvciBqUXVlcnkgdGhhdCB1c2VzIGZpbmUtdXBsb2FkZXIsIGpjcm9wXG4vLyAoYykgMjAxNywgTUlUIGxpY2Vuc2VkLiBodHRwOi8vdHVwcm95ZWN0by5jb21cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEZXBlbmRlbmNpZXM6IGpRdWVyeSwgZmluZS11cGxvYWRlciwgamNyb3Bcbi8vIEF1dGhvcjogVHVQcm95ZWN0by5jb21cbi8vIERldmVsb3BlcjogQGtyb2Jpbmdcbi8vIENyZWF0ZWQ6IDA0LzAzLzIwMTZcbi8vIFdlYnNpdGU6IGh0dHA6Ly90dXByb3llY3RvLmNvbVxuLy8gRGVzY3JpcHRpb246IGNyb3BwZXIgYW5kIHVwbG9hZGVyIG9mIGltYWdlcyB0aGF0IHVzZXMgYW5vdGhlciBsaWJyYXJpZXNcblxuIShmdW5jdGlvbiAoZmFjdG9yeSkgeyAndXNlIHN0cmljdCdcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHQvLyBOb2RlL0NvbW1vbkpTXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcblx0fSBlbHNlIHtcblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KGpRdWVyeSk7XG5cdH1cbn0oZnVuY3Rpb24gKCQpIHsgJ3VzZSBzdHJpY3QnO1xuXHR2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7IC8vIHNhdmUgcmVmIHRvIG9yaWdpbmFsIHNsaWNlKClcblx0dmFyIHNwbGljZSA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2U7IC8vIHNhdmUgcmVmIHRvIG9yaWdpbmFsIHNsaWNlKClcblxuXHQvLyBkZWZhdWx0IG9wdGlvbnNcblx0dmFyIGRlZmF1bHRzID0ge1xuXHRcdGZvcm1Dcm9wOiBudWxsLFxuXHRcdGJ0blRvQ3JvcDogbnVsbCxcblx0XHRpbWdDcm9wOiBudWxsLFxuXHRcdHByZXZpZXdJbWc6IG51bGwsXG5cdFx0dXBsb2FkZXJJbWc6IG51bGwsXG5cdFx0dGVtcGxhdGVJbWdVcGxvYWRlcjogJycsXG5cdFx0Y29uZmlnSW1nOiB7XG5cdFx0XHRtYXhXaWR0aEltZyA6IDAsIC8vIDY0NiAqIDJcblx0XHRcdG1heEhlaWdodEltZyA6IDAsIC8vIDM3NCAqIDJcblx0XHRcdG1pbldpZHRoSW1nIDogMCxcblx0XHRcdG1pbkhlaWdodEltZyA6IDAsXG5cdFx0XHRhbGxvd2VkRXh0ZW5zaW9uczogWydqcGVnJywgJ2pwZycsICdwbmcnXSxcblx0XHRcdHNpemVMaW1pdDogMCwgLy8gNTAga0IgPSA1MCAqIDEwMjQgYnl0ZXMsXG5cdFx0XHRzZW5kT3JpZ2luYWw6IHRydWUsIC8vIHNlbmQgaW1hZ2VzIG9yaWdpbmFsIGluIHRydWVcblx0XHRcdGRlZmF1bHRRdWFsaXR5OiAxMDAgLy8gcXVhbGl0eSBvZiB0aGUgaW1hZ2UsIHJhbmdlKCAxIC0gMTAwIClcblx0XHR9LFxuXHRcdHVwbG9hZGRpbmc6IHtcblx0XHRcdGlucHV0TmFtZTogJ2ZpbGUnLFxuXHRcdFx0ZW5kcG9pbnQ6ICcnLFxuXHRcdFx0cGFyYW1zOiB7fVxuXHRcdH0sXG5cdFx0Y3JvcHBpbmc6IHtcblx0XHRcdGVuZHBvaW50OiAnJyxcblx0XHRcdHBhcmFtczoge31cblx0XHR9LFxuXHRcdGV4dHJhRHJvcHpvbmVzOiBbJCgnI3dyYXBwZXItaW1hZ2UtY3JvcCcpXSxcblx0XHQvLyBFdmVudHMgaGFuZGxlcnNcblx0XHRjYWxsYmFja3M6IHtcblx0XHRcdG9uQ3JvcHBpbmc6IGZ1bmN0aW9uIChqY3JvcF9pbWcpIHt9LFxuXHRcdFx0b25Dcm9wQ29tcGxldGU6IGZ1bmN0aW9uIChqY3JvcF9pbWcsIHJlc3AsIGpxWEhSKSB7fSxcblx0XHRcdG9uQ3JvcEVycm9yOiBmdW5jdGlvbiAoamNyb3BfaW1nLCBqcVhIUiwgZXJyb3IpIHt9LFxuXHRcdFx0b25Mb2FkSW1nOiBmdW5jdGlvbiAoJHVwbG9hZGVySW1nLCBpZCwgbmFtZSkge30sXG5cdFx0XHRvbkNvbXBsZXRlTG9hZDogZnVuY3Rpb24gKCR1cGxvYWRlckltZywgaWQsIG5hbWUsIHJlcykge31cblx0XHR9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgdHlwZUVycm9yOiAne2ZpbGV9IHRpZW5lIHVuYSBleHRlbnNpw7NuIGludsOhbGlkYS4gRXh0ZW5zaW9uZXMgdsOhbGlkYXMge2V4dGVuc2lvbnN9LicsXG4gICAgICAgICAgICBzaXplRXJyb3I6IFwie2ZpbGV9IGVzIGRlbWFzaWFkbyBncmFuZGUsIGVsIHRhbWHDsW8gbcOheGltbyBkZSBhcmNoaXZvIGVzIHtzaXplTGltaXR9LlwiLFxuICAgICAgICAgICAgbWluU2l6ZUVycm9yOiBcIntmaWxlfSBlcyBkZW1hc2lhZG8gcGVxdWXDsW8sIGVsIHRhbWHDsW8gbcOtbmltbyBkZSBhcmNoaXZvIGVzIHttaW5TaXplTGltaXR9LlwiLFxuICAgICAgICAgICAgZW1wdHlFcnJvcjogXCJ7ZmlsZX0gZXN0w6EgdmFjw61vLCBwb3IgZmF2b3Igc2VsZWNjaW9uZSBsb3MgYXJjaGl2b3MgbnVldmFtZW50ZSBzaW4gw6lsLlwiLFxuICAgICAgICAgICAgbm9GaWxlc0Vycm9yOiBcIk5vIGhheSBhcmNoaXZvcyBwYXJhIGNhcmdhclwiLFxuICAgICAgICAgICAgdG9vTWFueUl0ZW1zRXJyb3I6IFwiRGVtYXNpYWRvcyBhcnRpY3Vsb3MgKHtuZXRJdGVtc30pIHNlcsOtYSBjYXJnYWRvLiBMw61taXRlIGRlIGFydMOtY3VsbyBlcyB7aXRlbUxpbWl0fS5cIixcbiAgICAgICAgICAgIG1heEhlaWdodEltYWdlRXJyb3I6ICdMYSBpbWFnZW4gZXMgbXV5IGFsdGEuJyxcbiAgICAgICAgICAgIG1heFdpZHRoSW1hZ2VFcnJvcjogXCJMYSBpbWFnZW4gZXMgbXV5IGFtcGxpYS5cIixcbiAgICAgICAgICAgIG1pbkhlaWdodEltYWdlRXJyb3I6IFwiTGEgaW1hZ2VuIG5vIGVzIGxvIHN1ZmljaWVudGVtZW50ZSBhbHRhXCIsXG4gICAgICAgICAgICBtaW5XaWR0aEltYWdlRXJyb3I6IFwiTGEgaW1hZ2VuIG5vIGVzIGxvIHN1ZmljaWVudGVtZW50ZSBhbXBsaWFcIixcbiAgICAgICAgICAgIHJldHJ5RmFpbFRvb01hbnlJdGVtczogXCJFcnJvciBkZSByZWludGVudG9zIC0gaGEgYWxjYW56YWRvIGVsIGzDrW1pdGUgZGUgc3UgYXJjaGl2by5cIixcbiAgICAgICAgICAgIG9uTGVhdmU6IFwiTG9zIGFyY2hpdm9zIHNlIGNhcmdhbiwgc2kgc2UgdmEgYWhvcmEsIGxhIGNhcmdhIHNlIGNhbmNlbGFyw6EuXCIsXG4gICAgICAgICAgICB1bnN1cHBvcnRlZEJyb3dzZXJJb3M4U2FmYXJpOiBcIkVycm9yIGlycmVjdXBlcmFibGU6IGVzdGUgbmF2ZWdhZG9yIG5vIHBlcm1pdGUgbGEgY2FyZ2EgZGUgYXJjaGl2b3MgZGUgbmluZ8O6biB0aXBvIGRlYmlkbyBhIGVycm9yZXMgZ3JhdmVzIGVuIGlPUzggU2FmYXJpLiBVdGlsaWNlIGlPUzggQ2hyb21lIGhhc3RhIHF1ZSBBcHBsZSByZXN1ZWx2YSBlc3RvcyBwcm9ibGVtYXMuXCJcbiAgICAgICAgfSxcblx0XHRzaG93TWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0XHRcdHJldHVybiBhbGVydGlmeS5hbGVydChtZXNzYWdlKTtcblx0XHR9LFxuXHRcdHNob3dDb25maXJtOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgcXEuUHJvbWlzZSgpO1xuXHRcdFx0YWxlcnRpZnkuY29uZmlybShtZXNzYWdlLCBmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLnN1Y2Nlc3MocmVzdWx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5mYWlsdXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHByb21pc2U7XG5cdFx0fSxcblx0XHRzaG93UHJvbXB0OiBmdW5jdGlvbiAobWVzc2FnZSwgZGVmYXVsdFZhbHVlKSB7XG5cdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBxcS5Qcm9taXNlKCk7XG5cblx0XHRcdGFsZXJ0aWZ5LnByb21wdChtZXNzYWdlLCBmdW5jdGlvbihyZXN1bHQsIGluU3RyKSB7XG5cdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5zdWNjZXNzKGluU3RyKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5mYWlsdXJlKGluU3RyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgZGVmYXVsdFZhbHVlKTtcblx0XHRcdHJldHVybiBwcm9taXNlO1xuXHRcdH1cblx0fTtcblxuXHQvLyA9PT09PT09PT09PT09PVxuXHQvLyBoZWxwZXJzIG1ldGhvZFxuXHQvLyA9PT09PT09PT09PT09PVxuXHQvKipcblx0KiAgU2VyaWFsaXplIGZvcm0gaW50byBqc29uIGZvcm1hdFxuXHQqICBAcGFyYW0geyBzdHJpbmcgfSBuYW1lIGNsYXNzIG9yIGlkIG9mIHRoZSBodG1sIGVsZW1lbnQgdG8gZW1iZWQgdGhlIGxvYWRlclxuXHQqICBAcmV0dXJuIHsgb2JqZWN0IH0gZm9ybSBpbnRvIGpzb25cblx0Ki9cblx0ZnVuY3Rpb24gZm9ybVRvSnNvbiAoIHNlbGVjdG9yICl7XG5cblx0XHR2YXIgbyA9IHt9LCBhID0gW107XG5cdFx0aWYoICQucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc2VsZWN0b3IpICl7XG5cdFx0XHRhID0gc2VsZWN0b3Iuc2VyaWFsaXplQXJyYXkoKTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdGEgPSAkKHNlbGVjdG9yKS5zZXJpYWxpemVBcnJheSgpO1xuXHRcdH1cblxuXHRcdCQuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIG9bIHRoaXMubmFtZSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGlmICggISBvW3RoaXMubmFtZV0ucHVzaCApIHtcblx0XHRcdFx0XHRvWyB0aGlzLm5hbWUgXSA9IFsgb1sgdGhpcy5uYW1lIF0gXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG9bIHRoaXMubmFtZSBdLnB1c2goIHRoaXMudmFsdWUgfHwgJycgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b1sgdGhpcy5uYW1lIF0gPSB0aGlzLnZhbHVlIHx8ICcnO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHQvKipcblx0KiBTZXQgc2VsZWN0IG9uIGltYWdlIGNyb3Bcblx0KiBAcGFyYW0gTnVtYmVyIGltZ1dpZHRoXG5cdCogQHBhcmFtIE51bWJlciBpbWdIZWlnaHRcblx0Ki9cblx0ZnVuY3Rpb24gc2V0U3F1YXJlIChpbWdXaWR0aCwgaW1nSGVpZ2h0KSB7XG5cdFx0dmFyIG1pbkRpbSA9IE1hdGgubWluKGltZ1dpZHRoLCBpbWdIZWlnaHQpO1xuXG5cdFx0aWYoIGltZ1dpZHRoID09IGltZ0hlaWdodCApe1xuXHRcdFx0cmV0dXJuIFtpbWdXaWR0aCwgaW1nSGVpZ2h0XTtcblx0XHR9XG5cblx0XHRyZXR1cm4gW21pbkRpbSwgbWluRGltXTtcblx0fVxuXG5cdC8vIGNoZWNrIG91dCBpZiBleGl0cyBqUXVlcnkgcGx1Z2luIGZpbmV1cGxvYWRlclxuXHRmdW5jdGlvbiBleGlzdFVwbG9hZGVyUGx1Z2luICgpIHtcblxuXHRcdGlmKCAoe30pLmhhc093blByb3BlcnR5LmNhbGwoJC5mbiwgJ2ZpbmVVcGxvYWRlcicpICl7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0Ly8gY2hlY2sgb3V0IGlmIGV4aXRzIGpRdWVyeSBwbHVnaW4gamNyb3Bcblx0ZnVuY3Rpb24gZXhpc3RDcm9wUGx1Z2luICgpIHtcblxuXHRcdGlmKCAoe30pLmhhc093blByb3BlcnR5LmNhbGwoJC5mbiwgJ0pjcm9wJykgKXtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1lbHNlIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0KiBwcml2YXRlcyBtZXRob2RzXG5cdCovXG5cdHZhciBtZXRob2RzID0ge1xuXHRcdC8qKlxuXHRcdCogcmVhc3NpZ24gZXZlbnRzIGFuZCBhbm90aGVyIHRoaW5nc1xuXHRcdCovXG5cdFx0cmVhc3NpZ25BY3Rpb25zOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcub2ZmKCdjb21wbGV0ZScpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vbignY29tcGxldGUnLCBtZXRob2RzLm9uQ29tcGxldGVMb2FkSW1nLmJpbmQodGhpcykpO1xuXG5cdFx0XHQvLyBpZiB3YXMgZGVmaW5lZCBhIGJ1dHRvbiB0byBleGVjdXRlIGFjdGlvbiB0byBjcm9wXG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmJ0blRvQ3JvcCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmJ0blRvQ3JvcC5vZmYoJ2NsaWNrJywgbWV0aG9kcy5zdWJtaXRDcm9wSW1hZ2UuYmluZCh0aGlzKSk7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYnRuVG9Dcm9wLm9uKCdjbGljaycsIG1ldGhvZHMuc3VibWl0Q3JvcEltYWdlLmJpbmQodGhpcykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5vZmYoJ3N1Ym1pdCcsIG1ldGhvZHMuc3VibWl0Q3JvcEltYWdlLmJpbmQodGhpcykpO1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9uKCdzdWJtaXQnLCBtZXRob2RzLnN1Ym1pdENyb3BJbWFnZS5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBkZXN0cm95IHBsdWdpblxuXHRcdCovXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gZGVzdHJveSBqY3JvcFxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuZGVzdHJveSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB1bmRlbGVnYXRlIGV2ZW50c1xuXHRcdFx0Ly8gdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ3VwbG9hZCcpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ2NvbXBsZXRlJyk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9mZignc3VibWl0Jyk7XG5cblx0XHRcdC8vIHJlbW92ZSBvYmplY3QgcGx1Z2luIGluIGRhdGFcblx0XHRcdHRoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBzZXQgaW1hZ2Vcblx0XHQqIEBwYXJhbSB7U3RyaW5nfSB1cmxJbWFnZVxuXHRcdCogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0XHQqL1xuXHRcdHNldEltYWdlOiBmdW5jdGlvbiAodXJsSW1hZ2UsIGNhbGxiYWNrKSB7XG5cdFx0XHR1cmxJbWFnZSB8fCAodXJsSW1hZ2UgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuYXR0cignc3JjJykpIHx8ICh1cmxJbWFnZSA9ICcnKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiggIXRoaXMuc2V0dGluZ3MuaW1nQ3JvcCApIHsgdGhyb3cgXCJUaGUgaW1nQ3JvcCBlbGVtZW50IGhhdmUgbm90IHdlbnQgYXNzaWduXCI7IH1cbiAgICAgICAgICAgIH1jYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogJysgZXJyICsgXCIuXCIpO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQvLyB2YWxpZGF0ZSBpZiBhbHJlYWR5IG9yIG5vdCB3YXMgY3JlYXRlZCB0aGUgY3JvcCBpbWFnZVxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKTtcblxuXHRcdFx0XHQvLyBzZXQgaW1hZ2UgY3JvcFxuXHRcdFx0XHR0aGlzLmpjcm9wX2ltZy5zZXRJbWFnZSh1cmxJbWFnZSwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtdO1xuXHRcdFx0XHRcdC8vIGltYWdlIGNyb3Agc2V0dGluZ3Ncblx0XHRcdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgJiYgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nICkge1xuXHRcdFx0XHRcdFx0ZGltSW1nID0gW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWddO1xuXHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbChfdGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiB1cmxJbWFnZSxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtaW5IZWlnaHQ6IF90aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogZGltSW1nWzBdLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiBkaW1JbWdbMV1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIGFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0XHRcdF90aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2Nyb3BfdHlwZScpLnZhbCggJ3VybCcgKTtcblx0XHRcdFx0XHRfdGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNmaWxlX25hbWUnKS52YWwoIHVybEltYWdlICk7XG5cdFx0XHRcdFx0X3RoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCB1cmxJbWFnZS5zcGxpdCgnLicpLnNsaWNlKC0xKSApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fWVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5hdHRyKCdzcmMnLCB1cmxJbWFnZSk7XG5cblx0XHRcdFx0Ly8gY3JlYXRlIGNyb3Agd2hldGhlciBkb2VzIG5vdCBleGlzdFxuXHRcdFx0XHRtZXRob2RzLnJlbmRlckltYWdlQ3JvcC5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtdO1xuXHRcdFx0XHRcdC8vIHNldHRpbmdzIGltYWdlIGNyb3Bcblx0XHRcdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgJiYgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nICkge1xuXHRcdFx0XHRcdFx0ZGltSW1nID0gW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWddO1xuXHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdFx0XHRpbWdTZXQ6IHVybEltYWdlLFxuXHRcdFx0XHRcdFx0bWluV2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0bWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogZGltSW1nWzBdLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiBkaW1JbWdbMV1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIEFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjY3JvcF90eXBlJykudmFsKCAndXJsJyApO1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV9uYW1lJykudmFsKCB1cmxJbWFnZSApO1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCB1cmxJbWFnZS5zcGxpdCgnLicpLnNsaWNlKC0xKSApO1xuXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNhbGwgY2FsbGJhY2tcblx0XHRcdGlmKCAkLmlzRnVuY3Rpb24oY2FsbGJhY2spIClcblx0XHRcdFx0Y2FsbGJhY2suY2FsbCgpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIFJlbmRlciBGaW5lVXBsb2FkZXIgcGx1Z2luIGZvciB1c2VyIHByb2R1Y3QgaW1hZ2Vcblx0XHQqIEBwYXJhbSB7RWxlbWVudCBqUXVlcnl9ICR1cGxvYWRlckltZ1xuXHRcdCovXG5cdFx0cmVuZGVyVXBsb2FkZXJJbWc6IGZ1bmN0aW9uICgkdXBsb2FkZXJJbWcpIHtcblxuXHRcdFx0aWYoICFleGlzdFVwbG9hZGVyUGx1Z2luKCkgKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiBUaGUgaW1hZ2VVcGxvYWRlckNyb3AgalF1ZXJ5IGxpYnJhcnkgZG8gbmVlZCBvZiB0aGUgZmluZS11cGxvYWRlciBqUXVlcnkgbGlicmFyeS4nKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQkdXBsb2FkZXJJbWcuZmluZVVwbG9hZGVyKHtcblx0XHRcdFx0ZGVidWc6IGZhbHNlLFxuXHRcdFx0XHR0ZW1wbGF0ZTogdGhpcy5zZXR0aW5ncy50ZW1wbGF0ZUltZ1VwbG9hZGVyLFxuXHRcdFx0XHRyZXF1ZXN0OiB0aGlzLnNldHRpbmdzLnVwbG9hZGRpbmcsXG5cdFx0XHRcdHRodW1ibmFpbHM6IHtcblx0XHRcdFx0XHRwbGFjZWhvbGRlcnM6IHtcblx0XHRcdFx0XHRcdHdhaXRpbmdQYXRoOiAnaW1nL3dhaXRpbmctZ2VuZXJpYy5wbmcnLFxuXHRcdFx0XHRcdFx0bm90QXZhaWxhYmxlUGF0aDogJ2ltZy9ub3RfYXZhaWxhYmxlLWdlbmVyaWMucG5nJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0YXV0b1VwbG9hZDogdHJ1ZSxcblx0XHRcdFx0bXVsdGlwbGU6IGZhbHNlLFxuXHRcdFx0XHR2YWxpZGF0aW9uOiB7XG5cdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdC8vIG1pbldpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHQvLyBtaW5IZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0bWF4V2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1heFdpZHRoSW1nIHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5tYXhXaWR0aEltZyxcblx0XHRcdFx0XHRcdG1heEhlaWdodDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWF4SGVpZ2h0SW1nIHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5tYXhIZWlnaHRJbWdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFsbG93ZWRFeHRlbnNpb25zOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5hbGxvd2VkRXh0ZW5zaW9ucyB8fCBkZWZhdWx0cy5jb25maWdJbWcuYWxsb3dlZEV4dGVuc2lvbnMsXG5cdFx0XHRcdFx0c2l6ZUxpbWl0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5zaXplTGltaXQgfHwgZGVmYXVsdHMuY29uZmlnSW1nLnNpemVMaW1pdCxcblx0XHRcdFx0XHRzdG9wT25GaXJzdEludmFsaWRGaWxlOiBmYWxzZSxcblx0XHRcdFx0XHRpdGVtTGltaXQ6IDBcblx0XHRcdFx0fSxcblx0XHRcdFx0c2NhbGluZzoge1xuXHRcdFx0XHRcdHNlbmRPcmlnaW5hbDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcuc2VuZE9yaWdpbmFsIHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5zZW5kT3JpZ2luYWwsXG5cdFx0XHRcdFx0ZGVmYXVsdFF1YWxpdHk6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLmRlZmF1bHRRdWFsaXR5IHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5kZWZhdWx0UXVhbGl0eVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBFdmVudHMgaGFuZGxlcnNcblx0XHRcdFx0Y2FsbGJhY2tzOiB7XG5cdFx0XHRcdFx0b25VcGxvYWQ6IG1ldGhvZHMub25Mb2FkSW1nLmJpbmQodGhpcylcblx0XHRcdFx0fSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlRXJyb3I6IGRlZmF1bHRzLm1lc3NhZ2VzLnR5cGVFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgc2l6ZUVycm9yOiBkZWZhdWx0cy5tZXNzYWdlcy5zaXplRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG1pblNpemVFcnJvcjogZGVmYXVsdHMubWVzc2FnZXMubWluU2l6ZUVycm9yLFxuICAgICAgICAgICAgICAgICAgICBlbXB0eUVycm9yOiBkZWZhdWx0cy5tZXNzYWdlcy5lbXB0eUVycm9yLFxuICAgICAgICAgICAgICAgICAgICBub0ZpbGVzRXJyb3I6IGRlZmF1bHRzLm1lc3NhZ2VzLm5vRmlsZXNFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgdG9vTWFueUl0ZW1zRXJyb3I6IGRlZmF1bHRzLm1lc3NhZ2VzLnRvb01hbnlJdGVtc0Vycm9yLFxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHRJbWFnZUVycm9yOiBkZWZhdWx0cy5tZXNzYWdlcy5tYXhIZWlnaHRJbWFnZUVycm9yLFxuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aEltYWdlRXJyb3I6IGRlZmF1bHRzLm1lc3NhZ2VzLm1heFdpZHRoSW1hZ2VFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0SW1hZ2VFcnJvcjogZGVmYXVsdHMubWVzc2FnZXMubWluSGVpZ2h0SW1hZ2VFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGhJbWFnZUVycm9yOiBkZWZhdWx0cy5tZXNzYWdlcy5taW5XaWR0aEltYWdlRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHJldHJ5RmFpbFRvb01hbnlJdGVtczogZGVmYXVsdHMubWVzc2FnZXMucmV0cnlGYWlsVG9vTWFueUl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICBvbkxlYXZlOiBkZWZhdWx0cy5tZXNzYWdlcy5vbkxlYXZlLFxuICAgICAgICAgICAgICAgICAgICB1bnN1cHBvcnRlZEJyb3dzZXJJb3M4U2FmYXJpOiBkZWZhdWx0cy5tZXNzYWdlcy51bnN1cHBvcnRlZEJyb3dzZXJJb3M4U2FmYXJpXG4gICAgICAgICAgICAgICAgfSxcblx0XHRcdFx0ZHJhZ0FuZERyb3A6IHtcblx0XHRcdFx0XHRleHRyYURyb3B6b25lczogdGhpcy5zZXR0aW5ncy5leHRyYURyb3B6b25lc1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaG93TWVzc2FnZTogdGhpcy5zZXR0aW5ncy5zaG93TWVzc2FnZSxcblx0XHRcdFx0c2hvd0NvbmZpcm06IHRoaXMuc2V0dGluZ3Muc2hvd0NvbmZpcm0sXG5cdFx0XHRcdHNob3dQcm9tcHQ6IHRoaXMuc2V0dGluZ3Muc2hvd1Byb21wdFxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogc2V0IGltYWdlIGNyb3AgcGx1Z2luXG5cdFx0KiBAcGFyYW0ge0VsZW1lbnQgalF1ZXJ5fSAkaW1nQ3JvcFxuXHRcdCogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0XHQqL1xuXHRcdHJlbmRlckltYWdlQ3JvcDogZnVuY3Rpb24gKCRpbWdDcm9wLCBjYWxsYmFjaykge1xuXG5cdFx0XHRpZiggIWV4aXN0Q3JvcFBsdWdpbigpICkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvcjogVGhlIGltYWdlVXBsb2FkZXJDcm9wIGpRdWVyeSBsaWJyYXJ5IG5lZWRzIG9mIHRoZSBqY3JvcCBqUXVlcnkgbGlicmFyeS4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cblx0XHRcdC8vaW1hZ2VzIGNyb3Bcblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdCRpbWdDcm9wLkpjcm9wKHtcblx0XHRcdFx0b25TZWxlY3Q6IG1ldGhvZHMuc2V0Q29vcmRzLmJpbmQodGhpcyksXG5cdFx0XHRcdG9uQ2hhbmdlOiBtZXRob2RzLnNldENvb3Jkcy5iaW5kKHRoaXMpLFxuXHRcdFx0XHRvblJlbGVhc2U6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0fSxcblx0XHRcdFx0Ly8gbWluU2l6ZTogW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWddLFxuXHRcdFx0XHQvLyBtYXhTaXplOiBbdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWF4V2lkdGhJbWcsIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1heEhlaWdodEltZ10sXG5cdFx0XHRcdGJnQ29sb3I6ICdibGFjaycsXG5cdFx0XHRcdGJnT3BhY2l0eTogMC40LFxuXHRcdFx0XHRzZXRTZWxlY3Q6IFsgMCwgMCwgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyBdLFxuXHRcdFx0XHRhc3BlY3RSYXRpbzogIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nIC8gdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRib3hXaWR0aDogJGltZ0Nyb3AucGFyZW50KCkud2lkdGgoKSxcblx0XHRcdFx0Ym94SGVpZ2h0OiAwLFxuXHRcdFx0XHRhbGxvd1NlbGVjdDogZmFsc2UsXG5cdFx0XHRcdGFsbG93UmVzaXplOiB0cnVlXG5cblx0XHRcdH0sZnVuY3Rpb24oKXtcblx0XHRcdFx0X3RoaXMuamNyb3BfaW1nID0gdGhpcztcblxuXHRcdFx0XHR2YXIgZGltRGVmYXVsdCA9IF90aGlzLmpjcm9wX2ltZy5nZXRCb3VuZHMoKTtcblxuXHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwoX3RoaXMsIHtcblx0XHRcdFx0XHRpbWdTZXQ6ICRpbWdDcm9wLmF0dHIoJ3NyYycpLFxuXHRcdFx0XHRcdG1pbldpZHRoOiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0bWluSGVpZ2h0OiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdGltZ1dpZHRoOiBkaW1EZWZhdWx0WzBdLFxuXHRcdFx0XHRcdGltZ0hlaWdodDogZGltRGVmYXVsdFsxXVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpe1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogU2V0IHNlbGVjdCBvbiBpbWFnZSBjcm9wXG5cdFx0KiBAcGFyYW0gTnVtYmVyIGltZ1dpZHRoXG5cdFx0KiBAcGFyYW0gTnVtYmVyIGltZ0hlaWdodFxuXHRcdCovXG5cdFx0Y2hhbmdlT3B0c0Nyb3A6IGZ1bmN0aW9uIChvcHRpb25zLCBjYWxsYmFjaykge1xuXG5cdFx0XHR2YXIgc2V0dGluZ3MgPSB7XG5cdFx0XHRcdGltZ1NldDogJycsXG5cdFx0XHRcdG1pbldpZHRoOiAwLFxuXHRcdFx0XHRtaW5IZWlnaHQ6IDAsXG5cdFx0XHRcdGltZ1dpZHRoOiAwLFxuXHRcdFx0XHRpbWdIZWlnaHQ6IDAsXG5cdFx0XHRcdGRpbVNlbGVjdDogWzAsMF0sXG5cdFx0XHRcdGl4OiAwLFxuXHRcdFx0XHRpeTogMFxuXHRcdFx0fTtcblxuXHRcdFx0JC5leHRlbmQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuXG5cdFx0XHQvLyBzZXQgcHJvcGVydGllc1xuXHRcdFx0c2V0dGluZ3MuZGltU2VsZWN0ID0gc2V0U3F1YXJlKHNldHRpbmdzLmltZ1dpZHRoLCBzZXR0aW5ncy5pbWdIZWlnaHQpO1xuXHRcdFx0c2V0dGluZ3MuaXggPSAoc2V0dGluZ3MuaW1nV2lkdGggLSBzZXR0aW5ncy5kaW1TZWxlY3RbMF0pLzI7XG5cblx0XHRcdC8vIHJlZnJlc2ggb3B0aW9ucyBjcm9wXG5cdFx0XHR0aGlzLmpjcm9wX2ltZy5zZXRPcHRpb25zKHtcblx0XHRcdFx0dHJ1ZVNpemU6IFsgTWF0aC5mbG9vcihzZXR0aW5ncy5pbWdXaWR0aCksIE1hdGguZmxvb3Ioc2V0dGluZ3MuaW1nSGVpZ2h0KSBdXG5cdFx0XHRcdC8vIG91dGVySW1hZ2U6IHNldHRpbmdzLmltZ1NldFxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5hdHRyKCdzcmMnLCBzZXR0aW5ncy5pbWdTZXQpO1xuXG4gICAgICAgICAgICB0aGlzLmpjcm9wX2ltZy5zZXRTZWxlY3QoIFtzZXR0aW5ncy5peCwgc2V0dGluZ3MuaXksIHNldHRpbmdzLmRpbVNlbGVjdFswXSwgc2V0dGluZ3MuZGltU2VsZWN0WzFdXSApO1xuXG5cdFx0XHQvL3J1biBjYWxsYmFja1xuXHRcdFx0aWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBzdWJtaXQgZXZlbnQgZm9yIGltYWdlIGNyb3Bcblx0XHQqL1xuXHRcdHN1Ym1pdENyb3BJbWFnZTogZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHR2YXIgZGF0YSA9IGZvcm1Ub0pzb24oIHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AgKTtcblx0XHRcdGRhdGEudGFyZ193ID0gdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWc7XG5cdFx0XHRkYXRhLnRhcmdfaCA9IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZztcblxuXHRcdFx0JC5leHRlbmQoZGF0YSwgdGhpcy5zZXR0aW5ncy5jcm9wcGluZy5wYXJhbXMpO1xuXG5cdFx0XHQvLyBlbWl0IGNhbGxiYWNrXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BwaW5nJ10pIClcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ3JvcHBpbmcnXS5jYWxsKHRoaXMsIHRoaXMuamNyb3BfaW1nKTtcblxuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCc6c3VibWl0JykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cblx0XHRcdCQucG9zdCh0aGlzLnNldHRpbmdzLmNyb3BwaW5nLmVuZHBvaW50LCBkYXRhLCBtZXRob2RzLm9uU3VjY2Vzc0Nyb3AuYmluZCh0aGlzKSlcblx0XHRcdCAuZmFpbChtZXRob2RzLm9uRXJyb3JDcm9wLmJpbmQodGhpcykpO1xuXHRcdH0sXG5cblx0XHQvLyAtLS0tLS0tLS0tLS0tLVxuXHRcdC8vIGV2ZW50cyBoYW5kbGVyXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS1cblx0XHQvKipcblx0XHQqIGhhbmRsZXIgZm9yIHNldCB0byBjb29yZHMgb2YgaW1hZ2UgY3JvcFxuXHRcdCogQHBhcmFtIE9iamVjdCBjb29yZHNcblx0XHQqL1xuXHRcdHNldENvb3JkczogZnVuY3Rpb24gKGNvb3Jkcyl7XG5cblx0XHRcdHZhciByYXRpb0xlc3NlciA9IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyAvIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nO1xuXHRcdFx0dmFyIGRpbUltZyA9IHRoaXMuamNyb3BfaW1nICE9PSBudWxsID8gdGhpcy5qY3JvcF9pbWcuZ2V0Qm91bmRzKCkgOiBmYWxzZSxcblx0XHRcdFx0cnggPSAkKHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5wYXJlbnQoKVswXSkud2lkdGgoKSAvIGNvb3Jkcy53LFxuXHRcdFx0XHRyeSA9IChyYXRpb0xlc3NlciAqICQodGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLnBhcmVudCgpWzBdKS53aWR0aCgpKSAvIGNvb3Jkcy5oO1xuXG5cdFx0XHQvLyBzZXQgY29udGVudCBoZWlnaHQgb2YgY29udGVudCBwcmV2aWV3XG4gICAgICAgICAgICBpZiggdGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLmF0dHIoJ3NyYycpICkge1xuICAgICAgICAgICAgICAgICQodGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLnBhcmVudCgpWzBdKS5oZWlnaHQoIHJhdGlvTGVzc2VyICogJCh0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcucGFyZW50KClbMF0pLndpZHRoKCkgKTtcbiAgICAgICAgICAgIH1cblxuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dC5jcm9wLXgnKS52YWwoIGNvb3Jkcy54ICk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0LmNyb3AteScpLnZhbCggY29vcmRzLnkgKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQuY3JvcC13JykudmFsKCBjb29yZHMudyApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dC5jcm9wLWgnKS52YWwoIGNvb3Jkcy5oICk7XG5cblx0XHRcdC8vIHNldCBwcmV2aWV3IGltYWdlXG5cdFx0XHRpZiggZGltSW1nICl7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5jc3Moe1xuXHRcdFx0XHRcdHdpZHRoOiBNYXRoLnJvdW5kKHJ4ICogZGltSW1nWzBdKSArICdweCcsXG5cdFx0XHRcdFx0aGVpZ2h0OiBNYXRoLnJvdW5kKHJ5ICogZGltSW1nWzFdKSArICdweCcsXG5cdFx0XHRcdFx0bWluV2lkdGg6IE1hdGgucm91bmQocnggKiBkaW1JbWdbMF0pICsgJ3B4Jyxcblx0XHRcdFx0XHRtaW5IZWlnaHQ6IE1hdGgucm91bmQocnkgKiBkaW1JbWdbMV0pICsgJ3B4Jyxcblx0XHRcdFx0XHRtYXJnaW5MZWZ0OiAnLScgKyBNYXRoLnJvdW5kKHJ4ICogY29vcmRzLngpICsgJ3B4Jyxcblx0XHRcdFx0XHRtYXJnaW5Ub3A6ICctJyArIE1hdGgucm91bmQocnkgKiBjb29yZHMueSkgKyAncHgnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIHdpbGwgdXBsb2FkIGltYWdlXG5cdFx0KiBAcGFyYW0gTnVtYmVyIGlkXG5cdFx0KiBAcGFyYW0gU3RyaW5nIG5hbWVcblx0XHQqL1xuXHRcdG9uTG9hZEltZzogZnVuY3Rpb24gKGlkLCBuYW1lKSB7XG5cblx0XHRcdHZhciAkYXJlYURyb3AgPSB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLmZpbmVVcGxvYWRlcignZ2V0RHJvcFRhcmdldCcsIGlkKTtcblxuXHRcdFx0Ly8gd2hlbiB0aGUgaW1hZ2Ugd2FzIGxvYWRlZCB3aXRoIGEgZHJvcCB6b25lXG5cdFx0XHRpZiggJGFyZWFEcm9wICE9PSB1bmRlZmluZWQgJiYgJGFyZWFEcm9wLmxlbmd0aCApe1xuXHRcdFx0XHRpZiggJGFyZWFEcm9wLmhhc0NsYXNzKCdpbWFnZS1hcmVhLWRyb3AnKSB8fCAkYXJlYURyb3AuaGFzQ2xhc3MoJ3dyYXBwZXItaW1hZ2UtY3JvcCcpICl7XG5cblx0XHRcdFx0XHRtZXRob2RzLnJlYXNzaWduQWN0aW9ucy5jYWxsKHRoaXMpO1xuXHRcdFx0XHRcdG1ldGhvZHMuc2V0SW1hZ2UuY2FsbCh0aGlzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkxvYWRJbWcnXSkgKSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkxvYWRJbWcnXS5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcsIGlkLCBuYW1lKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBjb21wbGV0ZSBldmVudCBmb3IgdXBsb2FkIGltYWdlXG5cdFx0KiBAcGFyYW0gTnVtYmVyIGlkXG5cdFx0KiBAcGFyYW0gU3RyaW5nIG5hbWVcblx0XHQqIEBwYXJhbSBPYmplY3QgcmVzXG5cdFx0KiBAcGFyYW0gT2JqZWN0IHhoclxuXHRcdCovXG5cdFx0b25Db21wbGV0ZUxvYWRJbWc6IGZ1bmN0aW9uIChldmVudCwgaWQsIG5hbWUsIHJlcykge1xuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHRpZiggIXJlcy5zdWNjZXNzIClcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHQvLyBzZXR0aW5ncyBpbWFnZSBjcm9wXG5cdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5pbWdDcm9wLmRhdGEoJ0pjcm9wJykgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR0aGlzLmpjcm9wX2ltZy5zZXRJbWFnZShyZXMuZmlsZV9wYXRoLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHR2YXIgZGltSW1nID0gW3Jlcy5maWxlX3dpZHRoLCByZXMuZmlsZV9oZWlnaHRdO1xuXG5cdFx0XHRcdFx0bWV0aG9kcy5jaGFuZ2VPcHRzQ3JvcC5jYWxsKHRoaXMsIHtcblx0XHRcdFx0XHRcdGltZ1NldDogcmVzLmZpbGVfcGF0aCxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyxcblx0XHRcdFx0XHRcdG1pbkhlaWdodDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0aW1nV2lkdGg6IHJlcy5maWxlX3dpZHRoLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiByZXMuZmlsZV9oZWlnaHRcblxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIGVtaXQgY2FsbGJhY2tcblx0XHRcdFx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ29tcGxldGVMb2FkJ10pIClcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ29tcGxldGVMb2FkJ10uY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLCBpZCwgbmFtZSwgcmVzKTtcblx0XHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cblx0XHRcdH1lbHNlIHtcblxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmltZ0Nyb3AuYXR0cignc3JjJywgcmVzLmZpbGVfcGF0aCk7XG5cblx0XHRcdFx0bWV0aG9kcy5yZW5kZXJJbWFnZUNyb3AuY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdFx0XHRpbWdTZXQ6IHJlcy5maWxlX3BhdGgsXG5cdFx0XHRcdFx0XHRtaW5XaWR0aDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtaW5IZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0XHRcdGltZ1dpZHRoOiByZXMuZmlsZV93aWR0aCxcblx0XHRcdFx0XHRcdGltZ0hlaWdodDogcmVzLmZpbGVfaGVpZ2h0XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gZW1pdCBjYWxsYmFja1xuXHRcdFx0XHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Db21wbGV0ZUxvYWQnXSkgKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNvbXBsZXRlTG9hZCddLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZywgaWQsIG5hbWUsIHJlcyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdmFsdWVzIHRvIHRoZSBjcm9wIGZvcm1cblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjY3JvcF90eXBlJykudmFsKCAnbmFtZScgKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV9uYW1lJykudmFsKCByZXMuZmlsZV9uYW1lICk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfdHlwZScpLnZhbCggcmVzLmZpbGVfdHlwZSApO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIHN1Y2Nlc3MgZXZlbnQgZm9yIGNyb3AgaW1hZ2Vcblx0XHQqIEBwYXJhbSBPYmplY3QgcmVzXG5cdFx0KiBAcGFyYW0gU3RyaW5nIHN0YXR1c1xuXHRcdCogQHBhcmFtIE9iamVjdCBqcVhIUlxuXHRcdCovXG5cdFx0b25TdWNjZXNzQ3JvcDogZnVuY3Rpb24gKHJlc3AsIHN0YXR1cywganFYSFIpIHtcblxuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCc6c3VibWl0JykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cblx0XHRcdC8vIGNhbGwgY3JvcCBjb21wbGV0ZVxuXHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wQ29tcGxldGUnXSkgKSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BDb21wbGV0ZSddLmNhbGwodGhpcywgdGhpcy5qY3JvcF9pbWcsIHJlc3AsIGpxWEhSKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBlcnJvciBldmVudCBmb3IgY3JvcCBpbWFnZVxuXHRcdCogQHBhcmFtIE9iamVjdCBqcVhIUlxuXHRcdCogQHBhcmFtIFN0cmluZyBzdGF0dXNcblx0XHQqIEBwYXJhbSBTdHJpbmcgZXJyb3Jcblx0XHQqL1xuXHRcdG9uRXJyb3JDcm9wOiBmdW5jdGlvbihqcVhIUiwgc3RhdHVzLCBlcnJvcikge1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJzpzdWJtaXQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblxuXHRcdFx0Ly8gY2FsbCBjcm9wIGVycm9yXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BFcnJvciddKSApIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ3JvcEVycm9yJ10uY2FsbCh0aGlzLCB0aGlzLmpjcm9wX2ltZywganFYSFIsIGVycm9yKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly8gcGx1Z2luIGNsYXNzXG5cdC8vIGluc3RhbmNlIHRoZSBwbHVnaW5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQkLmltYWdlVXBsb2FkZXJDcm9wID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0XHRvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG5cdFx0Ly8gcGFyYW1ldGVyc1xuXHRcdHZhciBwbHVnaW4gPSB0aGlzO1xuXG5cdFx0Ly8gc2V0IGF0dHJpYnV0ZXNcblx0XHR0aGlzLmpjcm9wX2ltZyA9IG51bGw7XG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0XHR0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcblxuXHRcdC8vIGluaXRpYWxpemUgcGx1Z2luXG5cdFx0aWYoICQuaXNGdW5jdGlvbihwbHVnaW4uaW5pdCkgKVxuXHRcdFx0cGx1Z2luLmluaXQoZWxlbWVudCwgb3B0aW9ucyk7XG5cdH07XG5cblx0Ly8gZXh0ZW5kcyBwcm90b3R5cGUgb2YgcGx1Z2luXG5cdCQuaW1hZ2VVcGxvYWRlckNyb3AucHJvdG90eXBlID0ge1xuXG5cdFx0Ly8gcGx1Z2luJ3Mgc2V0dGluZ3Ncblx0XHRzZXR0aW5ncyA6IHt9LFxuXG5cdFx0LyoqXG5cdFx0KiBDb25zdHJ1Y3RvciBtZXRob2Rcblx0XHQqL1xuXHRcdGluaXQgOiBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cdFx0XHQvLyBjaGVjayBvdXQgaWYgYWxyZWFkeSB3YXMgYXNzaWduZWQgdGhlIGpjcm9wIGxpYnJhcnlcblx0XHRcdGlmKCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AgJiYgdGhpcy5zZXR0aW5ncy5pbWdDcm9wLmRhdGEoJ0pjcm9wJykgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKTtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuZGVzdHJveSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbml0IGltYWdlIHVwbG9hZGVyIGFuZCBhY3Rpb25zXG5cdFx0XHRtZXRob2RzLnJlYXNzaWduQWN0aW9ucy5jYWxsKHRoaXMpO1xuXHRcdFx0bWV0aG9kcy5yZW5kZXJVcGxvYWRlckltZy5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcpO1xuXHRcdFx0bWV0aG9kcy5yZW5kZXJJbWFnZUNyb3AuY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLmltZ0Nyb3ApO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIC0tLS0tLS0tLS0tXG5cdFx0KiBBcGkgbWV0aG9kc1xuXHRcdCogLS0tLS0tLS0tLS1cblx0XHQqL1xuXG5cdFx0LyoqXG5cdFx0KiBjaGFuZ2UgSW1hZ2Vcblx0XHQqIEBwYXJhbSBTdHJpbmcgdXJsSW1hZ2Vcblx0XHQqIEBwYXJhbSBGdW5jdGlvbiBjYWxsYmFja1xuXHRcdCovXG5cdFx0Y2hhbmdlSW1hZ2UgOiBmdW5jdGlvbih1cmxJbWFnZSwgY2FsbGJhY2spIHtcblx0XHRcdG1ldGhvZHMucmVhc3NpZ25BY3Rpb25zLmNhbGwodGhpcyk7XG5cdFx0XHRtZXRob2RzLnNldEltYWdlLmNhbGwodGhpcywgdXJsSW1hZ2UsIGNhbGxiYWNrKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBnZXQgaW1hZ2UgY3JvcCBlbGVtZW50XG5cdFx0Ki9cblx0XHRnZXRJbWdDcm9wIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBnZXQgZm9ybSBjcm9wIGVsZW1lbnRcblx0XHQqL1xuXHRcdGdldEZvcm1Dcm9wIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuZm9ybUNyb3A7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZ2V0IHVwbG9hZGVyIGltYWdlIGVsZW1lbnRcblx0XHQqL1xuXHRcdGdldFVwbG9hZGVySW1nIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWc7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZ2V0IGltYWdlIHByZXZpZXcgZWxlbWVudFxuXHRcdCovXG5cdFx0Z2V0UHJldmlld0ltZyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLnNldHRpbmdzLnByZXZpZXdJbWc7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZGVzdHJveSBvYmplY3QgcGx1Z2luXG5cdFx0Ki9cblx0XHRkZXN0cm95IDogZnVuY3Rpb24gKCkge1xuXHRcdFx0bWV0aG9kcy5kZXN0cm95LmNhbGwodGhpcyk7XG5cdFx0fVxuXHR9O1xuXG5cdCQuZm4uaW1hZ2VVcGxvYWRlckNyb3AgPSBmdW5jdGlvbihvcHRzT3JDbWQpIHtcblx0XHR2YXIgc2VsZiA9IHRoaXMsIHNlbGZBcmdzID0gYXJndW1lbnRzLCByZXRWYWxzID0gW107XG5cblx0XHRpZiAoICQodGhpcykuZGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKSAhPT0gdW5kZWZpbmVkICYmICQuaXNGdW5jdGlvbigkKHRoaXMpLmRhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJylbb3B0c09yQ21kXSkgKSB7XG5cblx0XHRcdHZhciBwbHVnID0gJCh0aGlzKS5kYXRhKCdpbWFnZVVwbG9hZGVyQ3JvcCcpO1xuXHRcdFx0cmV0dXJuIHBsdWdbb3B0c09yQ21kXS5hcHBseShwbHVnLCBzbGljZS5jYWxsKHNlbGZBcmdzLCAxKSk7XG5cblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRzT3JDbWQgPT09ICdvYmplY3QnIHx8ICFvcHRzT3JDbWQpIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcblxuXHRcdFx0XHR2YXIgcGx1Z2luID0gbmV3ICQuaW1hZ2VVcGxvYWRlckNyb3AodGhpcywgb3B0c09yQ21kKTtcblxuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJywgcGx1Z2luKTtcblx0XHRcdH0pO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdCQuZXJyb3IoICdNZXRob2QgXCInICsgIG9wdHNPckNtZCArICdcIiBkb2VzIG5vdCBleGlzdCBpbiBpbWFnZVVwbG9hZGVyQ3JvcCAtIChrcm9iaW5nKSBwbHVnaW4hJyk7XG5cdFx0fVxuXHR9O1xuXG59KSk7XG4iXX0=
