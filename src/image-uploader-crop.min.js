!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";function t(t){var s={},e=[];return e=i.prototype.isPrototypeOf(t)?t.serializeArray():i(t).serializeArray(),i.each(e,function(){void 0!==s[this.name]?(s[this.name].push||(s[this.name]=[s[this.name]]),s[this.name].push(this.value||"")):s[this.name]=this.value||""}),s}function s(i,t){var s=Math.min(i,t);return i==t?[i,t]:[s,s]}function e(){return!!{}.hasOwnProperty.call(i.fn,"fineUploader")}function n(){return!!{}.hasOwnProperty.call(i.fn,"Jcrop")}var o=Array.prototype.slice,g=(Array.prototype.splice,{formCrop:null,imgCrop:null,previewImg:null,uploaderImg:null,templateImgUploader:"",configImg:{maxWidthImg:0,maxHeightImg:0,minWidthImg:0,minHeightImg:0,allowedExtensions:["jpeg","jpg","png"],sizeLimit:0,sendOriginal:!0,defaultQuality:100},uploadding:{inputName:"file",endpoint:"",params:{}},cropping:{endpoint:"",params:{}},extraDropzones:[i("#wrapper-image-crop")],callbacks:{onCropping:function(i){},onCropComplete:function(i,t,s){},onCropError:function(i,t,s){},onLoadImg:function(i,t,s){},onCompleteLoad:function(i,t,s,e){}},showMessage:function(i){return alertify.alert(i)},showConfirm:function(i){var t=new qq.Promise;return alertify.confirm(i,function(i){return i?t.success(i):t.failure()}),t},showPrompt:function(i,t){var s=new qq.Promise;return alertify.prompt(i,function(i,t){return i?s.success(t):s.failure(t)},t),s}}),r={reassignActions:function(){this.settings.uploaderImg.off("complete"),this.settings.uploaderImg.on("complete",r.onCompleteLoadImg.bind(this)),this.settings.formCrop.off("submit"),this.settings.formCrop.on("submit",r.submitCropImage.bind(this))},destroy:function(){void 0!==this.settings.imgCrop.data("Jcrop")&&this.jcrop_img.destroy(),this.settings.uploaderImg.off("complete"),this.settings.formCrop.off("submit"),this.$element.removeData("imageUploaderCrop")},setImage:function(t,s){t||(t=this.settings.imgCrop.attr("src"));var e=this;void 0!==this.settings.imgCrop.data("Jcrop")?(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.setImage(t,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),r.changeOptsCrop.call(e,{imgSet:t,minWidth:e.settings.configImg.minWidthImg,minHeight:e.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),e.settings.formCrop.find("input#crop_type").val("url"),e.settings.formCrop.find("input#file_name").val(t),e.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))})):(this.settings.imgCrop.attr("src",t),r.renderImageCrop.call(this,this.settings.imgCrop,function(){var i=[];i=this.settings.configImg.minWidthImg&&this.settings.configImg.minHeightImg?[this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg]:this.jcrop_img.getBounds(),r.changeOptsCrop.call(this,{imgSet:t,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),this.settings.formCrop.find("input#crop_type").val("url"),this.settings.formCrop.find("input#file_name").val(t),this.settings.formCrop.find("input#file_type").val(t.split(".").slice(-1))}.bind(this))),i.isFunction(s)&&s.call()},renderUploaderImg:function(i){if(!e())return!1;i.fineUploader({debug:!1,template:this.settings.templateImgUploader,request:this.settings.uploadding,thumbnails:{placeholders:{waitingPath:"img/waiting-generic.png",notAvailablePath:"img/not_available-generic.png"}},autoUpload:!0,multiple:!1,validation:{image:{maxWidth:this.settings.configImg.maxWidthImg||g.configImg.maxWidthImg,maxHeight:this.settings.configImg.maxHeightImg||g.configImg.maxHeightImg},allowedExtensions:this.settings.configImg.allowedExtensions||g.configImg.allowedExtensions,sizeLimit:this.settings.configImg.sizeLimit||g.configImg.sizeLimit,itemLimit:0},scaling:{sendOriginal:this.settings.configImg.sendOriginal||g.configImg.sendOriginal,defaultQuality:this.settings.configImg.defaultQuality||g.configImg.defaultQuality},callbacks:{onUpload:r.onLoadImg.bind(this)},dragAndDrop:{extraDropzones:this.settings.extraDropzones},showMessage:this.settings.showMessage,showConfirm:this.settings.showConfirm,showPrompt:this.settings.showPrompt})},renderImageCrop:function(t,s){if(!n())return!1;var e=this;t.Jcrop({onSelect:r.setCoords.bind(this),onChange:r.setCoords.bind(this),onRelease:function(){},bgColor:"black",bgOpacity:.4,setSelect:[0,0,this.settings.configImg.minWidthImg,this.settings.configImg.minHeightImg],aspectRatio:this.settings.configImg.minWidthImg/this.settings.configImg.minHeightImg,boxWidth:i(this.settings.imgCrop.parent()[0]).width(),boxHeight:0,allowSelect:!1,allowResize:!0},function(){e.jcrop_img=this;var i=e.jcrop_img.getBounds();r.changeOptsCrop.call(e,{imgSet:t.attr("src"),minWidth:e.settings.configImg.minWidthImg,minHeight:e.settings.configImg.minHeightImg,imgWidth:i[0],imgHeight:i[1]}),"function"==typeof s&&s.call()})},changeOptsCrop:function(t,e){var n={imgSet:"",minWidth:0,minHeight:0,imgWidth:0,imgHeight:0,dimSelect:[0,0],ix:0,iy:0};i.extend(n,t),n.dimSelect=s(n.imgWidth,n.imgHeight),n.ix=(n.imgWidth-n.dimSelect[0])/2,this.jcrop_img.setOptions({trueSize:[Math.floor(n.imgWidth),Math.floor(n.imgHeight)]}),this.jcrop_img.setSelect([n.ix,n.iy,n.dimSelect[0],n.dimSelect[1]]),this.settings.previewImg.attr("src",n.imgSet),"function"==typeof e&&e.call()},submitCropImage:function(s){s.preventDefault();var e=t(s.target);e.targ_w=this.settings.configImg.minWidthImg,e.targ_h=this.settings.configImg.minHeightImg,i.extend(e,this.settings.cropping.params),i.isFunction(this.settings.callbacks.onCropping)&&this.settings.callbacks.onCropping.call(this,this.jcrop_img),this.settings.formCrop.find(":submit").addClass("disabled"),i.post(this.settings.cropping.endpoint,e,r.onSuccessCrop.bind(this)).fail(r.onErrorCrop.bind(this))},setCoords:function(t){var s=this.settings.configImg.minHeightImg/this.settings.configImg.minWidthImg,e=null!==this.jcrop_img&&this.jcrop_img.getBounds(),n=i(this.settings.previewImg.parent()[0]).width()/t.w,o=s*i(this.settings.previewImg.parent()[0]).width()/t.h;i(this.settings.previewImg.parent()[0]).height(s*i(this.settings.previewImg.parent()[0]).width()),this.settings.formCrop.find("input.crop-x").val(t.x),this.settings.formCrop.find("input.crop-y").val(t.y),this.settings.formCrop.find("input.crop-w").val(t.w),this.settings.formCrop.find("input.crop-h").val(t.h),e&&this.settings.previewImg.css({width:Math.round(n*e[0])+"px",height:Math.round(o*e[1])+"px",minWidth:Math.round(n*e[0])+"px",minHeight:Math.round(o*e[1])+"px",marginLeft:"-"+Math.round(n*t.x)+"px",marginTop:"-"+Math.round(o*t.y)+"px"})},onLoadImg:function(t,s){var e=this.settings.uploaderImg.fineUploader("getDropTarget",t);void 0!==e&&e.length&&(e.hasClass("image-area-drop")||e.hasClass("wrapper-image-crop"))&&(r.reassignActions.call(this),r.setImage.call(this)),i.isFunction(this.settings.callbacks.onLoadImg)&&this.settings.callbacks.onLoadImg.call(this,this.settings.uploaderImg,t,s)},onCompleteLoadImg:function(t,s,e,n){n.success&&(void 0!==this.settings.imgCrop.data("Jcrop")?this.jcrop_img.setImage(n.file_path,function(){n.file_width,n.file_height;r.changeOptsCrop.call(this,{imgSet:n.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:n.file_width,imgHeight:n.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,s,e,n)}.bind(this))}.bind(this)):(this.settings.imgCrop.attr("src",n.file_path),r.renderImageCrop.call(this,this.settings.imgCrop,function(){r.changeOptsCrop.call(this,{imgSet:n.file_path,minWidth:this.settings.configImg.minWidthImg,minHeight:this.settings.configImg.minHeightImg,imgWidth:n.file_width,imgHeight:n.file_height},function(){i.isFunction(this.settings.callbacks.onCompleteLoad)&&this.settings.callbacks.onCompleteLoad.call(this,this.settings.uploaderImg,s,e,n)}.bind(this))}.bind(this))),this.settings.formCrop.find("input#crop_type").val("name"),this.settings.formCrop.find("input#file_name").val(n.file_name),this.settings.formCrop.find("input#file_type").val(n.file_type))},onSuccessCrop:function(t,s,e){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropComplete)&&this.settings.callbacks.onCropComplete.call(this,this.jcrop_img,t,e)},onErrorCrop:function(t,s,e){this.settings.formCrop.find(":submit").removeClass("disabled"),i.isFunction(this.settings.callbacks.onCropError)&&this.settings.callbacks.onCropError.call(this,this.jcrop_img,t,e)}};i.imageUploaderCrop=function(t,s){s||(s={});var e=this;this.jcrop_img=null,this.element=t,this.$element=i(t),i.isFunction(e.init)&&e.init(t,s)},i.imageUploaderCrop.prototype={settings:{},init:function(t,s){this.settings=i.extend({},g,s),this.settings.imgCrop&&void 0!==this.settings.imgCrop.data("Jcrop")&&(this.jcrop_img=this.settings.imgCrop.data("Jcrop"),this.jcrop_img.destroy()),r.reassignActions.call(this),r.renderUploaderImg.call(this,this.settings.uploaderImg)},changeImage:function(i,t){r.reassignActions.call(this),r.setImage.call(this,i,t)},getImgCrop:function(){return this.settings.imgCrop},getFormCrop:function(){return this.settings.formCrop},getUploaderImg:function(){return this.settings.uploaderImg},getPreviewImg:function(){return this.settings.previewImg},destroy:function(){r.destroy.call(this)}},i.fn.imageUploaderCrop=function(t){var s=arguments;if(void 0!==i(this).data("imageUploaderCrop")&&i.isFunction(i(this).data("imageUploaderCrop")[t])){var e=i(this).data("imageUploaderCrop");return e[t].apply(e,o.call(s,1))}if("object"==typeof t||!t)return this.each(function(s,e){var n=new i.imageUploaderCrop(this,t);i(this).data("imageUploaderCrop",n)});i.error('Method "'+t+'" does not exist in imageUploaderCrop - (krobing) plugin!')}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLXVwbG9hZGVyLWNyb3AuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiJCIsImZvcm1Ub0pzb24iLCJzZWxlY3RvciIsIm8iLCJhIiwicHJvdG90eXBlIiwiaXNQcm90b3R5cGVPZiIsInNlcmlhbGl6ZUFycmF5IiwiZWFjaCIsInVuZGVmaW5lZCIsInRoaXMiLCJuYW1lIiwicHVzaCIsInZhbHVlIiwic2V0U3F1YXJlIiwiaW1nV2lkdGgiLCJpbWdIZWlnaHQiLCJtaW5EaW0iLCJNYXRoIiwibWluIiwiZXhpc3RVcGxvYWRlclBsdWdpbiIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImZuIiwiZXhpc3RDcm9wUGx1Z2luIiwic2xpY2UiLCJBcnJheSIsImRlZmF1bHRzIiwic3BsaWNlIiwiZm9ybUNyb3AiLCJpbWdDcm9wIiwicHJldmlld0ltZyIsInVwbG9hZGVySW1nIiwidGVtcGxhdGVJbWdVcGxvYWRlciIsImNvbmZpZ0ltZyIsIm1heFdpZHRoSW1nIiwibWF4SGVpZ2h0SW1nIiwibWluV2lkdGhJbWciLCJtaW5IZWlnaHRJbWciLCJhbGxvd2VkRXh0ZW5zaW9ucyIsInNpemVMaW1pdCIsInNlbmRPcmlnaW5hbCIsImRlZmF1bHRRdWFsaXR5IiwidXBsb2FkZGluZyIsImlucHV0TmFtZSIsImVuZHBvaW50IiwicGFyYW1zIiwiY3JvcHBpbmciLCJleHRyYURyb3B6b25lcyIsImNhbGxiYWNrcyIsIm9uQ3JvcHBpbmciLCJqY3JvcF9pbWciLCJvbkNyb3BDb21wbGV0ZSIsInJlc3AiLCJqcVhIUiIsIm9uQ3JvcEVycm9yIiwiZXJyb3IiLCJvbkxvYWRJbWciLCIkdXBsb2FkZXJJbWciLCJpZCIsIm9uQ29tcGxldGVMb2FkIiwicmVzIiwic2hvd01lc3NhZ2UiLCJtZXNzYWdlIiwiYWxlcnRpZnkiLCJhbGVydCIsInNob3dDb25maXJtIiwicHJvbWlzZSIsInFxIiwiUHJvbWlzZSIsImNvbmZpcm0iLCJyZXN1bHQiLCJzdWNjZXNzIiwiZmFpbHVyZSIsInNob3dQcm9tcHQiLCJkZWZhdWx0VmFsdWUiLCJwcm9tcHQiLCJpblN0ciIsIm1ldGhvZHMiLCJyZWFzc2lnbkFjdGlvbnMiLCJzZXR0aW5ncyIsIm9mZiIsIm9uIiwib25Db21wbGV0ZUxvYWRJbWciLCJiaW5kIiwic3VibWl0Q3JvcEltYWdlIiwiZGVzdHJveSIsImRhdGEiLCIkZWxlbWVudCIsInJlbW92ZURhdGEiLCJzZXRJbWFnZSIsInVybEltYWdlIiwiY2FsbGJhY2siLCJhdHRyIiwiX3RoaXMiLCJkaW1JbWciLCJnZXRCb3VuZHMiLCJjaGFuZ2VPcHRzQ3JvcCIsImltZ1NldCIsIm1pbldpZHRoIiwibWluSGVpZ2h0IiwiZmluZCIsInZhbCIsInNwbGl0IiwicmVuZGVySW1hZ2VDcm9wIiwiaXNGdW5jdGlvbiIsInJlbmRlclVwbG9hZGVySW1nIiwiZmluZVVwbG9hZGVyIiwiZGVidWciLCJ0ZW1wbGF0ZSIsInJlcXVlc3QiLCJ0aHVtYm5haWxzIiwicGxhY2Vob2xkZXJzIiwid2FpdGluZ1BhdGgiLCJub3RBdmFpbGFibGVQYXRoIiwiYXV0b1VwbG9hZCIsIm11bHRpcGxlIiwidmFsaWRhdGlvbiIsImltYWdlIiwibWF4V2lkdGgiLCJtYXhIZWlnaHQiLCJpdGVtTGltaXQiLCJzY2FsaW5nIiwib25VcGxvYWQiLCJkcmFnQW5kRHJvcCIsIiRpbWdDcm9wIiwiSmNyb3AiLCJvblNlbGVjdCIsInNldENvb3JkcyIsIm9uQ2hhbmdlIiwib25SZWxlYXNlIiwiYmdDb2xvciIsImJnT3BhY2l0eSIsInNldFNlbGVjdCIsImFzcGVjdFJhdGlvIiwiYm94V2lkdGgiLCJwYXJlbnQiLCJ3aWR0aCIsImJveEhlaWdodCIsImFsbG93U2VsZWN0IiwiYWxsb3dSZXNpemUiLCJkaW1EZWZhdWx0Iiwib3B0aW9ucyIsImRpbVNlbGVjdCIsIml4IiwiaXkiLCJleHRlbmQiLCJzZXRPcHRpb25zIiwidHJ1ZVNpemUiLCJmbG9vciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsInRhcmdfdyIsInRhcmdfaCIsImFkZENsYXNzIiwicG9zdCIsIm9uU3VjY2Vzc0Nyb3AiLCJmYWlsIiwib25FcnJvckNyb3AiLCJjb29yZHMiLCJyYXRpb0xlc3NlciIsInJ4IiwidyIsInJ5IiwiaCIsImhlaWdodCIsIngiLCJ5IiwiY3NzIiwicm91bmQiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiJGFyZWFEcm9wIiwibGVuZ3RoIiwiaGFzQ2xhc3MiLCJldmVudCIsImZpbGVfcGF0aCIsImZpbGVfd2lkdGgiLCJmaWxlX2hlaWdodCIsImZpbGVfbmFtZSIsImZpbGVfdHlwZSIsInN0YXR1cyIsInJlbW92ZUNsYXNzIiwiaW1hZ2VVcGxvYWRlckNyb3AiLCJlbGVtZW50IiwicGx1Z2luIiwiaW5pdCIsImNoYW5nZUltYWdlIiwiZ2V0SW1nQ3JvcCIsImdldEZvcm1Dcm9wIiwiZ2V0VXBsb2FkZXJJbWciLCJnZXRQcmV2aWV3SW1nIiwib3B0c09yQ21kIiwic2VsZkFyZ3MiLCJhcmd1bWVudHMiLCJwbHVnIiwiYXBwbHkiLCJpbmRleCIsImVsIl0sIm1hcHBpbmdzIjoiQ0FVQSxTQUFBQSxHQUFBLGFBQ0EsbUJBQUFDLFFBQUFBLE9BQUFDLElBRUFELFFBQUEsVUFBQUQsR0FDQSxpQkFBQUcsUUFBQUEsT0FBQUMsUUFFQUQsT0FBQUMsUUFBQUosRUFBQUssUUFBQSxXQUdBTCxFQUFBTSxTQUVBLFNBQUFDLEdBQUEsYUEyRUEsU0FBQUMsRUFBQUMsR0FFQSxJQUFBQyxLQUFBQyxLQXFCQSxPQW5CQUEsRUFEQUosRUFBQUssVUFBQUMsY0FBQUosR0FDQUEsRUFBQUssaUJBR0FQLEVBQUFFLEdBQUFLLGlCQUdBUCxFQUFBUSxLQUFBSixFQUFBLGdCQUNBSyxJQUFBTixFQUFBTyxLQUFBQyxPQUNBUixFQUFBTyxLQUFBQyxNQUFBQyxPQUNBVCxFQUFBTyxLQUFBQyxPQUFBUixFQUFBTyxLQUFBQyxRQUdBUixFQUFBTyxL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QUFBcEwsS0FBQXNFLFNBQUFuRCxVQU1Ba0ssZUFBQSxXQUNBLE9BQUFyTCxLQUFBc0UsU0FBQWhELGFBTUFnSyxjQUFBLFdBQ0EsT0FBQXRMLEtBQUFzRSxTQUFBakQsWUFNQXVELFFBQUEsV0FDQVIsRUFBQVEsUUFBQWhFLEtBQUFaLFFBSUFWLEVBQUF1QixHQUFBaUssa0JBQUEsU0FBQVMsR0FDQSxJQUFBQyxFQUFBQyxVQUVBLFFBQUExTCxJQUFBVCxFQUFBVSxNQUFBNkUsS0FBQSxzQkFBQXZGLEVBQUF5RyxXQUFBekcsRUFBQVUsTUFBQTZFLEtBQUEscUJBQUEwRyxJQUFBLENBRUEsSUFBQUcsRUFBQXBNLEVBQUFVLE1BQUE2RSxLQUFBLHFCQUNBLE9BQUE2RyxFQUFBSCxHQUFBSSxNQUFBRCxFQUFBM0ssRUFBQUgsS0FBQTRLLEVBQUEsSUFFQSxHQUFBLGlCQUFBRCxJQUFBQSxFQUVBLE9BQUF2TCxLQUFBRixLQUFBLFNBQUE4TCxFQUFBQyxHQUVBLElBQUFiLEVBQUEsSUFBQTFMLEVBQUF3TCxrQkFBQTlLLEtBQUF1TCxHQUVBak0sRUFBQVUsTUFBQTZFLEtBQUEsb0JBQUFtRyxLQUlBMUwsRUFBQXdELE1BQUEsV0FBQXlJLEVBQUEiLCJmaWxlIjoiaW1hZ2UtdXBsb2FkZXItY3JvcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbWFnZS11cGxvYWRlci1jcm9wIHYwLjAuMSBmb3IgalF1ZXJ5IHRoYXQgdXNlcyBmaW5lLXVwbG9hZGVyLCBqY3JvcFxuLy8gKGMpIDIwMTcsIE1JVCBsaWNlbnNlZC4gaHR0cDovL3R1cHJveWVjdG8uY29tXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRGVwZW5kZW5jaWVzOiBqUXVlcnksIGZpbmUtdXBsb2FkZXIsIGpjcm9wXG4vLyBBdXRob3I6IFR1UHJveWVjdG8uY29tXG4vLyBEZXZlbG9wZXI6IEBrcm9iaW5nXG4vLyBDcmVhdGVkOiAwNC8wMy8yMDE2XG4vLyBXZWJzaXRlOiBodHRwOi8vdHVwcm95ZWN0by5jb21cbi8vIERlc2NyaXB0aW9uOiBjcm9wcGVyIGFuZCB1cGxvYWRlciBvZiBpbWFnZXMgdGhhdCB1c2VzIGFub3RoZXIgbGlicmFyaWVzXG5cbiEoZnVuY3Rpb24gKGZhY3RvcnkpIHsgJ3VzZSBzdHJpY3QnXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0Ly8gTm9kZS9Db21tb25KU1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeShqUXVlcnkpO1xuXHR9XG59KGZ1bmN0aW9uICgkKSB7ICd1c2Ugc3RyaWN0Jztcblx0dmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOyAvLyBzYXZlIHJlZiB0byBvcmlnaW5hbCBzbGljZSgpXG5cdHZhciBzcGxpY2UgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlOyAvLyBzYXZlIHJlZiB0byBvcmlnaW5hbCBzbGljZSgpXG5cblx0Ly8gZGVmYXVsdCBvcHRpb25zXG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRmb3JtQ3JvcDogbnVsbCxcblx0XHRpbWdDcm9wOiBudWxsLFxuXHRcdHByZXZpZXdJbWc6IG51bGwsXG5cdFx0dXBsb2FkZXJJbWc6IG51bGwsXG5cdFx0dGVtcGxhdGVJbWdVcGxvYWRlcjogJycsXG5cdFx0Y29uZmlnSW1nOiB7XG5cdFx0XHRtYXhXaWR0aEltZyA6IDAsIC8vIDY0NiAqIDJcblx0XHRcdG1heEhlaWdodEltZyA6IDAsIC8vIDM3NCAqIDJcblx0XHRcdG1pbldpZHRoSW1nIDogMCxcblx0XHRcdG1pbkhlaWdodEltZyA6IDAsXG5cdFx0XHRhbGxvd2VkRXh0ZW5zaW9uczogWydqcGVnJywgJ2pwZycsICdwbmcnXSxcblx0XHRcdHNpemVMaW1pdDogMCwgLy8gNTAga0IgPSA1MCAqIDEwMjQgYnl0ZXMsXG5cdFx0XHRzZW5kT3JpZ2luYWw6IHRydWUsIC8vIHNlbmQgaW1hZ2VzIG9yaWdpbmFsIGluIHRydWVcblx0XHRcdGRlZmF1bHRRdWFsaXR5OiAxMDAgLy8gcXVhbGl0eSBvZiB0aGUgaW1hZ2UsIHJhbmdlKCAxIC0gMTAwIClcblx0XHR9LFxuXHRcdHVwbG9hZGRpbmc6IHtcblx0XHRcdGlucHV0TmFtZTogJ2ZpbGUnLFxuXHRcdFx0ZW5kcG9pbnQ6ICcnLFxuXHRcdFx0cGFyYW1zOiB7fVxuXHRcdH0sXG5cdFx0Y3JvcHBpbmc6IHtcblx0XHRcdGVuZHBvaW50OiAnJyxcblx0XHRcdHBhcmFtczoge31cblx0XHR9LFxuXHRcdGV4dHJhRHJvcHpvbmVzOiBbJCgnI3dyYXBwZXItaW1hZ2UtY3JvcCcpXSxcblx0XHQvLyBFdmVudHMgaGFuZGxlcnNcblx0XHRjYWxsYmFja3M6IHtcblx0XHRcdG9uQ3JvcHBpbmc6IGZ1bmN0aW9uIChqY3JvcF9pbWcpIHt9LFxuXHRcdFx0b25Dcm9wQ29tcGxldGU6IGZ1bmN0aW9uIChqY3JvcF9pbWcsIHJlc3AsIGpxWEhSKSB7fSxcblx0XHRcdG9uQ3JvcEVycm9yOiBmdW5jdGlvbiAoamNyb3BfaW1nLCBqcVhIUiwgZXJyb3IpIHt9LFxuXHRcdFx0b25Mb2FkSW1nOiBmdW5jdGlvbiAoJHVwbG9hZGVySW1nLCBpZCwgbmFtZSkge30sXG5cdFx0XHRvbkNvbXBsZXRlTG9hZDogZnVuY3Rpb24gKCR1cGxvYWRlckltZywgaWQsIG5hbWUsIHJlcykge31cblx0XHR9LFxuXHRcdHNob3dNZXNzYWdlOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuXHRcdFx0cmV0dXJuIGFsZXJ0aWZ5LmFsZXJ0KG1lc3NhZ2UpO1xuXHRcdH0sXG5cdFx0c2hvd0NvbmZpcm06IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBxcS5Qcm9taXNlKCk7XG5cdFx0XHRhbGVydGlmeS5jb25maXJtKG1lc3NhZ2UsIGZ1bmN0aW9uKHJlc3VsdCkge1xuXHRcdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2Uuc3VjY2VzcyhyZXN1bHQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLmZhaWx1cmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHR9LFxuXHRcdHNob3dQcm9tcHQ6IGZ1bmN0aW9uIChtZXNzYWdlLCBkZWZhdWx0VmFsdWUpIHtcblx0XHRcdHZhciBwcm9taXNlID0gbmV3IHFxLlByb21pc2UoKTtcblxuXHRcdFx0YWxlcnRpZnkucHJvbXB0KG1lc3NhZ2UsIGZ1bmN0aW9uKHJlc3VsdCwgaW5TdHIpIHtcblx0XHRcdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLnN1Y2Nlc3MoaW5TdHIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLmZhaWx1cmUoaW5TdHIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBkZWZhdWx0VmFsdWUpO1xuXHRcdFx0cmV0dXJuIHByb21pc2U7XG5cdFx0fVxuXHR9O1xuXG5cdC8vID09PT09PT09PT09PT09XG5cdC8vIGhlbHBlcnMgbWV0aG9kXG5cdC8vID09PT09PT09PT09PT09XG5cdC8qKlxuXHQqICBTZXJpYWxpemUgZm9ybSBpbnRvIGpzb24gZm9ybWF0XG5cdCogIEBwYXJhbSB7IHN0cmluZyB9IG5hbWUgY2xhc3Mgb3IgaWQgb2YgdGhlIGh0bWwgZWxlbWVudCB0byBlbWJlZCB0aGUgbG9hZGVyXG5cdCogIEByZXR1cm4geyBvYmplY3QgfSBmb3JtIGludG8ganNvblxuXHQqL1xuXHRmdW5jdGlvbiBmb3JtVG9Kc29uICggc2VsZWN0b3IgKXtcblxuXHRcdHZhciBvID0ge30sIGEgPSBbXTtcblx0XHRpZiggJC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzZWxlY3RvcikgKXtcblx0XHRcdGEgPSBzZWxlY3Rvci5zZXJpYWxpemVBcnJheSgpO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0YSA9ICQoc2VsZWN0b3IpLnNlcmlhbGl6ZUFycmF5KCk7XG5cdFx0fVxuXG5cdFx0JC5lYWNoKCBhLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggb1sgdGhpcy5uYW1lIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0aWYgKCAhIG9bdGhpcy5uYW1lXS5wdXNoICkge1xuXHRcdFx0XHRcdG9bIHRoaXMubmFtZSBdID0gWyBvWyB0aGlzLm5hbWUgXSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0b1sgdGhpcy5uYW1lIF0ucHVzaCggdGhpcy52YWx1ZSB8fCAnJyApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvWyB0aGlzLm5hbWUgXSA9IHRoaXMudmFsdWUgfHwgJyc7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdC8qKlxuXHQqIFNldCBzZWxlY3Qgb24gaW1hZ2UgY3JvcFxuXHQqIEBwYXJhbSBOdW1iZXIgaW1nV2lkdGhcblx0KiBAcGFyYW0gTnVtYmVyIGltZ0hlaWdodFxuXHQqL1xuXHRmdW5jdGlvbiBzZXRTcXVhcmUgKGltZ1dpZHRoLCBpbWdIZWlnaHQpIHtcblx0XHR2YXIgbWluRGltID0gTWF0aC5taW4oaW1nV2lkdGgsIGltZ0hlaWdodCk7XG5cblx0XHRpZiggaW1nV2lkdGggPT0gaW1nSGVpZ2h0ICl7XG5cdFx0XHRyZXR1cm4gW2ltZ1dpZHRoLCBpbWdIZWlnaHRdO1xuXHRcdH1cblxuXHRcdHJldHVybiBbbWluRGltLCBtaW5EaW1dO1xuXHR9XG5cblx0Ly8gY2hlY2sgb3V0IGlmIGV4aXRzIGpRdWVyeSBwbHVnaW4gZmluZXVwbG9hZGVyXG5cdGZ1bmN0aW9uIGV4aXN0VXBsb2FkZXJQbHVnaW4gKCkge1xuXG5cdFx0aWYoICh7fSkuaGFzT3duUHJvcGVydHkuY2FsbCgkLmZuLCAnZmluZVVwbG9hZGVyJykgKXtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1lbHNlIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvLyBjaGVjayBvdXQgaWYgZXhpdHMgalF1ZXJ5IHBsdWdpbiBqY3JvcFxuXHRmdW5jdGlvbiBleGlzdENyb3BQbHVnaW4gKCkge1xuXG5cdFx0aWYoICh7fSkuaGFzT3duUHJvcGVydHkuY2FsbCgkLmZuLCAnSmNyb3AnKSApe1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fWVsc2Uge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQqIHByaXZhdGVzIG1ldGhvZHNcblx0Ki9cblx0dmFyIG1ldGhvZHMgPSB7XG5cdFx0LyoqXG5cdFx0KiByZWFzc2lnbiBldmVudHMgYW5kIGFub3RoZXIgdGhpbmdzXG5cdFx0Ki9cblx0XHRyZWFzc2lnbkFjdGlvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ2NvbXBsZXRlJyk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLm9uKCdjb21wbGV0ZScsIG1ldGhvZHMub25Db21wbGV0ZUxvYWRJbWcuYmluZCh0aGlzKSk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9mZignc3VibWl0Jyk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9uKCdzdWJtaXQnLCBtZXRob2RzLnN1Ym1pdENyb3BJbWFnZS5iaW5kKHRoaXMpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBkZXN0cm95IHBsdWdpblxuXHRcdCovXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gZGVzdHJveSBqY3JvcFxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuZGVzdHJveSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB1bmRlbGVnYXRlIGV2ZW50c1xuXHRcdFx0Ly8gdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ3VwbG9hZCcpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy51cGxvYWRlckltZy5vZmYoJ2NvbXBsZXRlJyk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLm9mZignc3VibWl0Jyk7XG5cblx0XHRcdC8vIHJlbW92ZSBvYmplY3QgcGx1Z2luIGluIGRhdGFcblx0XHRcdHRoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBzZXQgaW1hZ2Vcblx0XHQqIEBwYXJhbSB7U3RyaW5nfSB1cmxJbWFnZVxuXHRcdCogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0XHQqL1xuXHRcdHNldEltYWdlOiBmdW5jdGlvbiAodXJsSW1hZ2UsIGNhbGxiYWNrKSB7XG5cdFx0XHR1cmxJbWFnZSB8fCAodXJsSW1hZ2UgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuYXR0cignc3JjJykpO1xuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQvLyB2YWxpZGF0ZXMgaWYgYWxyZWFkeSBvciBub3Qgd2FzIGNyZWF0ZWQgdGhlIGNyb3AgaW1hZ2Vcblx0XHRcdGlmKCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKSAhPT0gdW5kZWZpbmVkICl7XG5cdFx0XHRcdHRoaXMuamNyb3BfaW1nID0gdGhpcy5zZXR0aW5ncy5pbWdDcm9wLmRhdGEoJ0pjcm9wJyk7XG5cblx0XHRcdFx0Ly8gc2V0dGluZ3MgaW1hZ2UgY3JvcFxuXHRcdFx0XHR0aGlzLmpjcm9wX2ltZy5zZXRJbWFnZSh1cmxJbWFnZSwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtdO1xuXHRcdFx0XHRcdC8vIHNldHRpbmdzIGltYWdlIGNyb3Bcblx0XHRcdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgJiYgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nICkge1xuXHRcdFx0XHRcdFx0ZGltSW1nID0gW3RoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWddO1xuXHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbChfdGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiB1cmxJbWFnZSxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtaW5IZWlnaHQ6IF90aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogZGltSW1nWzBdLFxuXHRcdFx0XHRcdFx0aW1nSGVpZ2h0OiBkaW1JbWdbMV1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIEFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0XHRcdF90aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2Nyb3BfdHlwZScpLnZhbCggJ3VybCcgKTtcblx0XHRcdFx0XHRfdGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNmaWxlX25hbWUnKS52YWwoIHVybEltYWdlICk7XG5cdFx0XHRcdFx0X3RoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCB1cmxJbWFnZS5zcGxpdCgnLicpLnNsaWNlKC0xKSApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fWVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5hdHRyKCdzcmMnLCB1cmxJbWFnZSk7XG5cblx0XHRcdFx0Ly8gY3JlYXRlIGNyb3AgaWYgZG9lcyBub3QgZXhpc3Rcblx0XHRcdFx0bWV0aG9kcy5yZW5kZXJJbWFnZUNyb3AuY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLmltZ0Nyb3AsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHZhciBkaW1JbWcgPSBbXTtcblx0XHRcdFx0XHQvLyBzZXR0aW5ncyBpbWFnZSBjcm9wXG5cdFx0XHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nICYmIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyApIHtcblx0XHRcdFx0XHRcdGRpbUltZyA9IFt0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nXTtcblx0XHRcdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdFx0XHRkaW1JbWcgPSB0aGlzLmpjcm9wX2ltZy5nZXRCb3VuZHMoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwodGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiB1cmxJbWFnZSxcblx0XHRcdFx0XHRcdG1pbldpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZyxcblx0XHRcdFx0XHRcdG1pbkhlaWdodDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdFx0aW1nV2lkdGg6IGRpbUltZ1swXSxcblx0XHRcdFx0XHRcdGltZ0hlaWdodDogZGltSW1nWzFdXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBBZGQgdmFsdWVzIHRvIHRoZSBjcm9wIGZvcm1cblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2Nyb3BfdHlwZScpLnZhbCggJ3VybCcgKTtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfbmFtZScpLnZhbCggdXJsSW1hZ2UgKTtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0I2ZpbGVfdHlwZScpLnZhbCggdXJsSW1hZ2Uuc3BsaXQoJy4nKS5zbGljZSgtMSkgKTtcblxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBjYWxsIGNhbGxiYWNrXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBSZW5kZXIgRmluZVVwbG9hZGVyIHBsdWdpbiBmb3IgdXNlciBwcm9kdWN0IGltYWdlXG5cdFx0KiBAcGFyYW0ge0VsZW1lbnQgalF1ZXJ5fSAkdXBsb2FkZXJJbWdcblx0XHQqL1xuXHRcdHJlbmRlclVwbG9hZGVySW1nOiBmdW5jdGlvbiAoJHVwbG9hZGVySW1nKSB7XG5cblx0XHRcdGlmKCAhZXhpc3RVcGxvYWRlclBsdWdpbigpIClcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQkdXBsb2FkZXJJbWcuZmluZVVwbG9hZGVyKHtcblx0XHRcdFx0ZGVidWc6IGZhbHNlLFxuXHRcdFx0XHR0ZW1wbGF0ZTogdGhpcy5zZXR0aW5ncy50ZW1wbGF0ZUltZ1VwbG9hZGVyLFxuXHRcdFx0XHQvLyBzZXNzaW9uOiB7XG5cdFx0XHRcdC8vICAgICBlbmRwb2ludDogZG9jdW1lbnQudXJsICsgUm91dGUucm91dGUoJ2ZpbGUudGVtcCcpLFxuXHRcdFx0XHQvLyAgICAgcGFyYW1zOiB7XG5cdFx0XHRcdC8vICAgICAgICAgJ2NvZGlnb19wcm95ZWN0byc6IDBcblx0XHRcdFx0Ly8gICAgIH1cblx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0cmVxdWVzdDogdGhpcy5zZXR0aW5ncy51cGxvYWRkaW5nLFxuXHRcdFx0XHR0aHVtYm5haWxzOiB7XG5cdFx0XHRcdFx0cGxhY2Vob2xkZXJzOiB7XG5cdFx0XHRcdFx0XHR3YWl0aW5nUGF0aDogJ2ltZy93YWl0aW5nLWdlbmVyaWMucG5nJyxcblx0XHRcdFx0XHRcdG5vdEF2YWlsYWJsZVBhdGg6ICdpbWcvbm90X2F2YWlsYWJsZS1nZW5lcmljLnBuZydcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGF1dG9VcGxvYWQ6IHRydWUsXG5cdFx0XHRcdG11bHRpcGxlOiBmYWxzZSxcblx0XHRcdFx0dmFsaWRhdGlvbjoge1xuXHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHQvLyBtaW5XaWR0aDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgfHwgZGVmYXVsdHMuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0Ly8gbWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcgfHwgZGVmYXVsdHMuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0XHRcdG1heFdpZHRoOiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5tYXhXaWR0aEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWF4V2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtYXhIZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1heEhlaWdodEltZyB8fCBkZWZhdWx0cy5jb25maWdJbWcubWF4SGVpZ2h0SW1nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRhbGxvd2VkRXh0ZW5zaW9uczogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcuYWxsb3dlZEV4dGVuc2lvbnMgfHwgZGVmYXVsdHMuY29uZmlnSW1nLmFsbG93ZWRFeHRlbnNpb25zLFxuXHRcdFx0XHRcdHNpemVMaW1pdDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcuc2l6ZUxpbWl0IHx8IGRlZmF1bHRzLmNvbmZpZ0ltZy5zaXplTGltaXQsXG5cdFx0XHRcdFx0aXRlbUxpbWl0OiAwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNjYWxpbmc6IHtcblx0XHRcdFx0XHRzZW5kT3JpZ2luYWw6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLnNlbmRPcmlnaW5hbCB8fCBkZWZhdWx0cy5jb25maWdJbWcuc2VuZE9yaWdpbmFsLFxuXHRcdFx0XHRcdGRlZmF1bHRRdWFsaXR5OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5kZWZhdWx0UXVhbGl0eSB8fCBkZWZhdWx0cy5jb25maWdJbWcuZGVmYXVsdFF1YWxpdHlcblx0XHRcdFx0fSxcblx0XHRcdFx0Ly8gRXZlbnRzIGhhbmRsZXJzXG5cdFx0XHRcdGNhbGxiYWNrczoge1xuXHRcdFx0XHRcdG9uVXBsb2FkOiBtZXRob2RzLm9uTG9hZEltZy5iaW5kKHRoaXMpXG5cdFx0XHRcdFx0Ly8gb25Db21wbGV0ZTogbWV0aG9kcy5vbkNvbXBsZXRlTG9hZEltZy5iaW5kKHRoaXMpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRyYWdBbmREcm9wOiB7XG5cdFx0XHRcdFx0ZXh0cmFEcm9wem9uZXM6IHRoaXMuc2V0dGluZ3MuZXh0cmFEcm9wem9uZXNcblx0XHRcdFx0fSxcblx0XHRcdFx0c2hvd01lc3NhZ2U6IHRoaXMuc2V0dGluZ3Muc2hvd01lc3NhZ2UsXG5cdFx0XHRcdHNob3dDb25maXJtOiB0aGlzLnNldHRpbmdzLnNob3dDb25maXJtLFxuXHRcdFx0XHRzaG93UHJvbXB0OiB0aGlzLnNldHRpbmdzLnNob3dQcm9tcHRcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIHNldCBpbWFnZSBjcm9wIHBsdWdpblxuXHRcdCogQHBhcmFtIHtFbGVtZW50IGpRdWVyeX0gJGltZ0Nyb3Bcblx0XHQqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdFx0Ki9cblx0XHRyZW5kZXJJbWFnZUNyb3A6IGZ1bmN0aW9uICgkaW1nQ3JvcCwgY2FsbGJhY2spIHtcblxuXHRcdFx0aWYoICFleGlzdENyb3BQbHVnaW4oKSApXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdFx0Ly9pbWFnZXMgY3JvcFxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0JGltZ0Nyb3AuSmNyb3Aoe1xuXHRcdFx0XHRvblNlbGVjdDogbWV0aG9kcy5zZXRDb29yZHMuYmluZCh0aGlzKSxcblx0XHRcdFx0b25DaGFuZ2U6IG1ldGhvZHMuc2V0Q29vcmRzLmJpbmQodGhpcyksXG5cdFx0XHRcdG9uUmVsZWFzZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBtaW5TaXplOiBbdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsIHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZ10sXG5cdFx0XHRcdC8vIG1heFNpemU6IFt0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5tYXhXaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWF4SGVpZ2h0SW1nXSxcblx0XHRcdFx0YmdDb2xvcjogJ2JsYWNrJyxcblx0XHRcdFx0YmdPcGFjaXR5OiAwLjQsXG5cdFx0XHRcdHNldFNlbGVjdDogWyAwLCAwLCB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZywgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nIF0sXG5cdFx0XHRcdGFzcGVjdFJhdGlvOiAgdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcgLyB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdGJveFdpZHRoOiAkKHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5wYXJlbnQoKVswXSkud2lkdGgoKSxcblx0XHRcdFx0Ym94SGVpZ2h0OiAwLFxuXHRcdFx0XHRhbGxvd1NlbGVjdDogZmFsc2UsXG5cdFx0XHRcdGFsbG93UmVzaXplOiB0cnVlXG5cblx0XHRcdH0sZnVuY3Rpb24oKXtcblx0XHRcdFx0X3RoaXMuamNyb3BfaW1nID0gdGhpcztcblxuXHRcdFx0XHR2YXIgZGltRGVmYXVsdCA9IF90aGlzLmpjcm9wX2ltZy5nZXRCb3VuZHMoKTtcblxuXHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwoX3RoaXMsIHtcblx0XHRcdFx0XHRpbWdTZXQ6ICRpbWdDcm9wLmF0dHIoJ3NyYycpLFxuXHRcdFx0XHRcdG1pbldpZHRoOiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0bWluSGVpZ2h0OiBfdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluSGVpZ2h0SW1nLFxuXHRcdFx0XHRcdGltZ1dpZHRoOiBkaW1EZWZhdWx0WzBdLFxuXHRcdFx0XHRcdGltZ0hlaWdodDogZGltRGVmYXVsdFsxXVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpe1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogU2V0IHNlbGVjdCBvbiBpbWFnZSBjcm9wXG5cdFx0KiBAcGFyYW0gTnVtYmVyIGltZ1dpZHRoXG5cdFx0KiBAcGFyYW0gTnVtYmVyIGltZ0hlaWdodFxuXHRcdCovXG5cdFx0Y2hhbmdlT3B0c0Nyb3A6IGZ1bmN0aW9uIChvcHRpb25zLCBjYWxsYmFjaykge1xuXG5cdFx0XHR2YXIgc2V0dGluZ3MgPSB7XG5cdFx0XHRcdGltZ1NldDogJycsXG5cdFx0XHRcdG1pbldpZHRoOiAwLFxuXHRcdFx0XHRtaW5IZWlnaHQ6IDAsXG5cdFx0XHRcdGltZ1dpZHRoOiAwLFxuXHRcdFx0XHRpbWdIZWlnaHQ6IDAsXG5cdFx0XHRcdGRpbVNlbGVjdDogWzAsMF0sXG5cdFx0XHRcdGl4OiAwLFxuXHRcdFx0XHRpeTogMFxuXHRcdFx0fTtcblxuXHRcdFx0JC5leHRlbmQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuXG5cdFx0XHQvLyBzZXQgcHJvcGVydGllc1xuXHRcdFx0c2V0dGluZ3MuZGltU2VsZWN0ID0gc2V0U3F1YXJlKHNldHRpbmdzLmltZ1dpZHRoLCBzZXR0aW5ncy5pbWdIZWlnaHQpO1xuXHRcdFx0c2V0dGluZ3MuaXggPSAoc2V0dGluZ3MuaW1nV2lkdGggLSBzZXR0aW5ncy5kaW1TZWxlY3RbMF0pLzI7XG5cblx0XHRcdC8vIHJlZnJlc2ggb3B0aW9ucyBjcm9wXG5cdFx0XHR0aGlzLmpjcm9wX2ltZy5zZXRPcHRpb25zKHtcblx0XHRcdFx0dHJ1ZVNpemU6IFsgTWF0aC5mbG9vcihzZXR0aW5ncy5pbWdXaWR0aCksIE1hdGguZmxvb3Ioc2V0dGluZ3MuaW1nSGVpZ2h0KSBdXG5cdFx0XHRcdC8vIG91dGVySW1hZ2U6IHNldHRpbmdzLmltZ1NldFxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuamNyb3BfaW1nLnNldFNlbGVjdCggW3NldHRpbmdzLml4LCBzZXR0aW5ncy5peSwgc2V0dGluZ3MuZGltU2VsZWN0WzBdLCBzZXR0aW5ncy5kaW1TZWxlY3RbMV1dICk7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5hdHRyKCdzcmMnLCBzZXR0aW5ncy5pbWdTZXQpO1xuXG5cdFx0XHQvL3J1biBjYWxsYmFja1xuXHRcdFx0aWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBzdWJtaXQgZXZlbnQgZm9yIGltYWdlIGNyb3Bcblx0XHQqL1xuXHRcdHN1Ym1pdENyb3BJbWFnZTogZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHR2YXIgZGF0YSA9IGZvcm1Ub0pzb24oIGUudGFyZ2V0ICk7XG5cdFx0XHRkYXRhLnRhcmdfdyA9IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nO1xuXHRcdFx0ZGF0YS50YXJnX2ggPSB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWc7XG5cblx0XHRcdCQuZXh0ZW5kKGRhdGEsIHRoaXMuc2V0dGluZ3MuY3JvcHBpbmcucGFyYW1zKTtcblxuXHRcdFx0Ly8gZW1pdCBjYWxsYmFja1xuXHRcdFx0aWYoICQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Dcm9wcGluZyddKSApXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BwaW5nJ10uY2FsbCh0aGlzLCB0aGlzLmpjcm9wX2ltZyk7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnOnN1Ym1pdCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXG5cdFx0XHQkLnBvc3QodGhpcy5zZXR0aW5ncy5jcm9wcGluZy5lbmRwb2ludCwgZGF0YSwgbWV0aG9kcy5vblN1Y2Nlc3NDcm9wLmJpbmQodGhpcykpXG5cdFx0XHQgLmZhaWwobWV0aG9kcy5vbkVycm9yQ3JvcC5iaW5kKHRoaXMpKTtcblx0XHR9LFxuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBldmVudHMgaGFuZGxlclxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tXG5cdFx0LyoqXG5cdFx0KiBoYW5kbGVyIGZvciBzZXQgdG8gY29vcmRzIG9mIGltYWdlIGNyb3Bcblx0XHQqIEBwYXJhbSBPYmplY3QgY29vcmRzXG5cdFx0Ki9cblx0XHRzZXRDb29yZHM6IGZ1bmN0aW9uIChjb29yZHMpe1xuXG5cdFx0XHR2YXIgcmF0aW9MZXNzZXIgPSB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcgLyB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5XaWR0aEltZztcblx0XHRcdHZhciBkaW1JbWcgPSB0aGlzLmpjcm9wX2ltZyAhPT0gbnVsbCA/IHRoaXMuamNyb3BfaW1nLmdldEJvdW5kcygpIDogZmFsc2UsXG5cdFx0XHRcdHJ4ID0gJCh0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcucGFyZW50KClbMF0pLndpZHRoKCkgLyBjb29yZHMudyxcblx0XHRcdFx0cnkgPSAocmF0aW9MZXNzZXIgKiAkKHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5wYXJlbnQoKVswXSkud2lkdGgoKSkgLyBjb29yZHMuaDtcblxuXHRcdFx0Ly8gc2V0IGNvbnRlbnQgaGVpZ2h0IG9mIGNvbnRlbnQgcHJldmlld1xuXHRcdFx0JCh0aGlzLnNldHRpbmdzLnByZXZpZXdJbWcucGFyZW50KClbMF0pLmhlaWdodCggcmF0aW9MZXNzZXIgKiAkKHRoaXMuc2V0dGluZ3MucHJldmlld0ltZy5wYXJlbnQoKVswXSkud2lkdGgoKSApO1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0LmNyb3AteCcpLnZhbCggY29vcmRzLnggKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQuY3JvcC15JykudmFsKCBjb29yZHMueSApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dC5jcm9wLXcnKS52YWwoIGNvb3Jkcy53ICk7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJ2lucHV0LmNyb3AtaCcpLnZhbCggY29vcmRzLmggKTtcblxuXHRcdFx0Ly8gc2V0IHByZXZpZXcgaW1hZ2Vcblx0XHRcdGlmKCBkaW1JbWcgKXtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5wcmV2aWV3SW1nLmNzcyh7XG5cdFx0XHRcdFx0d2lkdGg6IE1hdGgucm91bmQocnggKiBkaW1JbWdbMF0pICsgJ3B4Jyxcblx0XHRcdFx0XHRoZWlnaHQ6IE1hdGgucm91bmQocnkgKiBkaW1JbWdbMV0pICsgJ3B4Jyxcblx0XHRcdFx0XHRtaW5XaWR0aDogTWF0aC5yb3VuZChyeCAqIGRpbUltZ1swXSkgKyAncHgnLFxuXHRcdFx0XHRcdG1pbkhlaWdodDogTWF0aC5yb3VuZChyeSAqIGRpbUltZ1sxXSkgKyAncHgnLFxuXHRcdFx0XHRcdG1hcmdpbkxlZnQ6ICctJyArIE1hdGgucm91bmQocnggKiBjb29yZHMueCkgKyAncHgnLFxuXHRcdFx0XHRcdG1hcmdpblRvcDogJy0nICsgTWF0aC5yb3VuZChyeSAqIGNvb3Jkcy55KSArICdweCdcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogd2lsbCB1cGxvYWQgaW1hZ2Vcblx0XHQqIEBwYXJhbSBOdW1iZXIgaWRcblx0XHQqIEBwYXJhbSBTdHJpbmcgbmFtZVxuXHRcdCovXG5cdFx0b25Mb2FkSW1nOiBmdW5jdGlvbiAoaWQsIG5hbWUpIHtcblxuXHRcdFx0dmFyICRhcmVhRHJvcCA9IHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcuZmluZVVwbG9hZGVyKCdnZXREcm9wVGFyZ2V0JywgaWQpO1xuXG5cdFx0XHRpZiggJGFyZWFEcm9wICE9PSB1bmRlZmluZWQgJiYgJGFyZWFEcm9wLmxlbmd0aCApe1xuXHRcdFx0XHRpZiggJGFyZWFEcm9wLmhhc0NsYXNzKCdpbWFnZS1hcmVhLWRyb3AnKSB8fCAkYXJlYURyb3AuaGFzQ2xhc3MoJ3dyYXBwZXItaW1hZ2UtY3JvcCcpICl7XG5cblx0XHRcdFx0XHRtZXRob2RzLnJlYXNzaWduQWN0aW9ucy5jYWxsKHRoaXMpO1xuXHRcdFx0XHRcdG1ldGhvZHMuc2V0SW1hZ2UuY2FsbCh0aGlzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkxvYWRJbWcnXSkgKVxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmNhbGxiYWNrc1snb25Mb2FkSW1nJ10uY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLCBpZCwgbmFtZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogY29tcGxldGUgZXZlbnQgZm9yIHVwbG9hZCBpbWFnZVxuXHRcdCogQHBhcmFtIE51bWJlciBpZFxuXHRcdCogQHBhcmFtIFN0cmluZyBuYW1lXG5cdFx0KiBAcGFyYW0gT2JqZWN0IHJlc1xuXHRcdCogQHBhcmFtIE9iamVjdCB4aHJcblx0XHQqL1xuXHRcdG9uQ29tcGxldGVMb2FkSW1nOiBmdW5jdGlvbiAoZXZlbnQsIGlkLCBuYW1lLCByZXMpIHtcblxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0aWYoICFyZXMuc3VjY2VzcyApXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0Ly8gc2V0dGluZ3MgaW1hZ2UgY3JvcFxuXHRcdFx0aWYoIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuc2V0SW1hZ2UocmVzLmZpbGVfcGF0aCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dmFyIGRpbUltZyA9IFtyZXMuZmlsZV93aWR0aCwgcmVzLmZpbGVfaGVpZ2h0XTtcblxuXHRcdFx0XHRcdG1ldGhvZHMuY2hhbmdlT3B0c0Nyb3AuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdFx0XHRpbWdTZXQ6IHJlcy5maWxlX3BhdGgsXG5cdFx0XHRcdFx0XHRtaW5XaWR0aDogdGhpcy5zZXR0aW5ncy5jb25maWdJbWcubWluV2lkdGhJbWcsXG5cdFx0XHRcdFx0XHRtaW5IZWlnaHQ6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbkhlaWdodEltZyxcblx0XHRcdFx0XHRcdGltZ1dpZHRoOiByZXMuZmlsZV93aWR0aCxcblx0XHRcdFx0XHRcdGltZ0hlaWdodDogcmVzLmZpbGVfaGVpZ2h0XG5cblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBlbWl0IGNhbGxiYWNrXG5cdFx0XHRcdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNvbXBsZXRlTG9hZCddKSApXG5cdFx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNvbXBsZXRlTG9hZCddLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy51cGxvYWRlckltZywgaWQsIG5hbWUsIHJlcyk7XG5cdFx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcblxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXG5cdFx0XHR9ZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbWdDcm9wLmF0dHIoJ3NyYycsIHJlcy5maWxlX3BhdGgpO1xuXG5cdFx0XHRcdG1ldGhvZHMucmVuZGVySW1hZ2VDcm9wLmNhbGwodGhpcywgdGhpcy5zZXR0aW5ncy5pbWdDcm9wLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRtZXRob2RzLmNoYW5nZU9wdHNDcm9wLmNhbGwodGhpcywge1xuXHRcdFx0XHRcdFx0aW1nU2V0OiByZXMuZmlsZV9wYXRoLFxuXHRcdFx0XHRcdFx0bWluV2lkdGg6IHRoaXMuc2V0dGluZ3MuY29uZmlnSW1nLm1pbldpZHRoSW1nLFxuXHRcdFx0XHRcdFx0bWluSGVpZ2h0OiB0aGlzLnNldHRpbmdzLmNvbmZpZ0ltZy5taW5IZWlnaHRJbWcsXG5cdFx0XHRcdFx0XHRpbWdXaWR0aDogcmVzLmZpbGVfd2lkdGgsXG5cdFx0XHRcdFx0XHRpbWdIZWlnaHQ6IHJlcy5maWxlX2hlaWdodFxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIGVtaXQgY2FsbGJhY2tcblx0XHRcdFx0XHRcdGlmKCAkLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ29tcGxldGVMb2FkJ10pIClcblx0XHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxsYmFja3NbJ29uQ29tcGxldGVMb2FkJ10uY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnVwbG9hZGVySW1nLCBpZCwgbmFtZSwgcmVzKTtcblx0XHRcdFx0XHR9LmJpbmQodGhpcykpO1xuXG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCB2YWx1ZXMgdG8gdGhlIGNyb3AgZm9ybVxuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNjcm9wX3R5cGUnKS52YWwoICduYW1lJyApO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5mb3JtQ3JvcC5maW5kKCdpbnB1dCNmaWxlX25hbWUnKS52YWwoIHJlcy5maWxlX25hbWUgKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZm9ybUNyb3AuZmluZCgnaW5wdXQjZmlsZV90eXBlJykudmFsKCByZXMuZmlsZV90eXBlICk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogc3VjY2VzcyBldmVudCBmb3IgY3JvcCBpbWFnZVxuXHRcdCogQHBhcmFtIE9iamVjdCByZXNcblx0XHQqIEBwYXJhbSBTdHJpbmcgc3RhdHVzXG5cdFx0KiBAcGFyYW0gT2JqZWN0IGpxWEhSXG5cdFx0Ki9cblx0XHRvblN1Y2Nlc3NDcm9wOiBmdW5jdGlvbiAocmVzcCwgc3RhdHVzLCBqcVhIUikge1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJzpzdWJtaXQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblxuXHRcdFx0Ly8gY2FsbCBjcm9wIGNvbXBsZXRlXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BDb21wbGV0ZSddKSApXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BDb21wbGV0ZSddLmNhbGwodGhpcywgdGhpcy5qY3JvcF9pbWcsIHJlc3AsIGpxWEhSKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBlcnJvciBldmVudCBmb3IgY3JvcCBpbWFnZVxuXHRcdCogQHBhcmFtIE9iamVjdCBqcVhIUlxuXHRcdCogQHBhcmFtIFN0cmluZyBzdGF0dXNcblx0XHQqIEBwYXJhbSBTdHJpbmcgZXJyb3Jcblx0XHQqL1xuXHRcdG9uRXJyb3JDcm9wOiBmdW5jdGlvbihqcVhIUiwgc3RhdHVzLCBlcnJvcikge1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzLmZvcm1Dcm9wLmZpbmQoJzpzdWJtaXQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblxuXHRcdFx0Ly8gY2FsbCBjcm9wIGVycm9yXG5cdFx0XHRpZiggJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BFcnJvciddKSApXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsbGJhY2tzWydvbkNyb3BFcnJvciddLmNhbGwodGhpcywgdGhpcy5qY3JvcF9pbWcsIGpxWEhSLCBlcnJvcik7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIHBsdWdpbiBjbGFzc1xuXHQvLyBpbnN0YW5jZSB0aGUgcGx1Z2luXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblx0JC5pbWFnZVVwbG9hZGVyQ3JvcCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG5cdFx0b3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuXHRcdC8vIHBhcmFtZXRlcnNcblx0XHR2YXIgcGx1Z2luID0gdGhpcztcblxuXHRcdC8vIHNldCBhdHRyaWJ1dGVzXG5cdFx0dGhpcy5qY3JvcF9pbWcgPSBudWxsO1xuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFx0dGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cblx0XHQvLyBpbml0aWFsaXplIHBsdWdpblxuXHRcdGlmKCAkLmlzRnVuY3Rpb24ocGx1Z2luLmluaXQpIClcblx0XHRcdHBsdWdpbi5pbml0KGVsZW1lbnQsIG9wdGlvbnMpO1xuXHR9O1xuXG5cdC8vIGV4dGVuZHMgcHJvdG90eXBlIG9mIHBsdWdpblxuXHQkLmltYWdlVXBsb2FkZXJDcm9wLnByb3RvdHlwZSA9IHtcblxuXHRcdC8vIHBsdWdpbidzIHNldHRpbmdzXG5cdFx0c2V0dGluZ3MgOiB7fSxcblxuXHRcdC8qKlxuXHRcdCogQ29uc3RydWN0b3IgbWV0aG9kXG5cdFx0Ki9cblx0XHRpbml0IDogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuXG5cdFx0XHR0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuXHRcdFx0Ly8gY2hlY2sgb3V0IGlmIGFscmVhZHkgd2FzIGFzc2lnbmVkIHRoZSBqY3JvcCBsaWJyYXJ5XG5cdFx0XHRpZiggdGhpcy5zZXR0aW5ncy5pbWdDcm9wICYmIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcC5kYXRhKCdKY3JvcCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcgPSB0aGlzLnNldHRpbmdzLmltZ0Nyb3AuZGF0YSgnSmNyb3AnKTtcblx0XHRcdFx0dGhpcy5qY3JvcF9pbWcuZGVzdHJveSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbml0IGltYWdlIHVwbG9hZGVyIGFuZCBhY3Rpb25zXG5cdFx0XHRtZXRob2RzLnJlYXNzaWduQWN0aW9ucy5jYWxsKHRoaXMpO1xuXHRcdFx0bWV0aG9kcy5yZW5kZXJVcGxvYWRlckltZy5jYWxsKHRoaXMsIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWcpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQqIC0tLS0tLS0tLS0tXG5cdFx0KiBBcGkgbWV0aG9kc1xuXHRcdCogLS0tLS0tLS0tLS1cblx0XHQqL1xuXG5cdFx0LyoqXG5cdFx0KiBjaGFuZ2UgSW1hZ2Vcblx0XHQqIEBwYXJhbSBTdHJpbmcgdXJsSW1hZ2Vcblx0XHQqIEBwYXJhbSBGdW5jdGlvbiBjYWxsYmFja1xuXHRcdCovXG5cdFx0Y2hhbmdlSW1hZ2UgOiBmdW5jdGlvbih1cmxJbWFnZSwgY2FsbGJhY2spIHtcblx0XHRcdG1ldGhvZHMucmVhc3NpZ25BY3Rpb25zLmNhbGwodGhpcyk7XG5cdFx0XHRtZXRob2RzLnNldEltYWdlLmNhbGwodGhpcywgdXJsSW1hZ2UsIGNhbGxiYWNrKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBnZXQgaW1hZ2UgY3JvcCBlbGVtZW50XG5cdFx0Ki9cblx0XHRnZXRJbWdDcm9wIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuaW1nQ3JvcDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0KiBnZXQgZm9ybSBjcm9wIGVsZW1lbnRcblx0XHQqL1xuXHRcdGdldEZvcm1Dcm9wIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuZm9ybUNyb3A7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZ2V0IHVwbG9hZGVyIGltYWdlIGVsZW1lbnRcblx0XHQqL1xuXHRcdGdldFVwbG9hZGVySW1nIDogZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MudXBsb2FkZXJJbWc7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZ2V0IGltYWdlIHByZXZpZXcgZWxlbWVudFxuXHRcdCovXG5cdFx0Z2V0UHJldmlld0ltZyA6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB0aGlzLnNldHRpbmdzLnByZXZpZXdJbWc7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCogZGVzdHJveSBvYmplY3QgcGx1Z2luXG5cdFx0Ki9cblx0XHRkZXN0cm95IDogZnVuY3Rpb24gKCkge1xuXHRcdFx0bWV0aG9kcy5kZXN0cm95LmNhbGwodGhpcyk7XG5cdFx0fVxuXHR9O1xuXG5cdCQuZm4uaW1hZ2VVcGxvYWRlckNyb3AgPSBmdW5jdGlvbihvcHRzT3JDbWQpIHtcblx0XHR2YXIgc2VsZiA9IHRoaXMsIHNlbGZBcmdzID0gYXJndW1lbnRzLCByZXRWYWxzID0gW107XG5cblx0XHRpZiAoICQodGhpcykuZGF0YSgnaW1hZ2VVcGxvYWRlckNyb3AnKSAhPT0gdW5kZWZpbmVkICYmICQuaXNGdW5jdGlvbigkKHRoaXMpLmRhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJylbb3B0c09yQ21kXSkgKSB7XG5cblx0XHRcdHZhciBwbHVnID0gJCh0aGlzKS5kYXRhKCdpbWFnZVVwbG9hZGVyQ3JvcCcpO1xuXHRcdFx0cmV0dXJuIHBsdWdbb3B0c09yQ21kXS5hcHBseShwbHVnLCBzbGljZS5jYWxsKHNlbGZBcmdzLCAxKSk7XG5cblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRzT3JDbWQgPT09ICdvYmplY3QnIHx8ICFvcHRzT3JDbWQpIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcblxuXHRcdFx0XHR2YXIgcGx1Z2luID0gbmV3ICQuaW1hZ2VVcGxvYWRlckNyb3AodGhpcywgb3B0c09yQ21kKTtcblxuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ2ltYWdlVXBsb2FkZXJDcm9wJywgcGx1Z2luKTtcblx0XHRcdH0pO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdCQuZXJyb3IoICdNZXRob2QgXCInICsgIG9wdHNPckNtZCArICdcIiBkb2VzIG5vdCBleGlzdCBpbiBpbWFnZVVwbG9hZGVyQ3JvcCAtIChrcm9iaW5nKSBwbHVnaW4hJyk7XG5cdFx0fVxuXHR9O1xuXG59KSk7XG4iXX0=
